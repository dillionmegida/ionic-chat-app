{"ast":null,"code":"import { __awaiter } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { Injectable, Component, Input, InjectionToken, EventEmitter, Directive, Output, Inject, ViewChild, HostBinding, NgModule } from '@angular/core';\nimport { BehaviorSubject, ReplaySubject, of, Subject } from 'rxjs';\nimport { StreamChat } from 'stream-chat';\nimport { map, first, catchError, startWith, distinctUntilChanged, filter, debounceTime, tap } from 'rxjs/operators';\nimport { v4 } from 'uuid';\nimport * as i10 from '@ngx-translate/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport prettybytes from 'pretty-bytes';\nimport transliterate from '@stream-io/transliterate';\nimport * as i5 from 'angular-mentions';\nimport { MentionModule } from 'angular-mentions';\n\nconst _c0 = function (a0, a1, a3) {\n  return {\n    flexBasis: a0,\n    height: a1,\n    objectFit: \"cover\",\n    width: a3\n  };\n};\n\nfunction AvatarComponent_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 3);\n    i0.ɵɵlistener(\"load\", function AvatarComponent_img_1_Template_img_load_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.isLoaded = true;\n    })(\"error\", function AvatarComponent_img_1_Template_img_error_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.isError = true;\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction3(7, _c0, ctx_r0.size + \"px\", ctx_r0.size + \"px\", ctx_r0.size + \"px\"));\n    i0.ɵɵclassMapInterpolate1(\"str-chat__avatar-image str-chat__avatar-image\", ctx_r0.isLoaded ? \" str-chat__avatar-image--loaded\" : \"\", \"\");\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.initials);\n  }\n}\n\nfunction AvatarComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.initials, \" \");\n  }\n}\n\nconst _c1 = function (a0, a1, a2, a3, a4) {\n  return {\n    flexBasis: a0,\n    fontSize: a1,\n    height: a2,\n    lineHeight: a3,\n    width: a4\n  };\n};\n\nfunction IconComponent__svg_svg_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 9);\n    i0.ɵɵelement(1, \"path\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 11);\n    i0.ɵɵelement(1, \"path\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 13);\n    i0.ɵɵelementStart(1, \"g\", 14);\n    i0.ɵɵelement(2, \"path\", 15);\n    i0.ɵɵelement(3, \"path\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 17);\n    i0.ɵɵelementStart(1, \"title\");\n    i0.ɵɵtext(2, \"Combined Shape\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"desc\");\n    i0.ɵɵtext(4, \"Created with Sketch.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"g\", 18);\n    i0.ɵɵelementStart(6, \"g\", 19);\n    i0.ɵɵelementStart(7, \"g\", 20);\n    i0.ɵɵelement(8, \"path\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 22);\n    i0.ɵɵelementStart(1, \"title\", 23);\n    i0.ɵɵtext(2, \"streamChat.Send\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 24);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 25);\n    i0.ɵɵelementStart(1, \"title\", 23);\n    i0.ɵɵtext(2, \"streamChat.Attach files\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 26);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 27);\n    i0.ɵɵelement(1, \"path\", 28);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 29);\n    i0.ɵɵelementStart(1, \"defs\");\n    i0.ɵɵelement(2, \"path\", 30);\n    i0.ɵɵelementStart(3, \"filter\", 31);\n    i0.ɵɵelement(4, \"feOffset\", 32);\n    i0.ɵɵelement(5, \"feGaussianBlur\", 33);\n    i0.ɵɵelement(6, \"feColorMatrix\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"g\", 35);\n    i0.ɵɵelement(8, \"use\", 36);\n    i0.ɵɵelement(9, \"use\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IconComponent__svg_svg_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 38);\n    i0.ɵɵelement(1, \"path\", 39);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"height\", ctx_r8.size || 20)(\"width\", ctx_r8.size || 20);\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    stopColor: a0\n  };\n};\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_1_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.retryAttachmentUpload(attachmentUpload_r1.file);\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_1_div_1_Template_div_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.retryAttachmentUpload(attachmentUpload_r1.file);\n    });\n    i0.ɵɵelement(1, \"stream-icon\", 13);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_1_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n\n  if (rf & 2) {\n    const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", attachmentUpload_r1.url ? attachmentUpload_r1.url : attachmentUpload_r1.previewUri, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_1_stream_loading_indicator_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"stream-loading-indicator\", 15);\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, AttachmentPreviewListComponent_ng_container_1_div_1_div_1_Template, 2, 0, \"div\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6);\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵelementStart(4, \"div\", 8);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_1_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.deleteAttachment(attachmentUpload_r1);\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_1_Template_div_keyup_enter_4_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.deleteAttachment(attachmentUpload_r1);\n    });\n    i0.ɵɵelement(5, \"stream-icon\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AttachmentPreviewListComponent_ng_container_1_div_1_img_6_Template, 1, 1, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AttachmentPreviewListComponent_ng_container_1_div_1_stream_loading_indicator_7_Template, 1, 0, \"stream-loading-indicator\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵclassProp(\"rfu-image-previewer__image--loaded\", attachmentUpload_r1.state === \"success\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.state === \"error\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.url || attachmentUpload_r1.previewUri);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.state === \"uploading\");\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.retryAttachmentUpload(attachmentUpload_r1.file);\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template_div_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.retryAttachmentUpload(attachmentUpload_r1.file);\n    });\n    i0.ɵɵtext(2, \" streamChat.failed \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 24);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template_div_click_3_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.retryAttachmentUpload(attachmentUpload_r1.file);\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template_div_keyup_enter_3_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const attachmentUpload_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.retryAttachmentUpload(attachmentUpload_r1.file);\n    });\n    i0.ɵɵtext(4, \" streamChat.retry \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_2_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelement(1, \"stream-loading-indicator\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"ol\");\n    i0.ɵɵelementStart(2, \"li\", 17);\n    i0.ɵɵelement(3, \"stream-icon\", 18);\n    i0.ɵɵelementStart(4, \"a\", 19);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_2_Template_a_click_4_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      return attachmentUpload_r1.url ? null : $event.preventDefault();\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_2_Template_a_keyup_enter_4_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      return attachmentUpload_r1.url ? null : $event.preventDefault();\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵtemplate(6, AttachmentPreviewListComponent_ng_container_1_div_2_ng_container_6_Template, 5, 0, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 21);\n    i0.ɵɵlistener(\"click\", function AttachmentPreviewListComponent_ng_container_1_div_2_Template_span_click_7_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r35 = i0.ɵɵnextContext();\n      return ctx_r35.deleteAttachment(attachmentUpload_r1);\n    })(\"keyup.enter\", function AttachmentPreviewListComponent_ng_container_1_div_2_Template_span_keyup_enter_7_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.deleteAttachment(attachmentUpload_r1);\n    });\n    i0.ɵɵtext(8, \" \\u2718 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, AttachmentPreviewListComponent_ng_container_1_div_2_div_9_Template, 2, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachmentUpload_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"rfu-file-previewer__file--uploading\", attachmentUpload_r1.state === \"uploading\")(\"rfu-file-previewer__file--failed\", attachmentUpload_r1.state === \"error\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", attachmentUpload_r1.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", attachmentUpload_r1.file.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.state === \"error\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.state === \"uploading\");\n  }\n}\n\nfunction AttachmentPreviewListComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AttachmentPreviewListComponent_ng_container_1_div_1_Template, 8, 5, \"div\", 2);\n    i0.ɵɵtemplate(2, AttachmentPreviewListComponent_ng_container_1_div_2_Template, 10, 8, \"div\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const attachmentUpload_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.type === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachmentUpload_r1.type === \"file\");\n  }\n}\n\nconst _c3 = [\"fileInput\"];\n\nfunction MessageInputComponent_6_ng_template_0_Template(rf, ctx) {}\n\nfunction MessageInputComponent_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵtemplate(0, MessageInputComponent_6_ng_template_0_Template, 0, 0, \"ng-template\", 9);\n    i0.ɵɵlistener(\"valueChange\", function MessageInputComponent_6_Template_ng_template_valueChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.textareaValue = $event;\n    })(\"send\", function MessageInputComponent_6_Template_ng_template_send_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.messageSent();\n    })(\"userMentions\", function MessageInputComponent_6_Template_ng_template_userMentions_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.mentionedUsers = $event;\n    });\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", ctx_r0.textareaValue)(\"componentRef\", ctx_r0.textareaRef)(\"areMentionsEnabled\", ctx_r0.areMentionsEnabled)(\"mentionAutocompleteItemTemplate\", ctx_r0.mentionAutocompleteItemTemplate)(\"mentionScope\", ctx_r0.mentionScope);\n  }\n}\n\nfunction MessageInputComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"textarea\", 10);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind1(1, 1, \"streamChat.You can't send messages in this channel\"));\n  }\n}\n\nfunction MessageInputComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 13);\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵelementStart(6, \"input\", 14, 15);\n    i0.ɵɵlistener(\"change\", function MessageInputComponent_div_9_Template_input_change_6_listener() {\n      i0.ɵɵrestoreView(_r12);\n\n      const _r10 = i0.ɵɵreference(7);\n\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.filesSelected(_r10.files);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\", 16);\n    i0.ɵɵelement(9, \"stream-icon\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 3, \"streamChat.Attach files\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"accept\", ctx_r3.accept)(\"multiple\", ctx_r3.isMultipleFileUploadEnabled);\n  }\n}\n\nfunction MessageInputComponent_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function MessageInputComponent_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.messageSent();\n    })(\"keyup.enter\", function MessageInputComponent_button_10_Template_button_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.messageSent();\n    });\n    i0.ɵɵelement(1, \"stream-icon\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c4 = [\"content\"];\nconst _c5 = [\"*\"];\n\nfunction NotificationListComponent_stream_notification_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"stream-notification\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const notification_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"type\", notification_r1.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 2, notification_r1.text, notification_r1.translateParams), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.quoteClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Reply\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.pinClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, (ctx_r1.message == null ? null : ctx_r1.message.pinned) ? \"streamChat.Unpin\" : \"streamChat.Pin\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.flagClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Flag\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.muteClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Mute\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.editClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Edit Message\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.deleteClicked();\n    });\n    i0.ɵɵelementStart(1, \"li\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Delete\"), \" \");\n  }\n}\n\nfunction MessageActionsBoxComponent_div_9_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c6 = function (a0, a1) {\n  return {\n    message: a0,\n    messageUpdateHandler: a1\n  };\n};\n\nfunction MessageActionsBoxComponent_div_9_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageActionsBoxComponent_div_9_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r19.messageInputTemplate)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction2(2, _c6, ctx_r19.message, ctx_r19.modalClosed));\n  }\n}\n\nfunction MessageActionsBoxComponent_div_9_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"stream-message-input\", 24);\n    i0.ɵɵlistener(\"messageUpdate\", function MessageActionsBoxComponent_div_9_ng_template_2_Template_stream_message_input_messageUpdate_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return ctx_r23.modalClosed();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"message\", ctx_r21.message);\n  }\n}\n\nfunction MessageActionsBoxComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, MessageActionsBoxComponent_div_9_ng_container_1_Template, 2, 5, \"ng-container\", 18);\n    i0.ɵɵtemplate(2, MessageActionsBoxComponent_div_9_ng_template_2_Template, 1, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelement(4, \"stream-notification-list\");\n    i0.ɵɵelementStart(5, \"div\", 20);\n    i0.ɵɵelement(6, \"div\");\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵelementStart(8, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_div_9_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.modalClosed();\n    });\n    i0.ɵɵtext(9, \" streamChat.Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function MessageActionsBoxComponent_div_9_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.sendClicked();\n    })(\"keyup.enter\", function MessageActionsBoxComponent_div_9_Template_button_keyup_enter_10_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.sendClicked();\n    });\n    i0.ɵɵtext(11, \" streamChat.Send \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r20 = i0.ɵɵreference(3);\n\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.messageInputTemplate)(\"ngIfElse\", _r20);\n  }\n}\n\nfunction ChannelComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵprojection(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c7 = [\"container\"];\n\nfunction ChannelListComponent_div_3_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"streamChat.You have no channels currently\"), \" \");\n  }\n}\n\nfunction ChannelListComponent_div_3_ng_container_4_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c8 = function (a0) {\n  return {\n    channel: a0\n  };\n};\n\nfunction ChannelListComponent_div_3_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ChannelListComponent_div_3_ng_container_4_ng_container_1_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return ctx_r18.channelSelected();\n    })(\"keyup.enter\", function ChannelListComponent_div_3_ng_container_4_ng_container_1_Template_div_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return ctx_r20.channelSelected();\n    });\n    i0.ɵɵtemplate(2, ChannelListComponent_div_3_ng_container_4_ng_container_1_ng_container_2_Template, 1, 0, \"ng-container\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const channel_r13 = i0.ɵɵnextContext().$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r14.customChannelPreviewTemplate)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c8, channel_r13));\n  }\n}\n\nfunction ChannelListComponent_div_3_ng_container_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"stream-channel-preview\", 17);\n    i0.ɵɵlistener(\"click\", function ChannelListComponent_div_3_ng_container_4_ng_template_2_Template_stream_channel_preview_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return ctx_r22.channelSelected();\n    })(\"keyup.enter\", function ChannelListComponent_div_3_ng_container_4_ng_template_2_Template_stream_channel_preview_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r24 = i0.ɵɵnextContext(3);\n      return ctx_r24.channelSelected();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const channel_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"channel\", channel_r13);\n  }\n}\n\nfunction ChannelListComponent_div_3_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ChannelListComponent_div_3_ng_container_4_ng_container_1_Template, 3, 4, \"ng-container\", 13);\n    i0.ɵɵtemplate(2, ChannelListComponent_div_3_ng_container_4_ng_template_2_Template, 1, 1, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r15 = i0.ɵɵreference(3);\n\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.customChannelPreviewTemplate)(\"ngIfElse\", _r15);\n  }\n}\n\nfunction ChannelListComponent_div_3_div_6_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Load more\"));\n  }\n}\n\nfunction ChannelListComponent_div_3_div_6_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"stream-loading-indicator\");\n  }\n}\n\nfunction ChannelListComponent_div_3_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function ChannelListComponent_div_3_div_6_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return ctx_r29.loadMoreChannels();\n    })(\"keyup.enter\", function ChannelListComponent_div_3_div_6_Template_div_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return ctx_r31.loadMoreChannels();\n    });\n    i0.ɵɵelementStart(1, \"button\", 19);\n    i0.ɵɵtemplate(2, ChannelListComponent_div_3_div_6_span_2_Template, 3, 3, \"span\", 13);\n    i0.ɵɵtemplate(3, ChannelListComponent_div_3_div_6_ng_template_3_Template, 1, 0, \"ng-template\", null, 20, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r27 = i0.ɵɵreference(4);\n\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r12.isLoadingMoreChannels);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.isLoadingMoreChannels)(\"ngIfElse\", _r27);\n  }\n}\n\nfunction ChannelListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵtemplate(2, ChannelListComponent_div_3_p_2_Template, 3, 3, \"p\", 9);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵtemplate(4, ChannelListComponent_div_3_ng_container_4_Template, 4, 2, \"ng-container\", 10);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵtemplate(6, ChannelListComponent_div_3_div_6_Template, 5, 3, \"div\", 11);\n    i0.ɵɵpipe(7, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !((tmp_0_0 = i0.ɵɵpipeBind1(3, 4, ctx_r1.channels$)) == null ? null : tmp_0_0.length));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 6, ctx_r1.channels$))(\"ngForTrackBy\", ctx_r1.trackByChannelId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(7, 8, ctx_r1.hasMoreChannels$));\n  }\n}\n\nfunction ChannelListComponent_ng_template_6_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_6_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ChannelListComponent_ng_template_6_ng_container_0_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n\n    const _r4 = i0.ɵɵreference(9);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r4);\n  }\n}\n\nfunction ChannelListComponent_ng_template_6_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_6_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ChannelListComponent_ng_template_6_ng_container_2_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n\n    const _r6 = i0.ɵɵreference(11);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\n\nfunction ChannelListComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ChannelListComponent_ng_template_6_ng_container_0_Template, 2, 1, \"ng-container\", 21);\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵtemplate(2, ChannelListComponent_ng_template_6_ng_container_2_Template, 2, 1, \"ng-container\", 21);\n    i0.ɵɵpipe(3, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx_r3.isError$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 4, ctx_r3.isInitializing$));\n  }\n}\n\nfunction ChannelListComponent_ng_template_8_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, ChannelListComponent_ng_template_8_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵelementStart(2, \"div\", 24);\n    i0.ɵɵelement(3, \"stream-icon\", 25);\n    i0.ɵɵelementStart(4, \"h1\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r6 = i0.ɵɵreference(11);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 3, \"streamChat.Connection error\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 5, \"streamChat.Error connecting to chat, refresh the page to try again.\"), \" \");\n  }\n}\n\nfunction ChannelListComponent_ng_template_10_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_10_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_10_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction ChannelListComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, ChannelListComponent_ng_template_10_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, ChannelListComponent_ng_template_10_ng_container_2_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(3, ChannelListComponent_ng_template_10_ng_container_3_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r8 = i0.ɵɵreference(13);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r8);\n  }\n}\n\nfunction ChannelListComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelement(1, \"div\", 28);\n    i0.ɵɵelementStart(2, \"div\", 29);\n    i0.ɵɵelement(3, \"div\", 30);\n    i0.ɵɵelement(4, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c9 = [\"selectorContainer\"];\nconst _c10 = [\"selectorTooltip\"];\n\nfunction MessageReactionsComponent_div_0_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5);\n    i0.ɵɵelementStart(1, \"span\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" \\xA0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const reactionType_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.getEmojiByReaction(reactionType_r3), \" \");\n  }\n}\n\nfunction MessageReactionsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"ul\");\n    i0.ɵɵtemplate(2, MessageReactionsComponent_div_0_li_2_Template, 4, 1, \"li\", 3);\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵelementStart(4, \"span\", 4);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"str-chat__reaction-list--reverse\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.existingReactions)(\"ngForTrackBy\", ctx_r0.trackByMessageReaction);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.reactionsCount);\n  }\n}\n\nconst _c11 = function (a0, a1) {\n  return {\n    left: a0,\n    visibility: a1\n  };\n};\n\nconst _c12 = function (a0) {\n  return {\n    left: a0\n  };\n};\n\nfunction MessageReactionsComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12, 13);\n    i0.ɵɵelement(2, \"div\", 14);\n    i0.ɵɵelementStart(3, \"span\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c11, (ctx_r5.tooltipPositions == null ? null : ctx_r5.tooltipPositions.tooltip) + \"px\", ctx_r5.tooltipPositions ? \"visible\" : \"hidden\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(6, _c12, (ctx_r5.tooltipPositions == null ? null : ctx_r5.tooltipPositions.arrow) + \"px\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.tooltipText, \" \");\n  }\n}\n\nfunction MessageReactionsComponent_div_1_li_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵlistener(\"click\", function MessageReactionsComponent_div_1_li_4_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return ctx_r12.hideTooltip();\n    })(\"keyup.enter\", function MessageReactionsComponent_div_1_li_4_div_1_Template_div_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return ctx_r14.hideTooltip();\n    })(\"mouseenter\", function MessageReactionsComponent_div_1_li_4_div_1_Template_div_mouseenter_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const reactionType_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.showTooltip($event, reactionType_r8);\n    })(\"mouseleave\", function MessageReactionsComponent_div_1_li_4_div_1_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return ctx_r17.hideTooltip();\n    });\n    i0.ɵɵelement(1, \"stream-avatar\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r11 = ctx.ngIf;\n    const reactionType_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵattributeInterpolate1(\"data-testid\", \"\", reactionType_r8, \"-last-user\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵattributeInterpolate1(\"data-testid\", \"\", reactionType_r8, \"-avatar\");\n    i0.ɵɵproperty(\"imageUrl\", user_r11.image)(\"name\", user_r11.name || user_r11.id)(\"size\", 20);\n  }\n}\n\nfunction MessageReactionsComponent_div_1_li_4_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const reactionType_r8 = i0.ɵɵnextContext().$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵattributeInterpolate1(\"data-testid\", \"\", reactionType_r8, \"-reaction-count\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r10.messageReactionCounts[reactionType_r8], \" \");\n  }\n}\n\nfunction MessageReactionsComponent_div_1_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵlistener(\"click\", function MessageReactionsComponent_div_1_li_4_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const reactionType_r8 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.react(reactionType_r8);\n    })(\"keyup.enter\", function MessageReactionsComponent_div_1_li_4_Template_li_keyup_enter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const reactionType_r8 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.react(reactionType_r8);\n    });\n    i0.ɵɵtemplate(1, MessageReactionsComponent_div_1_li_4_div_1_Template, 2, 5, \"div\", 17);\n    i0.ɵɵelementStart(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, MessageReactionsComponent_div_1_li_4_span_4_Template, 2, 2, \"span\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const reactionType_r8 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.getLatestUserByReaction(reactionType_r8));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.getEmojiByReaction(reactionType_r8), \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.messageReactionCounts[reactionType_r8] && ctx_r6.messageReactionCounts[reactionType_r8] > 0);\n  }\n}\n\nfunction MessageReactionsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7, 8);\n    i0.ɵɵtemplate(2, MessageReactionsComponent_div_1_div_2_Template, 5, 8, \"div\", 9);\n    i0.ɵɵelementStart(3, \"ul\", 10);\n    i0.ɵɵtemplate(4, MessageReactionsComponent_div_1_li_4_Template, 5, 3, \"li\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tooltipText);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.reactionOptions)(\"ngForTrackBy\", ctx_r1.trackByMessageReaction);\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 5);\n    i0.ɵɵlistener(\"load\", function AttachmentListComponent_ng_container_0_img_2_Template_img_load_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.imageLoaded();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", attachment_r1.img_url || attachment_r1.thumb_url || attachment_r1.image_url, i0.ɵɵsanitizeUrl)(\"alt\", attachment_r1 == null ? null : attachment_r1.fallback);\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_3_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.getFileSize(attachment_r1));\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelement(1, \"stream-icon\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"a\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AttachmentListComponent_ng_container_0_div_3_span_5_Template, 2, 1, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"size\", 30);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", attachment_r1.asset_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", attachment_r1.title, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.hasFileSize(attachment_r1));\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", attachment_r1.image_url || attachment_r1.thumb_url);\n    i0.ɵɵpropertyInterpolate(\"src\", attachment_r1.image_url || attachment_r1.thumb_url, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_4_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", attachment_r1.title, \" \");\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_4_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", attachment_r1.text, \" \");\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_4_a_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"href\", attachment_r1.title_link || attachment_r1.og_scrape_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.trimUrl(attachment_r1.title_link || attachment_r1.og_scrape_url), \" \");\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AttachmentListComponent_ng_container_0_div_4_div_1_Template, 2, 2, \"div\", 12);\n    i0.ɵɵelementStart(2, \"div\", 13);\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵtemplate(4, AttachmentListComponent_ng_container_0_div_4_div_4_Template, 2, 1, \"div\", 15);\n    i0.ɵɵtemplate(5, AttachmentListComponent_ng_container_0_div_4_div_5_Template, 2, 1, \"div\", 16);\n    i0.ɵɵtemplate(6, AttachmentListComponent_ng_container_0_div_4_a_6_Template, 2, 2, \"a\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵclassMapInterpolate1(\"str-chat__message-attachment-card str-chat__message-attachment-card--\", attachment_r1.type, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachment_r1.image_url || attachment_r1.thumb_url);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", attachment_r1.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachment_r1.text);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", attachment_r1.title_link || attachment_r1.og_scrape_url);\n  }\n}\n\nfunction AttachmentListComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵtemplate(2, AttachmentListComponent_ng_container_0_img_2_Template, 1, 2, \"img\", 2);\n    i0.ɵɵtemplate(3, AttachmentListComponent_ng_container_0_div_3_Template, 6, 4, \"div\", 3);\n    i0.ɵɵtemplate(4, AttachmentListComponent_ng_container_0_div_4_Template, 7, 7, \"div\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const attachment_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"str-chat__message-attachment str-chat__message-attachment--\", attachment_r1.type, \"\");\n    i0.ɵɵclassProp(\"str-chat__message-attachment--card\", ctx_r0.isCard(attachment_r1))(\"str-chat-angular__message-attachment-file-single\", ctx_r0.isFile(attachment_r1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isImage(attachment_r1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFile(attachment_r1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCard(attachment_r1));\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(4);\n\n    const _r2 = i0.ɵɵreference(4);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_ng_container_0_ng_container_1_Template, 1, 0, \"ng-container\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(5);\n\n    const _r4 = i0.ɵɵreference(6);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r4);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_ng_container_0_Template, 2, 1, \"ng-container\", 2);\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(4);\n\n    const _r6 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"ngIf\", ctx_r21.isMessageDeliveredAndRead && ctx_r21.canReceiveReadEvents)(\"ngIfElse\", _r6);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_container_1_Template, 2, 1, \"ng-container\", 2);\n    i0.ɵɵtemplate(2, MessageComponent_ng_container_2_ng_container_1_ng_container_1_ng_template_2_Template, 1, 2, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r20 = i0.ɵɵreference(3);\n\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r13.message == null ? null : ctx_r13.message.status) === \"sending\")(\"ngIfElse\", _r20);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_4_stream_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"stream-icon\", 25);\n    i0.ɵɵlistener(\"keyup.enter\", function MessageComponent_ng_container_2_ng_container_1_div_4_stream_icon_3_Template_stream_icon_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext(4);\n      return ctx_r27.isActionBoxOpen = !ctx_r27.isActionBoxOpen;\n    })(\"click\", function MessageComponent_ng_container_2_ng_container_1_div_4_stream_icon_3_Template_stream_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r29 = i0.ɵɵnextContext(4);\n      return ctx_r29.isActionBoxOpen = !ctx_r29.isActionBoxOpen;\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_4_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵlistener(\"click\", function MessageComponent_ng_container_2_ng_container_1_div_4_div_4_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext(4);\n      return ctx_r30.isReactionSelectorOpen = !ctx_r30.isReactionSelectorOpen;\n    })(\"keyup.enter\", function MessageComponent_ng_container_2_ng_container_1_div_4_div_4_Template_div_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r32 = i0.ɵɵnextContext(4);\n      return ctx_r32.isReactionSelectorOpen = !ctx_r32.isReactionSelectorOpen;\n    });\n    i0.ɵɵelement(1, \"stream-icon\", 27);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelementStart(2, \"stream-message-actions-box\", 22);\n    i0.ɵɵlistener(\"displayedActionsCount\", function MessageComponent_ng_container_2_ng_container_1_div_4_Template_stream_message_actions_box_displayedActionsCount_2_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(3);\n      return ctx_r33.visibleMessageActionsCount = $event;\n    })(\"isEditing\", function MessageComponent_ng_container_2_ng_container_1_div_4_Template_stream_message_actions_box_isEditing_2_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      ctx_r35.isEditing = $event;\n      return ctx_r35.isActionBoxOpen = !ctx_r35.isEditing;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, MessageComponent_ng_container_2_ng_container_1_div_4_stream_icon_3_Template, 1, 0, \"stream-icon\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, MessageComponent_ng_container_2_ng_container_1_div_4_div_4_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"str-chat-angular__message-simple__actions__action--options--editing\", ctx_r14.isEditing);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isOpen\", ctx_r14.isActionBoxOpen)(\"isMine\", ctx_r14.isSentByCurrentUser)(\"enabledActions\", ctx_r14.enabledMessageActions)(\"message\", ctx_r14.message)(\"messageInputTemplate\", ctx_r14.messageInputTemplate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.visibleMessageActionsCount > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.areReactionsEnabled && ctx_r14.canReactToMessage);\n  }\n}\n\nconst _c13 = function () {\n  return {};\n};\n\nconst _c14 = function () {\n  return [];\n};\n\nfunction MessageComponent_ng_container_2_ng_container_1_stream_message_reactions_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"stream-message-reactions\", 28);\n    i0.ɵɵlistener(\"isSelectorOpenChange\", function MessageComponent_ng_container_2_ng_container_1_stream_message_reactions_5_Template_stream_message_reactions_isSelectorOpenChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r36 = i0.ɵɵnextContext(3);\n      return ctx_r36.isReactionSelectorOpen = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"messageReactionCounts\", (ctx_r15.message == null ? null : ctx_r15.message.reaction_counts) || i0.ɵɵpureFunction0(5, _c13))(\"latestReactions\", (ctx_r15.message == null ? null : ctx_r15.message.latest_reactions) || i0.ɵɵpureFunction0(6, _c14))(\"isSelectorOpen\", ctx_r15.isReactionSelectorOpen)(\"messageId\", ctx_r15.message == null ? null : ctx_r15.message.id)(\"ownReactions\", (ctx_r15.message == null ? null : ctx_r15.message.own_reactions) || i0.ɵɵpureFunction0(7, _c14));\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_stream_attachment_list_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"stream-attachment-list\", 29);\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"attachments\", ctx_r16.message.attachments);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"streamChat.Error \\xB7 Unsent\"), \" \");\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r39 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, (ctx_r39.message == null ? null : ctx_r39.message.errorStatusCode) === 403 ? \"streamChat.Message Failed \\xB7 Unauthorized\" : \"streamChat.Message Failed \\xB7 Click to try again\"), \" \");\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 40);\n  }\n\n  if (rf & 2) {\n    const part_r41 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"innerHTML\", part_r41.content, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c15 = function (a0) {\n  return {\n    user: a0\n  };\n};\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_container_0_ng_container_1_Template, 1, 0, \"ng-container\", 42);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const part_r41 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r46 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r46.mentionTemplate)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c15, part_r41.user));\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const part_r41 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(part_r41.content);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_container_0_Template, 2, 4, \"ng-container\", 2);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_ng_template_1_Template, 2, 1, \"ng-template\", null, 41, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r47 = i0.ɵɵreference(2);\n\n    const ctx_r44 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r44.mentionTemplate)(\"ngIfElse\", _r47);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_span_1_Template, 1, 1, \"span\", 38);\n    i0.ɵɵtemplate(2, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_ng_template_2_Template, 3, 2, \"ng-template\", null, 39, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const part_r41 = ctx.$implicit;\n\n    const _r43 = i0.ɵɵreference(3);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", part_r41.type === \"text\")(\"ngIfElse\", _r43);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r53 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelementStart(1, \"div\", 31);\n    i0.ɵɵlistener(\"click\", function MessageComponent_ng_container_2_ng_container_1_div_7_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r52 = i0.ɵɵnextContext(3);\n      return (ctx_r52.message == null ? null : ctx_r52.message.status) === \"failed\" && (ctx_r52.message == null ? null : ctx_r52.message.errorStatusCode) !== 403 ? ctx_r52.resendMessage() : undefined;\n    })(\"keyup.enter\", function MessageComponent_ng_container_2_ng_container_1_div_7_Template_div_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r54 = i0.ɵɵnextContext(3);\n      return (ctx_r54.message == null ? null : ctx_r54.message.status) === \"failed\" && (ctx_r54.message == null ? null : ctx_r54.message.errorStatusCode) !== 403 ? ctx_r54.resendMessage() : undefined;\n    });\n    i0.ɵɵtemplate(2, MessageComponent_ng_container_2_ng_container_1_div_7_div_2_Template, 3, 3, \"div\", 32);\n    i0.ɵɵtemplate(3, MessageComponent_ng_container_2_ng_container_1_div_7_div_3_Template, 3, 3, \"div\", 33);\n    i0.ɵɵelementStart(4, \"div\", 34);\n    i0.ɵɵlistener(\"click\", function MessageComponent_ng_container_2_ng_container_1_div_7_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r55 = i0.ɵɵnextContext(3);\n      return ctx_r55.textClicked();\n    })(\"keyup.enter\", function MessageComponent_ng_container_2_ng_container_1_div_7_Template_div_keyup_enter_4_listener() {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r56 = i0.ɵɵnextContext(3);\n      return ctx_r56.textClicked();\n    });\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtemplate(6, MessageComponent_ng_container_2_ng_container_1_div_7_ng_container_6_Template, 4, 2, \"ng-container\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"str-chat__message-light-text-inner--has-attachment\", ctx_r17.hasAttachment);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r17.message == null ? null : ctx_r17.message.type) === \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r17.message == null ? null : ctx_r17.message.status) === \"failed\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r17.messageTextParts);\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r18.message == null ? null : ctx_r18.message.user == null ? null : ctx_r18.message.user.name) ? ctx_r18.message == null ? null : ctx_r18.message.user == null ? null : ctx_r18.message.user.name : ctx_r18.message == null ? null : ctx_r18.message.user == null ? null : ctx_r18.message.user.id, \" \");\n  }\n}\n\nfunction MessageComponent_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_ng_container_1_Template, 4, 2, \"ng-container\", 8);\n    i0.ɵɵelement(2, \"stream-avatar\", 9);\n    i0.ɵɵelementStart(3, \"div\", 10);\n    i0.ɵɵtemplate(4, MessageComponent_ng_container_2_ng_container_1_div_4_Template, 5, 9, \"div\", 11);\n    i0.ɵɵtemplate(5, MessageComponent_ng_container_2_ng_container_1_stream_message_reactions_5_Template, 1, 8, \"stream-message-reactions\", 12);\n    i0.ɵɵtemplate(6, MessageComponent_ng_container_2_ng_container_1_stream_attachment_list_6_Template, 1, 1, \"stream-attachment-list\", 13);\n    i0.ɵɵtemplate(7, MessageComponent_ng_container_2_ng_container_1_div_7_Template, 7, 5, \"div\", 14);\n    i0.ɵɵelementStart(8, \"div\", 15);\n    i0.ɵɵtemplate(9, MessageComponent_ng_container_2_ng_container_1_span_9_Template, 2, 1, \"span\", 16);\n    i0.ɵɵelementStart(10, \"span\", 17);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.isSentByCurrentUser && (ctx_r12.isLastSentMessage && (ctx_r12.message == null ? null : ctx_r12.message.status) === \"received\" || (ctx_r12.message == null ? null : ctx_r12.message.status) === \"sending\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"imageUrl\", ctx_r12.message == null ? null : ctx_r12.message.user == null ? null : ctx_r12.message.user.image)(\"name\", (ctx_r12.message == null ? null : ctx_r12.message.user == null ? null : ctx_r12.message.user.name) || (ctx_r12.message == null ? null : ctx_r12.message.user == null ? null : ctx_r12.message.user.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.areOptionsVisible);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.areReactionsEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.hasAttachment);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.message == null ? null : ctx_r12.message.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.isSentByCurrentUser);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.parsedDate, \" \");\n  }\n}\n\nfunction MessageComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageComponent_ng_container_2_ng_container_1_Template, 12, 9, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n\n    const _r10 = i0.ɵɵreference(12);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.message == null ? null : ctx_r1.message.type) !== \"system\")(\"ngIfElse\", _r10);\n  }\n}\n\nfunction MessageComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 44);\n    i0.ɵɵelementStart(1, \"div\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"stream-loading-indicator\", 46);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Sending...\"), \" \");\n  }\n}\n\nfunction MessageComponent_ng_template_5_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r57 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r57.message == null ? null : ctx_r57.message.readBy).length, \" \");\n  }\n}\n\nfunction MessageComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 47);\n    i0.ɵɵelementStart(1, \"div\", 48);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"stream-avatar\", 49);\n    i0.ɵɵtemplate(4, MessageComponent_ng_template_5_span_4_Template, 2, 1, \"span\", 50);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.readByText, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"size\", 15)(\"imageUrl\", ctx_r5.lastReadUser == null ? null : ctx_r5.lastReadUser.image)(\"name\", (ctx_r5.lastReadUser == null ? null : ctx_r5.lastReadUser.name) || (ctx_r5.lastReadUser == null ? null : ctx_r5.lastReadUser.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isReadByMultipleUsers);\n  }\n}\n\nfunction MessageComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 52);\n    i0.ɵɵelementStart(1, \"div\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"stream-icon\", 53);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"streamChat.Delivered\"), \" \");\n  }\n}\n\nfunction MessageComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵelementStart(1, \"div\", 55);\n    i0.ɵɵtext(2, \" streamChat.This message was deleted... \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MessageComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵelementStart(1, \"div\", 57);\n    i0.ɵɵelement(2, \"div\", 58);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 59);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r11.message == null ? null : ctx_r11.message.text);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.parsedDate, \" \");\n  }\n}\n\nconst _c16 = [\"input\"];\n\nfunction AutocompleteTextareaComponent_ng_template_3_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c17 = function (a0) {\n  return {\n    item: a0\n  };\n};\n\nfunction AutocompleteTextareaComponent_ng_template_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, AutocompleteTextareaComponent_ng_template_3_div_1_ng_container_1_Template, 1, 0, \"ng-container\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().item;\n    const ctx_r6 = i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(6);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r6.mentionAutocompleteItemTemplate || _r3)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c17, item_r5));\n  }\n}\n\nfunction AutocompleteTextareaComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, AutocompleteTextareaComponent_ng_template_3_div_1_Template, 2, 4, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.item;\n    i0.ɵɵproperty(\"ngSwitch\", item_r5.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"mention\");\n  }\n}\n\nfunction AutocompleteTextareaComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"stream-avatar\", 9);\n    i0.ɵɵelementStart(2, \"span\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r9 = ctx.item;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"size\", 20)(\"imageUrl\", item_r9.image || (item_r9.user == null ? null : item_r9.user.image))(\"name\", item_r9.autocompleteLabel);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r9.autocompleteLabel);\n  }\n}\n\nconst _c18 = [\"scrollContainer\"];\n\nfunction MessageListComponent_li_4_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c19 = function (a0, a1, a2, a3, a4, a5, a6) {\n  return {\n    message: a0,\n    areReactionsEnabled: a1,\n    canReactToMessage: a2,\n    lastSentMessageId: a3,\n    canReceiveReadEvents: a4,\n    messageInputTemplate: a5,\n    mentionTemplate: a6\n  };\n};\n\nfunction MessageListComponent_li_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessageListComponent_li_4_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const message_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r5.messageTemplate)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction7(2, _c19, message_r3, ctx_r5.areReactionsEnabled, ctx_r5.canReactToMessage, !!(ctx_r5.lastSentMessageId && (message_r3 == null ? null : message_r3.id) === ctx_r5.lastSentMessageId), ctx_r5.canReceiveReadEvents, ctx_r5.messageInputTemplate, ctx_r5.mentionTemplate));\n  }\n}\n\nfunction MessageListComponent_li_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"stream-message\", 11);\n  }\n\n  if (rf & 2) {\n    const message_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"message\", message_r3)(\"areReactionsEnabled\", ctx_r7.areReactionsEnabled)(\"canReactToMessage\", ctx_r7.canReactToMessage)(\"isLastSentMessage\", !!(ctx_r7.lastSentMessageId && (message_r3 == null ? null : message_r3.id) === ctx_r7.lastSentMessageId))(\"enabledMessageActions\", ctx_r7.enabledMessageActions)(\"canReceiveReadEvents\", ctx_r7.canReceiveReadEvents)(\"messageInputTemplate\", ctx_r7.messageInputTemplate)(\"mentionTemplate\", ctx_r7.mentionTemplate);\n  }\n}\n\nfunction MessageListComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7);\n    i0.ɵɵtemplate(1, MessageListComponent_li_4_ng_container_1_Template, 2, 10, \"ng-container\", 8);\n    i0.ɵɵtemplate(2, MessageListComponent_li_4_ng_template_2_Template, 1, 8, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n\n    const _r6 = i0.ɵɵreference(3);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"str-chat__li str-chat__li--\", ctx_r1.groupStyles[i_r4], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.messageTemplate)(\"ngIfElse\", _r6);\n  }\n}\n\nfunction MessageListComponent_button_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.unreadMessageCount, \" \");\n  }\n}\n\nfunction MessageListComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"keyup.enter\", function MessageListComponent_button_7_Template_button_keyup_enter_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.scrollToBottom();\n    })(\"click\", function MessageListComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.scrollToBottom();\n    });\n    i0.ɵɵtemplate(1, MessageListComponent_button_7_div_1_Template, 2, 1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.unreadMessageCount > 0);\n  }\n}\n\nconst version = '2.6.2';\n\nclass NotificationService {\n  constructor() {\n    this.notificationsSubject = new BehaviorSubject([]);\n    this.notifications$ = this.notificationsSubject.asObservable();\n  }\n\n  addTemporaryNotification(text, type = 'error', timeout = 5000, translateParams) {\n    this.addNotification(text, type, translateParams);\n    const id = setTimeout(() => this.removeNotification(text), timeout);\n    return () => {\n      clearTimeout(id);\n      this.removeNotification(text);\n    };\n  }\n\n  addPermanentNotification(text, type = 'error', translateParams) {\n    this.addNotification(text, type, translateParams);\n    return () => this.removeNotification(text);\n  }\n\n  addNotification(text, type, translateParams) {\n    this.notificationsSubject.next([...this.notificationsSubject.getValue(), {\n      text,\n      type,\n      translateParams\n    }]);\n  }\n\n  removeNotification(text) {\n    const notifications = this.notificationsSubject.getValue();\n    const index = notifications.findIndex(n => n.text === text);\n\n    if (index === -1) {\n      return;\n    }\n\n    notifications.splice(index, 1);\n    this.notificationsSubject.next([...notifications]);\n  }\n\n}\n\nNotificationService.ɵfac = function NotificationService_Factory(t) {\n  return new (t || NotificationService)();\n};\n\nNotificationService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NotificationService,\n  factory: NotificationService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass ChatClientService {\n  constructor(ngZone, notificationService) {\n    this.ngZone = ngZone;\n    this.notificationService = notificationService;\n    this.notificationSubject = new ReplaySubject(1);\n    this.connectionStateSubject = new ReplaySubject(1);\n    this.appSettingsSubject = new BehaviorSubject(undefined);\n    this.notification$ = this.notificationSubject.asObservable();\n    this.connectionState$ = this.connectionStateSubject.asObservable();\n    this.appSettings$ = this.appSettingsSubject.asObservable();\n  }\n\n  init(apiKey, userId, userToken) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.chatClient = StreamChat.getInstance(apiKey);\n      yield this.ngZone.runOutsideAngular(() => __awaiter(this, void 0, void 0, function* () {\n        yield this.chatClient.connectUser({\n          id: userId\n        }, userToken);\n        this.chatClient.setUserAgent(`stream-chat-angular-${version}-${this.chatClient.getUserAgent()}`);\n        this.chatClient.getAppSettings;\n      }));\n      this.appSettingsSubject.next(undefined);\n      this.chatClient.on(e => {\n        this.notificationSubject.next({\n          eventType: e.type,\n          event: e\n        });\n      });\n      let removeNotification;\n      this.chatClient.on('connection.changed', e => {\n        this.ngZone.run(() => {\n          const isOnline = e.online;\n\n          if (isOnline) {\n            if (removeNotification) {\n              removeNotification();\n            }\n          } else {\n            removeNotification = this.notificationService.addPermanentNotification('streamChat.Connection failure, reconnecting now...');\n          }\n\n          this.connectionStateSubject.next(isOnline ? 'online' : 'offline');\n        });\n      });\n    });\n  }\n\n  getAppSettings() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.appSettingsSubject.getValue()) {\n        return;\n      }\n\n      const settings = yield this.chatClient.getAppSettings();\n      this.appSettingsSubject.next(settings.app || {});\n    });\n  }\n\n  flagMessage(messageId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.chatClient.flagMessage(messageId);\n    });\n  }\n\n  autocompleteUsers(searchTerm) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!searchTerm) {\n        return [];\n      }\n\n      const result = yield this.chatClient.queryUsers({\n        $or: [{\n          id: {\n            $autocomplete: searchTerm\n          }\n        }, {\n          name: {\n            $autocomplete: searchTerm\n          }\n        }],\n        id: {\n          $ne: this.chatClient.userID\n        }\n      });\n      return result.users;\n    });\n  }\n\n}\n\nChatClientService.ɵfac = function ChatClientService_Factory(t) {\n  return new (t || ChatClientService)(i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(NotificationService));\n};\n\nChatClientService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ChatClientService,\n  factory: ChatClientService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChatClientService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i0.NgZone\n    }, {\n      type: NotificationService\n    }];\n  }, null);\n})();\n\nconst createMessagePreview = (user, text, attachments, mentionedUsers) => {\n  const clientSideId = `${user.id}-${v4()}`;\n  return {\n    __html: text,\n    created_at: new Date(),\n    html: text,\n    id: clientSideId,\n    reactions: [],\n    status: 'sending',\n    text,\n    type: 'regular',\n    user,\n    attachments,\n    mentioned_users: mentionedUsers\n  };\n};\n\nconst getReadBy = (message, channel) => {\n  const readBy = [];\n  Object.keys(channel.state.read).forEach(key => {\n    var _a;\n\n    if (channel.state.read[key].last_read.getTime() >= message.updated_at.getTime() && ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id) !== key) {\n      readBy.push(channel.state.read[key].user);\n    }\n  });\n  return readBy;\n};\n\nclass ChannelService {\n  constructor(chatClientService, ngZone) {\n    this.chatClientService = chatClientService;\n    this.ngZone = ngZone;\n    this.channelsSubject = new BehaviorSubject(undefined);\n    this.activeChannelSubject = new BehaviorSubject(undefined);\n    this.activeChannelMessagesSubject = new BehaviorSubject([]);\n    this.hasMoreChannelsSubject = new ReplaySubject(1);\n    this.activeChannelSubscriptions = [];\n\n    this.channelListSetter = channels => {\n      this.channelsSubject.next(channels);\n    };\n\n    this.messageListSetter = messages => {\n      this.activeChannelMessagesSubject.next(messages);\n    };\n\n    this.channels$ = this.channelsSubject.asObservable();\n    this.activeChannel$ = this.activeChannelSubject.asObservable();\n    this.activeChannelMessages$ = this.activeChannelMessagesSubject.pipe(map(messages => {\n      const channel = this.activeChannelSubject.getValue();\n      return messages.map(message => {\n        if (this.isStreamMessage(message) && this.isFormatMessageResponse(message)) {\n          return message;\n        } else if (this.isFormatMessageResponse(message)) {\n          return Object.assign(Object.assign({}, message), {\n            readBy: getReadBy(message, channel)\n          });\n        } else {\n          const formatMessage = this.formatMessage(message);\n          return Object.assign(Object.assign({}, formatMessage), {\n            readBy: getReadBy(formatMessage, channel)\n          });\n        }\n      });\n    }));\n    this.hasMoreChannels$ = this.hasMoreChannelsSubject.asObservable();\n  }\n\n  setAsActiveChannel(channel) {\n    const prevActiveChannel = this.activeChannelSubject.getValue();\n    this.stopWatchForActiveChannelEvents(prevActiveChannel);\n    this.watchForActiveChannelEvents(channel);\n    this.activeChannelSubject.next(channel);\n    channel.state.messages.forEach(m => {\n      m.readBy = getReadBy(m, channel);\n    });\n\n    if (this.canSendReadEvents) {\n      void channel.markRead();\n    }\n\n    this.activeChannelMessagesSubject.next([...channel.state.messages]);\n  }\n\n  loadMoreMessages() {\n    var _a, _b, _c, _d;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      const activeChnannel = this.activeChannelSubject.getValue();\n      const lastMessageId = (_a = this.activeChannelMessagesSubject.getValue()[0]) === null || _a === void 0 ? void 0 : _a.id;\n      yield activeChnannel === null || activeChnannel === void 0 ? void 0 : activeChnannel.query({\n        messages: {\n          limit: 25,\n          id_lt: lastMessageId\n        },\n        members: {\n          limit: 0\n        },\n        watchers: {\n          limit: 0\n        }\n      });\n\n      if (((_b = activeChnannel === null || activeChnannel === void 0 ? void 0 : activeChnannel.data) === null || _b === void 0 ? void 0 : _b.id) === ((_d = (_c = this.activeChannelSubject.getValue()) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.id)) {\n        this.activeChannelMessagesSubject.next([...activeChnannel.state.messages]);\n      }\n    });\n  }\n\n  init(filters, sort, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.filters = filters;\n      this.options = options || {\n        offset: 0,\n        limit: 25,\n        state: true,\n        presence: true,\n        watch: true,\n        message_limit: 25\n      };\n      this.sort = sort || {\n        last_message_at: -1,\n        updated_at: -1\n      };\n      yield this.queryChannels();\n      this.chatClientService.notification$.subscribe(notification => void this.handleNotification(notification));\n    });\n  }\n\n  loadMoreChannels() {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.options.offset = this.channels.length;\n      yield this.queryChannels();\n    });\n  }\n\n  addReaction(messageId, reactionType) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      yield (_a = this.activeChannelSubject.getValue()) === null || _a === void 0 ? void 0 : _a.sendReaction(messageId, {\n        type: reactionType\n      });\n    });\n  }\n\n  removeReaction(messageId, reactionType) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      yield (_a = this.activeChannelSubject.getValue()) === null || _a === void 0 ? void 0 : _a.deleteReaction(messageId, reactionType);\n    });\n  }\n\n  sendMessage(text, attachments = [], mentionedUsers = []) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const preview = createMessagePreview(this.chatClientService.chatClient.user, text, attachments, mentionedUsers);\n      const channel = this.activeChannelSubject.getValue();\n      preview.readBy = [];\n      channel.state.addMessageSorted(preview, true);\n      yield this.sendMessageRequest(preview);\n    });\n  }\n\n  resendMessage(message) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const channel = this.activeChannelSubject.getValue();\n      channel.state.addMessageSorted(Object.assign(Object.assign({}, message), {\n        errorStatusCode: undefined,\n        status: 'sending'\n      }), true);\n      yield this.sendMessageRequest(message);\n    });\n  }\n\n  updateMessage(message) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.chatClientService.chatClient.updateMessage(message);\n    });\n  }\n\n  deleteMessage(message) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.chatClientService.chatClient.deleteMessage(message.id);\n    });\n  }\n\n  uploadAttachments(uploads) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const result = [];\n      const channel = this.activeChannelSubject.getValue();\n      const uploadResults = yield Promise.allSettled(uploads.map(upload => upload.type === 'image' ? channel.sendImage(upload.file) : channel.sendFile(upload.file)));\n      uploadResults.forEach((uploadResult, i) => {\n        const file = uploads[i].file;\n        const type = uploads[i].type;\n\n        if (uploadResult.status === 'fulfilled') {\n          result.push({\n            file,\n            type,\n            state: 'success',\n            url: uploadResult.value.file\n          });\n        } else {\n          result.push({\n            file,\n            type,\n            state: 'error'\n          });\n        }\n      });\n      return result;\n    });\n  }\n\n  deleteAttachment(attachmentUpload) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const channel = this.activeChannelSubject.getValue();\n      yield attachmentUpload.type === 'image' ? channel.deleteImage(attachmentUpload.url) : channel.deleteFile(attachmentUpload.url);\n    });\n  }\n\n  autocompleteMembers(searchTerm) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const activeChannel = this.activeChannelSubject.getValue();\n\n      if (!activeChannel) {\n        return [];\n      }\n\n      if (Object.keys(activeChannel.state.members).length <= 100) {\n        return Object.values(activeChannel.state.members).filter(m => {\n          var _a;\n\n          return ((_a = m.user) === null || _a === void 0 ? void 0 : _a.id) !== this.chatClientService.chatClient.userID;\n        });\n      } else {\n        if (!searchTerm) {\n          return [];\n        }\n\n        const result = yield activeChannel.queryMembers({\n          name: {\n            $autocomplete: searchTerm\n          },\n          id: {\n            $ne: this.chatClientService.chatClient.userID\n          }\n        });\n        return Object.values(result.members);\n      }\n    });\n  }\n\n  sendMessageRequest(preview) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      const channel = this.activeChannelSubject.getValue();\n      this.activeChannelMessagesSubject.next([...channel.state.messages]);\n\n      try {\n        yield channel.sendMessage({\n          text: preview.text,\n          attachments: preview.attachments,\n          mentioned_users: (_a = preview.mentioned_users) === null || _a === void 0 ? void 0 : _a.map(u => u.id),\n          id: preview.id\n        });\n      } catch (error) {\n        const stringError = JSON.stringify(error);\n        const parsedError = stringError ? JSON.parse(stringError) : {};\n        channel.state.addMessageSorted(Object.assign(Object.assign({}, preview), {\n          errorStatusCode: parsedError.status || undefined,\n          status: 'failed'\n        }), true);\n        this.activeChannelMessagesSubject.next([...channel.state.messages]);\n      }\n    });\n  }\n\n  handleNotification(notification) {\n    return __awaiter(this, void 0, void 0, function* () {\n      switch (notification.eventType) {\n        case 'notification.message_new':\n          {\n            yield this.ngZone.run(() => __awaiter(this, void 0, void 0, function* () {\n              if (this.customNewMessageNotificationHandler) {\n                this.customNewMessageNotificationHandler(notification, this.channelListSetter);\n              } else {\n                yield this.handleNewMessageNotification(notification);\n              }\n            }));\n            break;\n          }\n\n        case 'notification.added_to_channel':\n          {\n            yield this.ngZone.run(() => __awaiter(this, void 0, void 0, function* () {\n              if (this.customAddedToChannelNotificationHandler) {\n                this.customAddedToChannelNotificationHandler(notification, this.channelListSetter);\n              } else {\n                yield this.handleAddedToChannelNotification(notification);\n              }\n            }));\n            break;\n          }\n\n        case 'notification.removed_from_channel':\n          {\n            this.ngZone.run(() => {\n              if (this.customRemovedFromChannelNotificationHandler) {\n                this.customRemovedFromChannelNotificationHandler(notification, this.channelListSetter);\n              } else {\n                this.handleRemovedFromChannelNotification(notification);\n              }\n            });\n          }\n      }\n    });\n  }\n\n  handleRemovedFromChannelNotification(notification) {\n    const channelIdToBeRemoved = notification.event.channel.cid;\n    this.removeFromChannelList(channelIdToBeRemoved);\n  }\n\n  handleNewMessageNotification(notification) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.addChannelFromNotification(notification);\n    });\n  }\n\n  handleAddedToChannelNotification(notification) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.addChannelFromNotification(notification);\n    });\n  }\n\n  addChannelFromNotification(notification) {\n    var _a, _b;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      const channel = this.chatClientService.chatClient.channel((_a = notification.event.channel) === null || _a === void 0 ? void 0 : _a.type, (_b = notification.event.channel) === null || _b === void 0 ? void 0 : _b.id);\n      yield channel.watch();\n      this.watchForChannelEvents(channel);\n      this.channelsSubject.next([channel, ...(this.channelsSubject.getValue() || [])]);\n    });\n  }\n\n  removeFromChannelList(cid) {\n    const channels = this.channels.filter(c => c.cid !== cid);\n\n    if (channels.length < this.channels.length) {\n      this.channelsSubject.next(channels);\n\n      if (this.activeChannelSubject.getValue().cid === cid) {\n        this.setAsActiveChannel(channels[0]);\n      }\n    }\n  }\n\n  watchForActiveChannelEvents(channel) {\n    this.activeChannelSubscriptions.push(channel.on('message.new', () => {\n      this.ngZone.run(() => {\n        this.activeChannelMessagesSubject.next([...channel.state.messages]);\n        this.activeChannel$.pipe(first()).subscribe(c => {\n          if (this.canSendReadEvents) {\n            void (c === null || c === void 0 ? void 0 : c.markRead());\n          }\n        });\n      });\n    }));\n    this.activeChannelSubscriptions.push(channel.on('message.updated', event => this.messageUpdated(event)));\n    this.activeChannelSubscriptions.push(channel.on('message.deleted', event => this.messageUpdated(event)));\n    this.activeChannelSubscriptions.push(channel.on('reaction.new', e => this.messageReactionEventReceived(e)));\n    this.activeChannelSubscriptions.push(channel.on('reaction.deleted', e => this.messageReactionEventReceived(e)));\n    this.activeChannelSubscriptions.push(channel.on('reaction.updated', e => this.messageReactionEventReceived(e)));\n    this.activeChannelSubscriptions.push(channel.on('message.read', e => {\n      this.ngZone.run(() => {\n        let latestMessage;\n        this.activeChannelMessages$.pipe(first()).subscribe(messages => {\n          latestMessage = messages[messages.length - 1];\n        });\n\n        if (!latestMessage || !e.user) {\n          return;\n        }\n\n        latestMessage.readBy = getReadBy(latestMessage, channel);\n        this.activeChannelMessagesSubject.next(this.activeChannelMessagesSubject.getValue());\n      });\n    }));\n  }\n\n  messageUpdated(event) {\n    this.ngZone.run(() => {\n      const messages = this.activeChannelMessagesSubject.getValue();\n      const messageIndex = messages.findIndex(m => {\n        var _a;\n\n        return m.id === ((_a = event.message) === null || _a === void 0 ? void 0 : _a.id);\n      });\n\n      if (messageIndex !== -1 && event.message) {\n        messages[messageIndex] = event.message;\n        this.activeChannelMessagesSubject.next([...messages]);\n      }\n    });\n  }\n\n  messageReactionEventReceived(e) {\n    this.ngZone.run(() => {\n      var _a, _b, _c, _d;\n\n      let messages;\n      this.activeChannelMessages$.pipe(first()).subscribe(m => messages = m);\n      const message = messages.find(m => {\n        var _a;\n\n        return m.id === ((_a = e === null || e === void 0 ? void 0 : e.message) === null || _a === void 0 ? void 0 : _a.id);\n      });\n\n      if (!message) {\n        return;\n      }\n\n      message.reaction_counts = Object.assign({}, (_a = e.message) === null || _a === void 0 ? void 0 : _a.reaction_counts);\n      message.reaction_scores = Object.assign({}, (_b = e.message) === null || _b === void 0 ? void 0 : _b.reaction_scores);\n      message.latest_reactions = [...(((_c = e.message) === null || _c === void 0 ? void 0 : _c.latest_reactions) || [])];\n      message.own_reactions = [...(((_d = e.message) === null || _d === void 0 ? void 0 : _d.own_reactions) || [])];\n      this.activeChannelMessagesSubject.next([...messages]);\n    });\n  }\n\n  formatMessage(message) {\n    return Object.assign(Object.assign({}, message), {\n      // parse the date..\n      pinned_at: message.pinned_at ? new Date(message.pinned_at) : null,\n      created_at: message.created_at ? new Date(message.created_at) : new Date(),\n      updated_at: message.updated_at ? new Date(message.updated_at) : new Date(),\n      status: message.status || 'received'\n    });\n  }\n\n  isStreamMessage(message) {\n    return !!message.readBy;\n  }\n\n  isFormatMessageResponse(message) {\n    return message.created_at instanceof Date;\n  }\n\n  stopWatchForActiveChannelEvents(channel) {\n    if (!channel) {\n      return;\n    }\n\n    this.activeChannelSubscriptions.forEach(s => s.unsubscribe());\n    this.activeChannelSubscriptions = [];\n  }\n\n  queryChannels() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const channels = yield this.chatClientService.chatClient.queryChannels(this.filters, this.sort, this.options);\n        channels.forEach(c => this.watchForChannelEvents(c));\n        const prevChannels = this.channelsSubject.getValue() || [];\n        this.channelsSubject.next([...prevChannels, ...channels]);\n\n        if (channels.length > 0 && !this.activeChannelSubject.getValue()) {\n          this.setAsActiveChannel(channels[0]);\n        }\n\n        this.hasMoreChannelsSubject.next(channels.length >= this.options.limit);\n      } catch (error) {\n        this.channelsSubject.error(error);\n      }\n    });\n  }\n\n  watchForChannelEvents(channel) {\n    channel.on(event => {\n      switch (event.type) {\n        case 'message.new':\n          {\n            this.ngZone.run(() => {\n              if (this.customNewMessageHandler) {\n                this.customNewMessageHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleNewMessage(event, channel);\n              }\n            });\n            break;\n          }\n\n        case 'channel.hidden':\n          {\n            this.ngZone.run(() => {\n              if (this.customChannelHiddenHandler) {\n                this.customChannelHiddenHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleChannelHidden(event);\n              }\n            });\n            break;\n          }\n\n        case 'channel.deleted':\n          {\n            this.ngZone.run(() => {\n              if (this.customChannelDeletedHandler) {\n                this.customChannelDeletedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleChannelDeleted(event);\n              }\n            });\n            break;\n          }\n\n        case 'channel.visible':\n          {\n            this.ngZone.run(() => {\n              if (this.customChannelVisibleHandler) {\n                this.customChannelVisibleHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleChannelVisible(event, channel);\n              }\n            });\n            break;\n          }\n\n        case 'channel.updated':\n          {\n            this.ngZone.run(() => {\n              if (this.customChannelUpdatedHandler) {\n                this.customChannelUpdatedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleChannelUpdate(event);\n              }\n            });\n            break;\n          }\n\n        case 'channel.truncated':\n          {\n            this.ngZone.run(() => {\n              if (this.customChannelTruncatedHandler) {\n                this.customChannelTruncatedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n              } else {\n                this.handleChannelTruncate(event);\n              }\n            });\n            break;\n          }\n      }\n    });\n  }\n\n  handleNewMessage(_, channel) {\n    const channelIndex = this.channels.findIndex(c => c.cid === channel.cid);\n    this.channels.splice(channelIndex, 1);\n    this.channelsSubject.next([channel, ...this.channels]);\n  }\n\n  handleChannelHidden(event) {\n    this.removeFromChannelList(event.channel.cid);\n  }\n\n  handleChannelDeleted(event) {\n    this.removeFromChannelList(event.channel.cid);\n  }\n\n  handleChannelVisible(event, channel) {\n    if (!this.channels.find(c => c.cid === event.cid)) {\n      this.ngZone.run(() => this.channelsSubject.next([...this.channels, channel]));\n    }\n  }\n\n  handleChannelUpdate(event) {\n    var _a, _b;\n\n    const channelIndex = this.channels.findIndex(c => c.cid === event.channel.cid);\n\n    if (channelIndex !== -1) {\n      this.channels[channelIndex].data = event.channel;\n      this.channelsSubject.next([...this.channels]);\n\n      if (((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid) === ((_b = this.activeChannelSubject.getValue()) === null || _b === void 0 ? void 0 : _b.cid)) {\n        const channel = this.activeChannelSubject.getValue();\n        channel.data = event.channel;\n        this.activeChannelSubject.next(channel);\n      }\n    }\n  }\n\n  handleChannelTruncate(event) {\n    var _a, _b;\n\n    const channelIndex = this.channels.findIndex(c => c.cid === event.channel.cid);\n\n    if (channelIndex !== -1) {\n      this.channels[channelIndex].state.messages = [];\n      this.channelsSubject.next([...this.channels]);\n\n      if (((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid) === ((_b = this.activeChannelSubject.getValue()) === null || _b === void 0 ? void 0 : _b.cid)) {\n        const channel = this.activeChannelSubject.getValue();\n        channel.state.messages = [];\n        this.activeChannelSubject.next(channel);\n        this.activeChannelMessagesSubject.next([]);\n      }\n    }\n  }\n\n  get channels() {\n    return this.channelsSubject.getValue() || [];\n  }\n\n  get canSendReadEvents() {\n    var _a;\n\n    const channel = this.activeChannelSubject.getValue();\n\n    if (!channel) {\n      return false;\n    }\n\n    const capabilites = (_a = channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n    return capabilites.indexOf('read-events') !== -1;\n  }\n\n}\n\nChannelService.ɵfac = function ChannelService_Factory(t) {\n  return new (t || ChannelService)(i0.ɵɵinject(ChatClientService), i0.ɵɵinject(i0.NgZone));\n};\n\nChannelService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ChannelService,\n  factory: ChannelService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: ChatClientService\n    }, {\n      type: i0.NgZone\n    }];\n  }, null);\n})();\n\nclass ThemeService {\n  constructor() {\n    this.theme$ = new BehaviorSubject('light');\n    this.defaultDarkModeVariables = {\n      '--bg-gradient-end': '#101214',\n      '--bg-gradient-start': '#070a0d',\n      '--black': '#ffffff',\n      '--blue-alice': '#00193d',\n      '--border': '#141924',\n      '--button-background': '#ffffff',\n      '--button-text': '#005fff',\n      '--grey': '#7a7a7a',\n      '--grey-gainsboro': '#2d2f2f',\n      '--grey-whisper': '#1c1e22',\n      '--modal-shadow': '#000000',\n      '--overlay': '#00000066',\n      '--overlay-dark': '#ffffffcc',\n      '--shadow-icon': '#00000080',\n      '--targetedMessageBackground': '#302d22',\n      '--transparent': 'transparent',\n      '--white': '#101418',\n      '--white-smoke': '#13151b',\n      '--white-snow': '#070a0d'\n    };\n    this.theme$.subscribe(theme => {\n      const darkVariables = this.customDarkThemeVariables ? Object.assign(Object.assign({}, this.defaultDarkModeVariables), this.customDarkThemeVariables) : this.defaultDarkModeVariables;\n      const lightVariables = this.customLightThemeVariables ? this.customLightThemeVariables : {};\n\n      if (theme === 'dark') {\n        this.deleteVariables(lightVariables);\n        this.setVariables(darkVariables);\n      } else {\n        this.deleteVariables(darkVariables);\n        this.setVariables(lightVariables);\n      }\n    });\n  }\n\n  get customLightThemeVariables() {\n    return this._customLightThemeVariables;\n  }\n\n  set customLightThemeVariables(variables) {\n    const prevVariables = this.customLightThemeVariables;\n    this.deleteVariables(prevVariables);\n    this._customLightThemeVariables = variables;\n  }\n\n  get customDarkThemeVariables() {\n    return this._customDarkThemeVariables;\n  }\n\n  set customDarkThemeVariables(variables) {\n    const prevVariables = this.customDarkThemeVariables;\n    this.deleteVariables(prevVariables);\n    this._customDarkThemeVariables = variables;\n  }\n\n  deleteVariables(variables) {\n    if (!variables) {\n      return;\n    }\n\n    Object.keys(variables).forEach(key => document.documentElement.style.setProperty(key, null));\n  }\n\n  setVariables(variables) {\n    if (!variables) {\n      return;\n    }\n\n    Object.keys(variables).forEach(key => document.documentElement.style.setProperty(key, variables[key]));\n  }\n\n}\n\nThemeService.ɵfac = function ThemeService_Factory(t) {\n  return new (t || ThemeService)();\n};\n\nThemeService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ThemeService,\n  factory: ThemeService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ThemeService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nconst isImageFile = file => {\n  // photoshop files begin with 'image/'\n  return file.type.startsWith('image/') && !file.type.endsWith('.photoshop');\n};\n\nconst isImageAttachment = attachment => {\n  return attachment.type === 'image' && !attachment.title_link && !attachment.og_scrape_url;\n};\n\nclass AttachmentService {\n  constructor(channelService, notificationService) {\n    this.channelService = channelService;\n    this.notificationService = notificationService;\n    this.attachmentUploadInProgressCounterSubject = new BehaviorSubject(0);\n    this.attachmentUploadsSubject = new BehaviorSubject([]);\n    this.attachmentUploadInProgressCounter$ = this.attachmentUploadInProgressCounterSubject.asObservable();\n    this.attachmentUploads$ = this.attachmentUploadsSubject.asObservable();\n  }\n\n  resetAttachmentUploads() {\n    this.attachmentUploadsSubject.next([]);\n  }\n\n  filesSelected(fileList) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!fileList) {\n        return;\n      }\n\n      const imageFiles = [];\n      const dataFiles = [];\n      Array.from(fileList).forEach(file => {\n        if (isImageFile(file)) {\n          imageFiles.push(file);\n        } else {\n          dataFiles.push(file);\n        }\n      });\n      imageFiles.forEach(f => this.createPreview(f));\n      const newUploads = [...imageFiles.map(file => ({\n        file,\n        state: 'uploading',\n        type: 'image'\n      })), ...dataFiles.map(file => ({\n        file,\n        state: 'uploading',\n        type: 'file'\n      }))];\n      this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(), ...newUploads]);\n      yield this.uploadAttachments(newUploads);\n    });\n  }\n\n  retryAttachmentUpload(file) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const attachmentUploads = this.attachmentUploadsSubject.getValue();\n      const upload = attachmentUploads.find(u => u.file === file);\n\n      if (!upload) {\n        return;\n      }\n\n      upload.state = 'uploading';\n      this.attachmentUploadsSubject.next([...attachmentUploads]);\n      yield this.uploadAttachments([upload]);\n    });\n  }\n\n  deleteAttachment(upload) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const attachmentUploads = this.attachmentUploadsSubject.getValue();\n\n      if (upload.state === 'success') {\n        try {\n          yield this.channelService.deleteAttachment(upload);\n          attachmentUploads.splice(attachmentUploads.indexOf(upload), 1);\n        } catch (error) {\n          this.notificationService.addTemporaryNotification('streamChat.Error deleting attachment');\n        }\n      } else {\n        attachmentUploads.splice(attachmentUploads.indexOf(upload), 1);\n      }\n\n      this.attachmentUploadsSubject.next([...attachmentUploads]);\n    });\n  }\n\n  mapToAttachments() {\n    const attachmentUploads = this.attachmentUploadsSubject.getValue();\n    return attachmentUploads.filter(r => r.state === 'success').map(r => {\n      var _a, _b, _c;\n\n      const attachment = {\n        type: r.type\n      };\n\n      if (r.type === 'image') {\n        attachment.fallback = (_a = r.file) === null || _a === void 0 ? void 0 : _a.name;\n        attachment.image_url = r.url;\n      } else {\n        attachment.asset_url = r.url;\n        attachment.title = (_b = r.file) === null || _b === void 0 ? void 0 : _b.name;\n        attachment.file_size = (_c = r.file) === null || _c === void 0 ? void 0 : _c.size;\n      }\n\n      return attachment;\n    });\n  }\n\n  createFromAttachments(attachments) {\n    const attachmentUploads = [];\n    attachments.forEach(attachment => {\n      if (isImageAttachment(attachment)) {\n        attachmentUploads.push({\n          url: attachment.img_url || attachment.thumb_url || attachment.image_url,\n          state: 'success',\n          type: 'image',\n          file: {\n            name: attachment.fallback\n          }\n        });\n      } else if (attachment.type === 'file') {\n        attachmentUploads.push({\n          url: attachment.asset_url,\n          state: 'success',\n          file: {\n            name: attachment.title,\n            size: attachment.file_size\n          },\n          type: 'file'\n        });\n      }\n    });\n\n    if (attachmentUploads.length > 0) {\n      this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(), ...attachmentUploads]);\n    }\n  }\n\n  createPreview(file) {\n    const reader = new FileReader();\n\n    reader.onload = event => {\n      var _a;\n\n      const attachmentUploads = this.attachmentUploadsSubject.getValue();\n      const upload = attachmentUploads.find(upload => upload.file === file);\n\n      if (!upload) {\n        return;\n      }\n\n      upload.previewUri = ((_a = event.target) === null || _a === void 0 ? void 0 : _a.result) || undefined;\n      this.attachmentUploadsSubject.next([...attachmentUploads]);\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  uploadAttachments(uploads) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const attachmentUploads = this.attachmentUploadsSubject.getValue();\n      this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue() + 1);\n      const result = yield this.channelService.uploadAttachments(uploads);\n      result.forEach(r => {\n        const upload = attachmentUploads.find(upload => upload.file === r.file);\n\n        if (!upload) {\n          if (r.url) {\n            void this.channelService.deleteAttachment(r);\n          }\n\n          return;\n        }\n\n        upload.state = r.state;\n        upload.url = r.url;\n\n        if (upload.state === 'error') {\n          this.notificationService.addTemporaryNotification(upload.type === 'image' ? 'streamChat.Error uploading image' : 'streamChat.Error uploading file');\n        }\n      });\n      this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue() - 1);\n      this.attachmentUploadsSubject.next([...attachmentUploads]);\n    });\n  }\n\n}\n\nAttachmentService.ɵfac = function AttachmentService_Factory(t) {\n  return new (t || AttachmentService)(i0.ɵɵinject(ChannelService), i0.ɵɵinject(NotificationService));\n};\n\nAttachmentService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: AttachmentService,\n  factory: AttachmentService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AttachmentService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: NotificationService\n    }];\n  }, null);\n})();\n\nconst en = {\n  streamChat: {\n    '1 reply': '1 reply',\n    'Attach files': 'Attach files',\n    Cancel: 'Cancel',\n    'Channel Missing': 'Channel Missing',\n    Close: 'Close',\n    'Close emoji picker': 'Close emoji picker',\n    'Commands matching': 'Commands matching',\n    'Connection failure, reconnecting now...': 'Connection failure, reconnecting now...',\n    Delete: 'Delete',\n    Delivered: 'Delivered',\n    'Edit Message': 'Edit Message',\n    'Edit message request failed': 'Edit message request failed',\n    'Emoji matching': 'Emoji matching',\n    'Empty message...': 'Empty message...',\n    'Error adding flag': 'Error adding flag',\n    'Error connecting to chat, refresh the page to try again.': 'Error connecting to chat, refresh the page to try again.',\n    'Error deleting message': 'Error deleting message',\n    'Error muting a user ...': 'Error muting a user ...',\n    'Error pinning message': 'Error pinning message',\n    'Error removing message pin': 'Error removing message pin',\n    'Error unmuting a user ...': 'Error unmuting a user ...',\n    'Error uploading file': 'Error uploading file',\n    'Error uploading image': 'Error uploading image',\n    'Error deleting attachment': 'Error deleting attachment',\n    'Error · Unsent': 'Error · Unsent',\n    'Error: {{ errorMessage }}': 'Error: {{ errorMessage }}',\n    Flag: 'Flag',\n    'Message Failed': 'Message Failed',\n    'Message Failed · Unauthorized': 'Message Failed · Unauthorized',\n    'Message deleted': 'Message deleted',\n    'Message has been successfully flagged': 'Message has been successfully flagged',\n    'Message pinned': 'Message pinned',\n    Mute: 'Mute',\n    New: 'New',\n    'New Messages!': 'New Messages!',\n    'No results found': 'No results found',\n    'Nothing yet...': 'Nothing yet...',\n    'Only visible to you': 'Only visible to you',\n    'Open emoji picker': 'Open emoji picker',\n    'People matching': 'People matching',\n    'Pick your emoji': 'Pick your emoji',\n    Pin: 'Pin',\n    'Pinned by': 'Pinned by',\n    Reply: 'Reply',\n    'Reply to Message': 'Reply to Message',\n    Search: 'Search',\n    'Searching...': 'Searching...',\n    Send: 'Send',\n    'Send message request failed': 'Send message request failed',\n    'Sending...': 'Sending...',\n    'Slow Mode ON': 'Slow Mode ON',\n    'Start of a new thread': 'Start of a new thread',\n    'This message was deleted...': 'This message was deleted...',\n    Thread: 'Thread',\n    'Type your message': 'Type your message',\n    Unmute: 'Unmute',\n    Unpin: 'Unpin',\n    'Wait until all attachments have uploaded': 'Wait until all attachments have uploaded',\n    'You have no channels currently': 'You have no channels currently',\n    \"You've reached the maximum number of files\": \"You've reached the maximum number of files\",\n    live: 'live',\n    'this content could not be displayed': 'this content could not be displayed',\n    '{{ commaSeparatedUsers }} and {{ moreCount }} more': '{{ commaSeparatedUsers }} and {{ moreCount }} more',\n    '{{ commaSeparatedUsers }}, and {{ lastUser }}': '{{ commaSeparatedUsers }}, and {{ lastUser }}',\n    '{{ firstUser }} and {{ secondUser }}': '{{ firstUser }} and {{ secondUser }}',\n    '{{ imageCount }} more': '{{ imageCount }} more',\n    '{{ memberCount }} members': '{{ memberCount }} members',\n    '{{ replyCount }} replies': '{{ replyCount }} replies',\n    '{{ user }} has been muted': '{{ user }} has been muted',\n    '{{ user }} has been unmuted': '{{ user }} has been unmuted',\n    '{{ watcherCount }} online': '{{ watcherCount }} online',\n    '🏙 Attachment...': '🏙 Attachment...',\n    'Connection error': 'Connection error',\n    'Load more': 'Load more',\n    failed: 'failed',\n    retry: 'retry',\n    test: 'success',\n    'Sending links is not allowed in this conversation': 'Sending links is not allowed in this conversation',\n    \"You can't send messages in this channel\": \"You can't send messages in this channel\",\n    'Unsupported file type: {{type}}': 'Unsupported file type: {{type}}'\n  }\n};\n\nclass StreamI18nService {\n  constructor(translteService) {\n    this.translteService = translteService;\n  }\n\n  setTranslation(lang = 'en', overrides) {\n    if (!this.translteService.defaultLang) {\n      this.translteService.defaultLang = lang;\n    }\n\n    this.translteService.setTranslation(lang, {\n      streamChat: Object.assign(Object.assign({}, en.streamChat), overrides)\n    }, true);\n  }\n\n}\n\nStreamI18nService.ɵfac = function StreamI18nService_Factory(t) {\n  return new (t || StreamI18nService)(i0.ɵɵinject(i10.TranslateService));\n};\n\nStreamI18nService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: StreamI18nService,\n  factory: StreamI18nService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StreamI18nService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i10.TranslateService\n    }];\n  }, null);\n})();\n\nclass AvatarComponent {\n  constructor() {\n    this.size = 32;\n    this.isLoaded = false;\n    this.isError = false;\n  }\n\n  get initials() {\n    var _a;\n\n    return (((_a = this.name) === null || _a === void 0 ? void 0 : _a.toString()) || '').charAt(0);\n  }\n\n}\n\nAvatarComponent.ɵfac = function AvatarComponent_Factory(t) {\n  return new (t || AvatarComponent)();\n};\n\nAvatarComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AvatarComponent,\n  selectors: [[\"stream-avatar\"]],\n  inputs: {\n    name: \"name\",\n    imageUrl: \"imageUrl\",\n    size: \"size\"\n  },\n  decls: 4,\n  vars: 11,\n  consts: [[1, \"str-chat__avatar\", \"str-chat__avatar--circle\", 3, \"title\"], [\"data-testid\", \"avatar-img\", 3, \"class\", \"src\", \"alt\", \"style\", \"load\", \"error\", 4, \"ngIf\", \"ngIfElse\"], [\"fallback\", \"\"], [\"data-testid\", \"avatar-img\", 3, \"src\", \"alt\", \"load\", \"error\"], [\"data-testid\", \"fallback-img\", 1, \"str-chat__avatar-fallback\"]],\n  template: function AvatarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, AvatarComponent_img_1_Template, 1, 11, \"img\", 1);\n      i0.ɵɵtemplate(2, AvatarComponent_ng_template_2_Template, 2, 1, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(3);\n\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction5(5, _c1, ctx.size + \"px\", ctx.size / 2 + \"px\", ctx.size + \"px\", ctx.size + \"px\", ctx.size + \"px\"));\n      i0.ɵɵpropertyInterpolate(\"title\", ctx.name);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageUrl && !ctx.isError)(\"ngIfElse\", _r1);\n    }\n  },\n  directives: [i3.NgIf],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AvatarComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-avatar',\n      templateUrl: './avatar.component.html',\n      styleUrls: ['./avatar.component.scss']\n    }]\n  }], function () {\n    return [];\n  }, {\n    name: [{\n      type: Input\n    }],\n    imageUrl: [{\n      type: Input\n    }],\n    size: [{\n      type: Input\n    }]\n  });\n})();\n\nclass IconComponent {\n  constructor() {}\n\n}\n\nIconComponent.ɵfac = function IconComponent_Factory(t) {\n  return new (t || IconComponent)();\n};\n\nIconComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: IconComponent,\n  selectors: [[\"stream-icon\"]],\n  inputs: {\n    icon: \"icon\",\n    size: \"size\"\n  },\n  decls: 9,\n  vars: 9,\n  consts: [[\"data-testid\", \"action-icon\", \"height\", \"4\", \"viewBox\", \"0 0 11 4\", \"width\", \"11\", \"xmlns\", \"http://www.w3.org/2000/svg\", 4, \"ngIf\"], [\"height\", \"16\", \"width\", \"16\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"data-testid\", \"delivered-icon\", 4, \"ngIf\"], [\"height\", \"12\", \"viewBox\", \"0 0 12 12\", \"width\", \"12\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"data-testid\", \"reaction-icon\", 4, \"ngIf\"], [\"data-testid\", \"connection-error\", \"width\", \"78px\", \"height\", \"78px\", \"viewBox\", \"0 0 78 78\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", 4, \"ngIf\"], [\"data-testid\", \"send\", \"height\", \"17\", \"viewBox\", \"0 0 18 17\", \"width\", \"18\", \"xmlns\", \"http://www.w3.org/2000/svg\", 4, \"ngIf\"], [\"data-testid\", \"file-upload\", \"height\", \"14\", \"width\", \"14\", \"xmlns\", \"http://www.w3.org/2000/svg\", 4, \"ngIf\"], [\"data-testid\", \"retry\", \"width\", \"22\", \"height\", \"20\", \"viewBox\", \"0 0 22 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 4, \"ngIf\"], [\"data-testid\", \"close\", \"width\", \"28\", \"height\", \"28\", \"viewBox\", \"0 0 28 28\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", 4, \"ngIf\"], [\"data-testid\", \"file\", \"className\", \"rfu-file-icon--small fa-file-fallback\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 384 512\", 4, \"ngIf\"], [\"data-testid\", \"action-icon\", \"height\", \"4\", \"viewBox\", \"0 0 11 4\", \"width\", \"11\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\", \"fillRule\", \"nonzero\"], [\"height\", \"16\", \"width\", \"16\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"data-testid\", \"delivered-icon\"], [\"d\", \"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\", \"fill\", \"#006CFF\", \"fillRule\", \"evenodd\"], [\"height\", \"12\", \"viewBox\", \"0 0 12 12\", \"width\", \"12\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"data-testid\", \"reaction-icon\"], [\"clipRule\", \"evenodd\", \"fillRule\", \"evenodd\"], [\"d\", \"M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z\"], [\"d\", \"M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z\"], [\"data-testid\", \"connection-error\", \"width\", \"78px\", \"height\", \"78px\", \"viewBox\", \"0 0 78 78\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\"], [\"id\", \"Interactions\", \"stroke\", \"none\", \"stroke-width\", \"1\", \"fill\", \"none\", \"fill-rule\", \"evenodd\"], [\"id\", \"Connection-Error-_-Connectivity\", \"transform\", \"translate(-270.000000, -30.000000)\", \"fill\", \"#CF1F25\"], [\"id\", \"109-network-connection\", \"transform\", \"translate(270.000000, 30.000000)\"], [\"d\", \"M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z\", \"id\", \"Combined-Shape\"], [\"data-testid\", \"send\", \"height\", \"17\", \"viewBox\", \"0 0 18 17\", \"width\", \"18\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"translate\", \"\"], [\"d\", \"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\", \"fill\", \"#006cff\", \"fillRule\", \"evenodd\"], [\"data-testid\", \"file-upload\", \"height\", \"14\", \"width\", \"14\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\", \"fillRule\", \"nonzero\"], [\"data-testid\", \"retry\", \"width\", \"22\", \"height\", \"20\", \"viewBox\", \"0 0 22 20\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M20 5.535V2a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h3.638l-2.975-2.653a8 8 0 1 0 1.884 8.32 1 1 0 1 1 1.886.666A10 10 0 1 1 5.175 1.245c3.901-2.15 8.754-1.462 11.88 1.667L20 5.535z\", \"fill\", \"#FFF\", \"fill-rule\", \"nonzero\"], [\"data-testid\", \"close\", \"width\", \"28\", \"height\", \"28\", \"viewBox\", \"0 0 28 28\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\"], [\"d\", \"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\", \"id\", \"b\"], [\"x\", \"-30%\", \"y\", \"-30%\", \"width\", \"160%\", \"height\", \"160%\", \"filterUnits\", \"objectBoundingBox\", \"id\", \"a\"], [\"in\", \"SourceAlpha\", \"result\", \"shadowOffsetOuter1\"], [\"stdDeviation\", \"2\", \"in\", \"shadowOffsetOuter1\", \"result\", \"shadowBlurOuter1\"], [\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\", \"in\", \"shadowBlurOuter1\"], [\"transform\", \"translate(-451 -1)\", \"fill-rule\", \"nonzero\", \"fill\", \"none\"], [\"fill\", \"#000\", \"filter\", \"url(#a)\", 0, \"xlink\", \"href\", \"#b\"], [\"fill\", \"#FFF\", \"fill-rule\", \"evenodd\", 0, \"xlink\", \"href\", \"#b\"], [\"data-testid\", \"file\", \"className\", \"rfu-file-icon--small fa-file-fallback\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 384 512\"], [\"d\", \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z\", \"fill\", \"#414D54\"]],\n  template: function IconComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, IconComponent__svg_svg_0_Template, 2, 0, \"svg\", 0);\n      i0.ɵɵtemplate(1, IconComponent__svg_svg_1_Template, 2, 0, \"svg\", 1);\n      i0.ɵɵtemplate(2, IconComponent__svg_svg_2_Template, 4, 0, \"svg\", 2);\n      i0.ɵɵtemplate(3, IconComponent__svg_svg_3_Template, 9, 0, \"svg\", 3);\n      i0.ɵɵtemplate(4, IconComponent__svg_svg_4_Template, 4, 0, \"svg\", 4);\n      i0.ɵɵtemplate(5, IconComponent__svg_svg_5_Template, 4, 0, \"svg\", 5);\n      i0.ɵɵtemplate(6, IconComponent__svg_svg_6_Template, 2, 0, \"svg\", 6);\n      i0.ɵɵtemplate(7, IconComponent__svg_svg_7_Template, 10, 0, \"svg\", 7);\n      i0.ɵɵtemplate(8, IconComponent__svg_svg_8_Template, 2, 2, \"svg\", 8);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"action-icon\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"delivered-icon\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"reaction-icon\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"connection-error\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"send\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"file-upload\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"retry\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"close\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.icon === \"file\");\n    }\n  },\n  directives: [i3.NgIf, i10.TranslateDirective],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(IconComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-icon',\n      templateUrl: './icon.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [];\n  }, {\n    icon: [{\n      type: Input\n    }],\n    size: [{\n      type: Input\n    }]\n  });\n})();\n\nclass LoadingIndicatorComponent {\n  constructor() {\n    this.size = 15;\n    this.color = '#006CFF';\n  }\n\n}\n\nLoadingIndicatorComponent.ɵfac = function LoadingIndicatorComponent_Factory(t) {\n  return new (t || LoadingIndicatorComponent)();\n};\n\nLoadingIndicatorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LoadingIndicatorComponent,\n  selectors: [[\"stream-loading-indicator\"]],\n  inputs: {\n    size: \"size\",\n    color: \"color\"\n  },\n  decls: 7,\n  vars: 6,\n  consts: [[1, \"str-chat__loading-indicator\"], [\"viewBox\", \"0 0 30 30\", \"data-testid\", \"loading-indicator\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"id\", \"a\", \"x1\", \"50%\", \"x2\", \"50%\", \"y1\", \"0%\", \"y2\", \"100%\"], [\"offset\", \"0%\", \"stop-color\", \"#FFF\", \"stop-opacity\", \"0\"], [\"data-testid\", \"stop-color\", \"offset\", \"100%\", \"stop-opacity\", \"1\", 3, \"ngStyle\"], [\"d\", \"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\", \"fill\", \"url(#a)\", \"fillRule\", \"evenodd\"]],\n  template: function LoadingIndicatorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(1, \"svg\", 1);\n      i0.ɵɵelementStart(2, \"defs\");\n      i0.ɵɵelementStart(3, \"linearGradient\", 2);\n      i0.ɵɵelement(4, \"stop\", 3);\n      i0.ɵɵelement(5, \"stop\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"path\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"height\", ctx.size)(\"width\", ctx.size);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(4, _c2, ctx.color));\n      i0.ɵɵattribute(\"stop-color\", ctx.color);\n    }\n  },\n  directives: [i3.NgStyle],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LoadingIndicatorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-loading-indicator',\n      templateUrl: './loading-indicator.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [];\n  }, {\n    size: [{\n      type: Input\n    }],\n    color: [{\n      type: Input\n    }]\n  });\n})();\n\nconst textareaInjectionToken = new InjectionToken('textareaInjectionToken');\n\nclass TextareaDirective {\n  constructor(viewContainerRef) {\n    this.viewContainerRef = viewContainerRef;\n    this.value = '';\n    this.valueChange = new EventEmitter();\n    this.send = new EventEmitter();\n    this.userMentions = new EventEmitter();\n    this.subscriptions = [];\n    this.unpropagatedChanges = [];\n  }\n\n  ngOnChanges(changes) {\n    this.unpropagatedChanges.push(changes);\n\n    if (!this.componentRef) {\n      return;\n    }\n\n    if (changes.componentRef) {\n      this.subscriptions.forEach(s => s.unsubscribe());\n\n      if (this.componentRef) {\n        this.subscriptions.push(this.componentRef.instance.valueChange.subscribe(value => this.valueChange.next(value)));\n        this.subscriptions.push(this.componentRef.instance.send.subscribe(value => this.send.next(value)));\n\n        if (this.componentRef.instance.userMentions) {\n          this.subscriptions.push(this.componentRef.instance.userMentions.subscribe(value => this.userMentions.next(value)));\n        }\n\n        this.componentRef.instance.areMentionsEnabled = this.areMentionsEnabled;\n        this.componentRef.instance.mentionAutocompleteItemTemplate = this.mentionAutocompleteItemTemplate;\n        this.componentRef.instance.mentionScope = this.mentionScope;\n        this.componentRef.instance.value = this.value;\n      }\n    }\n\n    if (changes.areMentionsEnabled) {\n      this.componentRef.instance.areMentionsEnabled = this.areMentionsEnabled;\n    }\n\n    if (changes.mentionAutocompleteItemTemplate) {\n      this.componentRef.instance.mentionAutocompleteItemTemplate = this.mentionAutocompleteItemTemplate;\n    }\n\n    if (changes.mentionScope) {\n      this.componentRef.instance.mentionScope = this.mentionScope;\n    }\n\n    if (changes.value) {\n      this.componentRef.instance.value = this.value;\n    } // ngOnChanges not called for dynamic components since we don't use template binding\n\n\n    let changesToPropagate = {};\n    this.unpropagatedChanges.forEach(c => changesToPropagate = Object.assign(Object.assign({}, changesToPropagate), c)); // eslint-disable-next-line @angular-eslint/no-lifecycle-call\n\n    this.componentRef.instance.ngOnChanges(changesToPropagate);\n    this.unpropagatedChanges = [];\n  }\n\n}\n\nTextareaDirective.ɵfac = function TextareaDirective_Factory(t) {\n  return new (t || TextareaDirective)(i0.ɵɵdirectiveInject(i0.ViewContainerRef));\n};\n\nTextareaDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TextareaDirective,\n  selectors: [[\"\", \"streamTextarea\", \"\"]],\n  inputs: {\n    componentRef: \"componentRef\",\n    areMentionsEnabled: \"areMentionsEnabled\",\n    mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\",\n    mentionScope: \"mentionScope\",\n    value: \"value\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    send: \"send\",\n    userMentions: \"userMentions\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TextareaDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[streamTextarea]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ViewContainerRef\n    }];\n  }, {\n    componentRef: [{\n      type: Input\n    }],\n    areMentionsEnabled: [{\n      type: Input\n    }],\n    mentionAutocompleteItemTemplate: [{\n      type: Input\n    }],\n    mentionScope: [{\n      type: Input\n    }],\n    value: [{\n      type: Input\n    }],\n    valueChange: [{\n      type: Output\n    }],\n    send: [{\n      type: Output\n    }],\n    userMentions: [{\n      type: Output\n    }]\n  });\n})();\n\nclass MessageInputConfigService {\n  constructor() {\n    this.isFileUploadEnabled = true;\n    this.areMentionsEnabled = true;\n    this.isMultipleFileUploadEnabled = true;\n    this.mentionScope = 'channel';\n  }\n\n}\n\nMessageInputConfigService.ɵfac = function MessageInputConfigService_Factory(t) {\n  return new (t || MessageInputConfigService)();\n};\n\nMessageInputConfigService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: MessageInputConfigService,\n  factory: MessageInputConfigService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageInputConfigService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass AttachmentPreviewListComponent {\n  constructor(attachmentService) {\n    this.attachmentService = attachmentService;\n    this.attachmentUploads$ = this.attachmentService.attachmentUploads$;\n  }\n\n  retryAttachmentUpload(file) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.attachmentService.retryAttachmentUpload(file);\n    });\n  }\n\n  deleteAttachment(upload) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.attachmentService.deleteAttachment(upload);\n    });\n  }\n\n  trackByFile(_, item) {\n    return item.file;\n  }\n\n}\n\nAttachmentPreviewListComponent.ɵfac = function AttachmentPreviewListComponent_Factory(t) {\n  return new (t || AttachmentPreviewListComponent)(i0.ɵɵdirectiveInject(AttachmentService));\n};\n\nAttachmentPreviewListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AttachmentPreviewListComponent,\n  selectors: [[\"stream-attachment-preview-list\"]],\n  decls: 3,\n  vars: 4,\n  consts: [[1, \"rfu-image-previewer\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"rfu-image-previewer__image\", \"data-testclass\", \"attachment-image-preview\", 3, \"rfu-image-previewer__image--loaded\", 4, \"ngIf\"], [\"class\", \"rfu-file-previewer\", \"data-testclass\", \"attachment-file-preview\", 4, \"ngIf\"], [\"data-testclass\", \"attachment-image-preview\", 1, \"rfu-image-previewer__image\"], [\"class\", \"rfu-image-previewer__retry\", \"data-testclass\", \"upload-error\", 3, \"click\", \"keyup.enter\", 4, \"ngIf\"], [1, \"rfu-thumbnail__wrapper\", 2, \"width\", \"100\", \"height\", \"100\"], [1, \"rfu-thumbnail__overlay\"], [\"data-testclass\", \"delete-attachment\", \"role\", \"button\", 1, \"rfu-icon-button\", 3, \"click\", \"keyup.enter\"], [\"icon\", \"close\"], [\"alt\", \"attachmentUpload.file.name\", \"class\", \"rfu-thumbnail__image\", \"data-testclass\", \"attachment-image\", 3, \"src\", 4, \"ngIf\"], [\"data-testclass\", \"loading-indicator\", \"color\", \"rgba(255,255,255,0.7)\", 4, \"ngIf\"], [\"data-testclass\", \"upload-error\", 1, \"rfu-image-previewer__retry\", 3, \"click\", \"keyup.enter\"], [\"icon\", \"retry\"], [\"alt\", \"attachmentUpload.file.name\", \"data-testclass\", \"attachment-image\", 1, \"rfu-thumbnail__image\", 3, \"src\"], [\"data-testclass\", \"loading-indicator\", \"color\", \"rgba(255,255,255,0.7)\"], [\"data-testclass\", \"attachment-file-preview\", 1, \"rfu-file-previewer\"], [1, \"rfu-file-previewer__file\"], [\"icon\", \"file\"], [\"data-testclass\", \"file-download-link\", \"download\", \"\", 3, \"href\", \"click\", \"keyup.enter\"], [4, \"ngIf\"], [\"data-testclass\", \"file-delete\", 1, \"rfu-file-previewer__close-button\", 3, \"click\", \"keyup.enter\"], [\"class\", \"rfu-file-previewer__loading-indicator\", 4, \"ngIf\"], [\"data-testclass\", \"file-upload-retry\", \"translate\", \"\", 1, \"rfu-file-previewer__failed\", 3, \"click\", \"keyup.enter\"], [\"translate\", \"\", 1, \"rfu-file-previewer__retry\", 3, \"click\", \"keyup.enter\"], [1, \"rfu-file-previewer__loading-indicator\"]],\n  template: function AttachmentPreviewListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, AttachmentPreviewListComponent_ng_container_1_Template, 3, 2, \"ng-container\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 2, ctx.attachmentUploads$))(\"ngForTrackBy\", ctx.trackByFile);\n    }\n  },\n  directives: [i3.NgForOf, i3.NgIf, IconComponent, LoadingIndicatorComponent, i10.TranslateDirective],\n  pipes: [i3.AsyncPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AttachmentPreviewListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-attachment-preview-list',\n      templateUrl: './attachment-preview-list.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: AttachmentService\n    }];\n  }, null);\n})();\n\nclass MessageInputComponent {\n  constructor(channelService, notificationService, attachmentService, configService, textareaType, componentFactoryResolver, cdRef, chatClient) {\n    this.channelService = channelService;\n    this.notificationService = notificationService;\n    this.attachmentService = attachmentService;\n    this.configService = configService;\n    this.textareaType = textareaType;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.cdRef = cdRef;\n    this.chatClient = chatClient;\n    this.messageUpdate = new EventEmitter();\n    this.textareaValue = '';\n    this.mentionedUsers = [];\n    this.subscriptions = [];\n    this.isViewInited = false;\n    this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe(counter => {\n      if (counter === 0 && this.hideNotification) {\n        this.hideNotification();\n        this.hideNotification = undefined;\n      }\n    }));\n    this.subscriptions.push(this.channelService.activeChannel$.subscribe(channel => {\n      var _a;\n\n      this.textareaValue = '';\n      this.attachmentService.resetAttachmentUploads();\n      const capabilities = (_a = channel === null || channel === void 0 ? void 0 : channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n\n      if (capabilities) {\n        this.isFileUploadAuthorized = capabilities.indexOf('upload-file') !== -1;\n        this.canSendLinks = capabilities.indexOf('send-links') !== -1;\n        this.canSendMessages = capabilities.indexOf('send-message') !== -1;\n\n        if (this.isViewInited) {\n          this.cdRef.detectChanges();\n          this.initTextarea();\n        }\n      }\n    }));\n    this.subscriptions.push(this.chatClient.appSettings$.subscribe(appSettings => this.appSettings = appSettings));\n    this.attachmentUploads$ = this.attachmentService.attachmentUploads$;\n    this.isFileUploadEnabled = this.configService.isFileUploadEnabled;\n    this.acceptedFileTypes = this.configService.acceptedFileTypes;\n    this.isMultipleFileUploadEnabled = this.configService.isMultipleFileUploadEnabled;\n    this.areMentionsEnabled = this.configService.areMentionsEnabled;\n    this.mentionAutocompleteItemTemplate = this.configService.mentionAutocompleteItemTemplate;\n    this.mentionScope = this.configService.mentionScope;\n  }\n\n  ngAfterViewInit() {\n    this.isViewInited = true;\n    this.initTextarea();\n  }\n\n  ngOnChanges(changes) {\n    if (changes.message) {\n      this.attachmentService.resetAttachmentUploads();\n\n      if (this.isUpdate) {\n        this.attachmentService.createFromAttachments(this.message.attachments || []);\n        this.textareaValue = this.message.text || '';\n      }\n    }\n\n    if (changes.isFileUploadEnabled) {\n      this.configService.isFileUploadEnabled = this.isFileUploadEnabled;\n    }\n\n    if (changes.acceptedFileTypes) {\n      this.configService.acceptedFileTypes = this.acceptedFileTypes;\n    }\n\n    if (changes.isMultipleFileUploadEnabled) {\n      this.configService.isMultipleFileUploadEnabled = this.isMultipleFileUploadEnabled;\n    }\n\n    if (changes.areMentionsEnabled) {\n      this.configService.areMentionsEnabled = this.areMentionsEnabled;\n    }\n\n    if (changes.mentionAutocompleteItemTemplate) {\n      this.configService.mentionAutocompleteItemTemplate = this.mentionAutocompleteItemTemplate;\n    }\n\n    if (changes.mentionScope) {\n      this.configService.mentionScope = this.mentionScope;\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n\n  messageSent() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let attachmentUploadInProgressCounter;\n      this.attachmentService.attachmentUploadInProgressCounter$.pipe(first()).subscribe(counter => attachmentUploadInProgressCounter = counter);\n\n      if (attachmentUploadInProgressCounter > 0) {\n        if (!this.hideNotification) {\n          this.hideNotification = this.notificationService.addPermanentNotification('streamChat.Wait until all attachments have uploaded');\n        }\n\n        return;\n      }\n\n      const attachments = this.attachmentService.mapToAttachments();\n      const text = this.textareaValue;\n\n      if (!text && (!attachments || attachments.length === 0)) {\n        return;\n      }\n\n      if (this.containsLinks && !this.canSendLinks) {\n        this.notificationService.addTemporaryNotification('streamChat.Sending links is not allowed in this conversation');\n        return;\n      }\n\n      if (!this.isUpdate) {\n        this.textareaValue = '';\n      }\n\n      try {\n        yield this.isUpdate ? this.channelService.updateMessage(Object.assign(Object.assign({}, this.message), {\n          text: text,\n          attachments: attachments\n        })) : this.channelService.sendMessage(text, attachments, this.mentionedUsers);\n        this.messageUpdate.emit();\n\n        if (!this.isUpdate) {\n          this.attachmentService.resetAttachmentUploads();\n        }\n      } catch (error) {\n        if (this.isUpdate) {\n          this.notificationService.addTemporaryNotification('streamChat.Edit message request failed');\n        }\n      }\n    });\n  }\n\n  get containsLinks() {\n    return /(?:(?:https?|ftp):\\/\\/)?[\\w/\\-?=%.]+\\.[\\w/\\-&?=%.]+/.test(this.textareaValue);\n  }\n\n  get accept() {\n    var _a;\n\n    return this.acceptedFileTypes ? (_a = this.acceptedFileTypes) === null || _a === void 0 ? void 0 : _a.join(',') : '';\n  }\n\n  filesSelected(fileList) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!(yield this.areAttachemntsValid(fileList))) {\n        return;\n      }\n\n      yield this.attachmentService.filesSelected(fileList);\n      this.clearFileInput();\n    });\n  }\n\n  clearFileInput() {\n    this.fileInput.nativeElement.value = '';\n  }\n\n  get isUpdate() {\n    return !!this.message;\n  }\n\n  initTextarea() {\n    if (!this.canSendMessages || this.textareaRef || !this.textareaAnchor) {\n      return;\n    }\n\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.textareaType);\n    this.textareaRef = this.textareaAnchor.viewContainerRef.createComponent(componentFactory);\n    this.cdRef.detectChanges();\n  }\n\n  areAttachemntsValid(fileList) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!fileList || this.acceptedFileTypes) {\n        return true;\n      }\n\n      if (!this.appSettings) {\n        yield this.chatClient.getAppSettings();\n      }\n\n      let isValid = true;\n      Array.from(fileList).forEach(f => {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11;\n\n        let hasBlockedExtension;\n        let hasBlockedMimeType;\n        let hasNotAllowedExtension;\n        let hasNotAllowedMimeType;\n\n        if (isImageFile(f)) {\n          hasBlockedExtension = !!((_c = (_b = (_a = this.appSettings) === null || _a === void 0 ? void 0 : _a.image_upload_config) === null || _b === void 0 ? void 0 : _b.blocked_file_extensions) === null || _c === void 0 ? void 0 : _c.find(ext => f.name.endsWith(ext)));\n          hasBlockedMimeType = !!((_f = (_e = (_d = this.appSettings) === null || _d === void 0 ? void 0 : _d.image_upload_config) === null || _e === void 0 ? void 0 : _e.blocked_mime_types) === null || _f === void 0 ? void 0 : _f.find(type => f.type === type));\n          hasNotAllowedExtension = !!((_j = (_h = (_g = this.appSettings) === null || _g === void 0 ? void 0 : _g.image_upload_config) === null || _h === void 0 ? void 0 : _h.allowed_file_extensions) === null || _j === void 0 ? void 0 : _j.length) && !((_m = (_l = (_k = this.appSettings) === null || _k === void 0 ? void 0 : _k.image_upload_config) === null || _l === void 0 ? void 0 : _l.allowed_file_extensions) === null || _m === void 0 ? void 0 : _m.find(ext => f.name.endsWith(ext)));\n          hasNotAllowedMimeType = !!((_q = (_p = (_o = this.appSettings) === null || _o === void 0 ? void 0 : _o.image_upload_config) === null || _p === void 0 ? void 0 : _p.allowed_mime_types) === null || _q === void 0 ? void 0 : _q.length) && !((_t = (_s = (_r = this.appSettings) === null || _r === void 0 ? void 0 : _r.image_upload_config) === null || _s === void 0 ? void 0 : _s.allowed_mime_types) === null || _t === void 0 ? void 0 : _t.find(type => f.type === type));\n        } else {\n          hasBlockedExtension = !!((_w = (_v = (_u = this.appSettings) === null || _u === void 0 ? void 0 : _u.file_upload_config) === null || _v === void 0 ? void 0 : _v.blocked_file_extensions) === null || _w === void 0 ? void 0 : _w.find(ext => f.name.endsWith(ext)));\n          hasBlockedMimeType = !!((_z = (_y = (_x = this.appSettings) === null || _x === void 0 ? void 0 : _x.file_upload_config) === null || _y === void 0 ? void 0 : _y.blocked_mime_types) === null || _z === void 0 ? void 0 : _z.find(type => f.type === type));\n          hasNotAllowedExtension = !!((_2 = (_1 = (_0 = this.appSettings) === null || _0 === void 0 ? void 0 : _0.file_upload_config) === null || _1 === void 0 ? void 0 : _1.allowed_file_extensions) === null || _2 === void 0 ? void 0 : _2.length) && !((_5 = (_4 = (_3 = this.appSettings) === null || _3 === void 0 ? void 0 : _3.file_upload_config) === null || _4 === void 0 ? void 0 : _4.allowed_file_extensions) === null || _5 === void 0 ? void 0 : _5.find(ext => f.name.endsWith(ext)));\n          hasNotAllowedMimeType = !!((_8 = (_7 = (_6 = this.appSettings) === null || _6 === void 0 ? void 0 : _6.file_upload_config) === null || _7 === void 0 ? void 0 : _7.allowed_mime_types) === null || _8 === void 0 ? void 0 : _8.length) && !((_11 = (_10 = (_9 = this.appSettings) === null || _9 === void 0 ? void 0 : _9.file_upload_config) === null || _10 === void 0 ? void 0 : _10.allowed_mime_types) === null || _11 === void 0 ? void 0 : _11.find(type => f.type === type));\n        }\n\n        if (hasBlockedExtension || hasBlockedMimeType || hasNotAllowedExtension || hasNotAllowedMimeType) {\n          this.notificationService.addTemporaryNotification('streamChat.Unsupported file type: {{type}}', undefined, undefined, {\n            type: f.type\n          });\n          isValid = false;\n        }\n      });\n      return isValid;\n    });\n  }\n\n}\n\nMessageInputComponent.ɵfac = function MessageInputComponent_Factory(t) {\n  return new (t || MessageInputComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(NotificationService), i0.ɵɵdirectiveInject(AttachmentService), i0.ɵɵdirectiveInject(MessageInputConfigService), i0.ɵɵdirectiveInject(textareaInjectionToken), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(ChatClientService));\n};\n\nMessageInputComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MessageInputComponent,\n  selectors: [[\"stream-message-input\"]],\n  viewQuery: function MessageInputComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c3, 5);\n      i0.ɵɵviewQuery(TextareaDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.textareaAnchor = _t.first);\n    }\n  },\n  inputs: {\n    isFileUploadEnabled: \"isFileUploadEnabled\",\n    areMentionsEnabled: \"areMentionsEnabled\",\n    mentionScope: \"mentionScope\",\n    mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\",\n    acceptedFileTypes: \"acceptedFileTypes\",\n    isMultipleFileUploadEnabled: \"isMultipleFileUploadEnabled\",\n    message: \"message\"\n  },\n  outputs: {\n    messageUpdate: \"messageUpdate\"\n  },\n  features: [i0.ɵɵProvidersFeature([AttachmentService]), i0.ɵɵNgOnChangesFeature],\n  decls: 11,\n  vars: 8,\n  consts: [[1, \"str-chat__input-flat\"], [1, \"str-chat__input-flat-wrapper\"], [1, \"str-chat__input-flat--textarea-wrapper\"], [1, \"rfu-image-previewer-angular-host\"], [1, \"rta\", \"str-chat__textarea\"], [4, \"ngIf\", \"ngIfElse\"], [\"notAllowed\", \"\"], [\"class\", \"str-chat__fileupload-wrapper\", \"data-testid\", \"file-upload-button\", 4, \"ngIf\"], [\"data-testid\", \"send-button\", \"class\", \"str-chat__send-button\", 3, \"click\", \"keyup.enter\", 4, \"ngIf\"], [\"streamTextarea\", \"\", 3, \"value\", \"componentRef\", \"areMentionsEnabled\", \"mentionAutocompleteItemTemplate\", \"mentionScope\", \"valueChange\", \"send\", \"userMentions\"], [\"disabled\", \"\", \"rows\", \"1\", 1, \"rta__textarea\", \"str-chat__textarea__textarea\", 3, \"value\"], [\"data-testid\", \"file-upload-button\", 1, \"str-chat__fileupload-wrapper\"], [1, \"str-chat__tooltip\"], [1, \"rfu-file-upload-button\"], [\"type\", \"file\", \"data-testid\", \"file-input\", 1, \"rfu-file-input\", 3, \"accept\", \"multiple\", \"change\"], [\"fileInput\", \"\"], [1, \"str-chat__input-flat-fileupload\"], [\"icon\", \"file-upload\"], [\"data-testid\", \"send-button\", 1, \"str-chat__send-button\", 3, \"click\", \"keyup.enter\"], [\"icon\", \"send\"]],\n  template: function MessageInputComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵelement(4, \"stream-attachment-preview-list\", 3);\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵtemplate(6, MessageInputComponent_6_Template, 1, 5, undefined, 5);\n      i0.ɵɵtemplate(7, MessageInputComponent_ng_template_7_Template, 2, 3, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, MessageInputComponent_div_9_Template, 10, 5, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, MessageInputComponent_button_10_Template, 2, 0, \"button\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(8);\n\n      i0.ɵɵclassProp(\"str-chat__input-flat-has-attachments\", i0.ɵɵpipeBind1(1, 6, ctx.attachmentUploads$).length > 0);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.canSendMessages)(\"ngIfElse\", _r1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isFileUploadEnabled && ctx.isFileUploadAuthorized && ctx.canSendMessages);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.canSendMessages);\n    }\n  },\n  directives: [AttachmentPreviewListComponent, i3.NgIf, TextareaDirective, IconComponent],\n  pipes: [i3.AsyncPipe, i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageInputComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-message-input',\n      templateUrl: './message-input.component.html',\n      styles: [],\n      providers: [AttachmentService]\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: NotificationService\n    }, {\n      type: AttachmentService\n    }, {\n      type: MessageInputConfigService\n    }, {\n      type: i0.Type,\n      decorators: [{\n        type: Inject,\n        args: [textareaInjectionToken]\n      }]\n    }, {\n      type: i0.ComponentFactoryResolver\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: ChatClientService\n    }];\n  }, {\n    isFileUploadEnabled: [{\n      type: Input\n    }],\n    areMentionsEnabled: [{\n      type: Input\n    }],\n    mentionScope: [{\n      type: Input\n    }],\n    mentionAutocompleteItemTemplate: [{\n      type: Input\n    }],\n    acceptedFileTypes: [{\n      type: Input\n    }],\n    isMultipleFileUploadEnabled: [{\n      type: Input\n    }],\n    message: [{\n      type: Input\n    }],\n    messageUpdate: [{\n      type: Output\n    }],\n    fileInput: [{\n      type: ViewChild,\n      args: ['fileInput']\n    }],\n    textareaAnchor: [{\n      type: ViewChild,\n      args: [TextareaDirective, {\n        static: false\n      }]\n    }]\n  });\n})();\n\nclass ModalComponent {\n  constructor() {\n    this.isOpen = false;\n    this.isOpenChange = new EventEmitter();\n\n    this.watchForEscPress = event => {\n      if (event.key === 'Escape') {\n        this.close();\n      }\n    };\n\n    this.stopWatchForEscPress = () => {\n      window.removeEventListener('keyup', this.watchForEscPress);\n    };\n\n    this.watchForOutsideClicks = event => {\n      var _a;\n\n      if (!((_a = this.content) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n        this.close();\n      }\n    };\n  }\n\n  ngOnChanges(changes) {\n    if (changes.isOpen) {\n      if (this.isOpen) {\n        window.addEventListener('keyup', this.watchForEscPress);\n        setTimeout(() => window.addEventListener('click', this.watchForOutsideClicks), 0);\n      } else {\n        this.stopWatchForOutsideClicks();\n        this.stopWatchForEscPress();\n      }\n    }\n  }\n\n  close() {\n    this.isOpen = false;\n    this.isOpenChange.emit(false);\n    this.stopWatchForOutsideClicks();\n    this.stopWatchForEscPress();\n  }\n\n  stopWatchForOutsideClicks() {\n    window.removeEventListener('click', this.watchForOutsideClicks);\n  }\n\n}\n\nModalComponent.ɵfac = function ModalComponent_Factory(t) {\n  return new (t || ModalComponent)();\n};\n\nModalComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ModalComponent,\n  selectors: [[\"stream-modal\"]],\n  viewQuery: function ModalComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c4, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n    }\n  },\n  inputs: {\n    isOpen: \"isOpen\"\n  },\n  outputs: {\n    isOpenChange: \"isOpenChange\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c5,\n  decls: 7,\n  vars: 3,\n  consts: [[\"data-testid\", \"modal\"], [\"data-testid\", \"close\", \"translate\", \"\", 1, \"str-chat__modal__close-button\", 3, \"click\", \"keyup.enter\"], [\"icon\", \"close\"], [1, \"str-chat__modal__inner\"], [\"content\", \"\"]],\n  template: function ModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵlistener(\"click\", function ModalComponent_Template_div_click_1_listener() {\n        return ctx.close();\n      })(\"keyup.enter\", function ModalComponent_Template_div_keyup_enter_1_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵtext(2, \" streamChat.Close \");\n      i0.ɵɵelement(3, \"stream-icon\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3, 4);\n      i0.ɵɵprojection(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassMapInterpolate1(\"str-chat__modal str-chat__modal--\", ctx.isOpen ? \"open\" : \"close\", \"\");\n    }\n  },\n  directives: [i10.TranslateDirective, IconComponent],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ModalComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-modal',\n      templateUrl: './modal.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [];\n  }, {\n    isOpen: [{\n      type: Input\n    }],\n    isOpenChange: [{\n      type: Output\n    }],\n    content: [{\n      type: ViewChild,\n      args: ['content']\n    }]\n  });\n})();\n\nclass NotificationComponent {\n  constructor() {}\n\n}\n\nNotificationComponent.ɵfac = function NotificationComponent_Factory(t) {\n  return new (t || NotificationComponent)();\n};\n\nNotificationComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationComponent,\n  selectors: [[\"stream-notification\"]],\n  inputs: {\n    type: \"type\"\n  },\n  ngContentSelectors: _c5,\n  decls: 2,\n  vars: 3,\n  consts: [[\"data-testid\", \"custom-notification\"]],\n  template: function NotificationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵprojection(1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassMapInterpolate1(\"str-chat__custom-notification notification-\", ctx.type, \"\");\n    }\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-notification',\n      templateUrl: './notification.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [];\n  }, {\n    type: [{\n      type: Input\n    }]\n  });\n})();\n\nclass NotificationListComponent {\n  constructor(notificationService) {\n    this.notificationService = notificationService;\n    this.notifications$ = this.notificationService.notifications$;\n  }\n\n  trackByItem(_, item) {\n    return item;\n  }\n\n}\n\nNotificationListComponent.ɵfac = function NotificationListComponent_Factory(t) {\n  return new (t || NotificationListComponent)(i0.ɵɵdirectiveInject(NotificationService));\n};\n\nNotificationListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationListComponent,\n  selectors: [[\"stream-notification-list\"]],\n  decls: 3,\n  vars: 4,\n  consts: [[1, \"str-chat__list-notifications\"], [3, \"type\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"type\"], [\"data-testclass\", \"notification-content\"]],\n  template: function NotificationListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, NotificationListComponent_stream_notification_1_Template, 4, 5, \"stream-notification\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 2, ctx.notifications$))(\"ngForTrackBy\", ctx.trackByItem);\n    }\n  },\n  directives: [i3.NgForOf, NotificationComponent],\n  pipes: [i3.AsyncPipe, i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-notification-list',\n      templateUrl: './notification-list.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: NotificationService\n    }];\n  }, null);\n})();\n\nclass MessageActionsBoxComponent {\n  constructor(chatClientService, notificationService, channelService) {\n    this.chatClientService = chatClientService;\n    this.notificationService = notificationService;\n    this.channelService = channelService;\n    this.isOpen = false;\n    this.isMine = false;\n    this.enabledActions = [];\n    this.displayedActionsCount = new EventEmitter();\n    this.isEditing = new EventEmitter();\n    this.isEditModalOpen = false;\n\n    this.modalClosed = () => {\n      this.isEditModalOpen = false;\n      this.isEditing.emit(false);\n    };\n  }\n\n  ngOnChanges(changes) {\n    if (changes.isMine || changes.enabledActions) {\n      let displayedActionsCount = 0;\n\n      if (this.isQuoteVisible) {\n        displayedActionsCount++;\n      }\n\n      if (this.isEditVisible) {\n        displayedActionsCount++;\n      }\n\n      if (this.isDeleteVisible) {\n        displayedActionsCount++;\n      }\n\n      if (this.isMuteVisible) {\n        displayedActionsCount++;\n      }\n\n      if (this.isFlagVisible) {\n        displayedActionsCount++;\n      }\n\n      if (this.isPinVisible) {\n        displayedActionsCount++;\n      }\n\n      this.displayedActionsCount.next(displayedActionsCount);\n    }\n  }\n\n  get isQuoteVisible() {\n    return this.enabledActions.indexOf('quote') !== -1;\n  }\n\n  get isEditVisible() {\n    return this.enabledActions.indexOf('edit') !== -1 && this.isMine || this.enabledActions.indexOf('edit-any') !== -1;\n  }\n\n  get isDeleteVisible() {\n    return this.enabledActions.indexOf('delete') !== -1 && this.isMine || this.enabledActions.indexOf('delete-any') !== -1;\n  }\n\n  get isMuteVisible() {\n    return this.enabledActions.indexOf('mute') !== -1;\n  }\n\n  get isFlagVisible() {\n    return this.enabledActions.indexOf('flag') !== -1 && !this.isMine;\n  }\n\n  get isPinVisible() {\n    return this.enabledActions.indexOf('pin') !== -1;\n  }\n\n  pinClicked() {\n    alert('Feature not yet implemented');\n  }\n\n  flagClicked() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        yield this.chatClientService.flagMessage(this.message.id);\n        this.notificationService.addTemporaryNotification('streamChat.Message has been successfully flagged', 'success');\n      } catch (err) {\n        this.notificationService.addTemporaryNotification('streamChat.Error adding flag');\n      }\n    });\n  }\n\n  muteClicked() {\n    alert('Feature not yet implemented');\n  }\n\n  quoteClicked() {\n    alert('Feature not yet implemented');\n  }\n\n  editClicked() {\n    this.isEditing.emit(true);\n    this.isEditModalOpen = true;\n  }\n\n  sendClicked() {\n    var _a;\n\n    (_a = this.messageInput) === null || _a === void 0 ? void 0 : _a.messageSent();\n  }\n\n  deleteClicked() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        yield this.channelService.deleteMessage(this.message);\n      } catch (error) {\n        this.notificationService.addTemporaryNotification('streamChat.Error deleting message');\n      }\n    });\n  }\n\n}\n\nMessageActionsBoxComponent.ɵfac = function MessageActionsBoxComponent_Factory(t) {\n  return new (t || MessageActionsBoxComponent)(i0.ɵɵdirectiveInject(ChatClientService), i0.ɵɵdirectiveInject(NotificationService), i0.ɵɵdirectiveInject(ChannelService));\n};\n\nMessageActionsBoxComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MessageActionsBoxComponent,\n  selectors: [[\"stream-message-actions-box\"]],\n  viewQuery: function MessageActionsBoxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MessageInputComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageInput = _t.first);\n    }\n  },\n  inputs: {\n    messageInputTemplate: \"messageInputTemplate\",\n    isOpen: \"isOpen\",\n    isMine: \"isMine\",\n    message: \"message\",\n    enabledActions: \"enabledActions\"\n  },\n  outputs: {\n    displayedActionsCount: \"displayedActionsCount\",\n    isEditing: \"isEditing\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 10,\n  vars: 12,\n  consts: [[\"data-testid\", \"action-box\", 1, \"str-chat__message-actions-box\"], [1, \"str-chat__message-actions-list\"], [\"data-testid\", \"quote-action\", 3, \"click\", 4, \"ngIf\"], [\"data-testid\", \"pin-action\", 3, \"click\", 4, \"ngIf\"], [\"data-testid\", \"flag-action\", 3, \"click\", 4, \"ngIf\"], [\"data-testid\", \"mute-action\", 3, \"click\", 4, \"ngIf\"], [\"data-testid\", \"edit-action\", 3, \"click\", 4, \"ngIf\"], [\"data-testid\", \"delete-action\", 3, \"click\", 4, \"ngIf\"], [3, \"isOpen\", \"isOpenChange\"], [\"class\", \"str-chat__edit-message-form\", 4, \"ngIf\"], [\"data-testid\", \"quote-action\", 3, \"click\"], [1, \"str-chat__message-actions-list-item\"], [\"data-testid\", \"pin-action\", 3, \"click\"], [\"data-testid\", \"flag-action\", 3, \"click\"], [\"data-testid\", \"mute-action\", 3, \"click\"], [\"data-testid\", \"edit-action\", 3, \"click\"], [\"data-testid\", \"delete-action\", 3, \"click\"], [1, \"str-chat__edit-message-form\"], [4, \"ngIf\", \"ngIfElse\"], [\"defaultInput\", \"\"], [1, \"str-chat__message-team-form-footer\"], [\"translate\", \"\", \"data-testid\", \"cancel-button\", 3, \"click\"], [\"type\", \"submit\", \"translate\", \"\", \"data-testid\", \"send-button\", 3, \"click\", \"keyup.enter\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"message\", \"messageUpdate\"]],\n  template: function MessageActionsBoxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"ul\", 1);\n      i0.ɵɵtemplate(2, MessageActionsBoxComponent_button_2_Template, 4, 3, \"button\", 2);\n      i0.ɵɵtemplate(3, MessageActionsBoxComponent_button_3_Template, 4, 3, \"button\", 3);\n      i0.ɵɵtemplate(4, MessageActionsBoxComponent_button_4_Template, 4, 3, \"button\", 4);\n      i0.ɵɵtemplate(5, MessageActionsBoxComponent_button_5_Template, 4, 3, \"button\", 5);\n      i0.ɵɵtemplate(6, MessageActionsBoxComponent_button_6_Template, 4, 3, \"button\", 6);\n      i0.ɵɵtemplate(7, MessageActionsBoxComponent_button_7_Template, 4, 3, \"button\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"stream-modal\", 8);\n      i0.ɵɵlistener(\"isOpenChange\", function MessageActionsBoxComponent_Template_stream_modal_isOpenChange_8_listener($event) {\n        ctx.isEditModalOpen = $event;\n        return ctx.isEditModalOpen ? \"\" : ctx.modalClosed();\n      });\n      i0.ɵɵtemplate(9, MessageActionsBoxComponent_div_9_Template, 12, 2, \"div\", 9);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"str-chat__message-actions-box--open\", ctx.isOpen)(\"str-chat__message-actions-box--mine\", ctx.isMine);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isQuoteVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isPinVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isFlagVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isMuteVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isEditVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isDeleteVisible);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"isOpen\", ctx.isEditModalOpen);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isEditModalOpen);\n    }\n  },\n  directives: [i3.NgIf, ModalComponent, NotificationListComponent, i10.TranslateDirective, i3.NgTemplateOutlet, MessageInputComponent],\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageActionsBoxComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-message-actions-box',\n      templateUrl: './message-actions-box.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChatClientService\n    }, {\n      type: NotificationService\n    }, {\n      type: ChannelService\n    }];\n  }, {\n    messageInputTemplate: [{\n      type: Input\n    }],\n    isOpen: [{\n      type: Input\n    }],\n    isMine: [{\n      type: Input\n    }],\n    message: [{\n      type: Input\n    }],\n    enabledActions: [{\n      type: Input\n    }],\n    displayedActionsCount: [{\n      type: Output\n    }],\n    isEditing: [{\n      type: Output\n    }],\n    messageInput: [{\n      type: ViewChild,\n      args: [MessageInputComponent]\n    }]\n  });\n})();\n\nclass ChannelComponent {\n  constructor(channelService) {\n    this.channelService = channelService;\n    this.subscriptions = [];\n    this.isError$ = this.channelService.channels$.pipe(map(() => false), catchError(() => of(true)), startWith(false));\n    this.isInitializing$ = this.channelService.channels$.pipe(map(channels => !channels), catchError(() => of(false)));\n  }\n\n}\n\nChannelComponent.ɵfac = function ChannelComponent_Factory(t) {\n  return new (t || ChannelComponent)(i0.ɵɵdirectiveInject(ChannelService));\n};\n\nChannelComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChannelComponent,\n  selectors: [[\"stream-channel\"]],\n  ngContentSelectors: _c5,\n  decls: 3,\n  vars: 5,\n  consts: [[\"class\", \"str-chat str-chat-channel messaging\", 4, \"ngIf\"], [1, \"str-chat\", \"str-chat-channel\", \"messaging\"], [1, \"str-chat__container\"], [1, \"str-chat__main-panel\"]],\n  template: function ChannelComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵtemplate(0, ChannelComponent_div_0_Template, 4, 0, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵpipe(2, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.isError$) === false && i0.ɵɵpipeBind1(2, 3, ctx.isInitializing$) === false);\n    }\n  },\n  directives: [i3.NgIf],\n  pipes: [i3.AsyncPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-channel',\n      templateUrl: './channel.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }];\n  }, null);\n})();\n\nconst getDeviceWidth = () => {\n  const width = window.innerWidth;\n  if (width < 768) return {\n    device: 'mobile',\n    width\n  };\n  if (width < 1024) return {\n    device: 'tablet',\n    width\n  };\n  return {\n    device: 'full',\n    width\n  };\n};\n\nclass ChannelListToggleService {\n  constructor() {\n    this.isOpenSubject = new BehaviorSubject(false);\n    this.isOpen$ = this.isOpenSubject.asObservable().pipe(distinctUntilChanged());\n    this.isOpen$.pipe(filter(s => s)).subscribe(() => {\n      if (getDeviceWidth().device === 'mobile') {\n        this.watchForOutsideClicks();\n      }\n    });\n  }\n\n  open() {\n    this.isOpenSubject.next(true);\n  }\n\n  close() {\n    this.isOpenSubject.next(false);\n  }\n\n  toggle() {\n    this.isOpenSubject.getValue() ? this.close() : this.open();\n  }\n\n  setMenuElement(element) {\n    this.menuElement = element;\n  }\n\n  channelSelected() {\n    if (getDeviceWidth().device === 'mobile') {\n      this.close();\n    }\n  }\n\n  watchForOutsideClicks() {\n    if (!this.menuElement) {\n      return;\n    }\n\n    const eventHandler = event => {\n      if (!this.menuElement.contains(event.target)) {\n        this.close();\n        window.removeEventListener('click', eventHandler);\n      }\n    };\n\n    window.addEventListener('click', eventHandler);\n    this.isOpen$.pipe(filter(s => !s), first()).subscribe(() => window.removeEventListener('click', eventHandler));\n  }\n\n}\n\nChannelListToggleService.ɵfac = function ChannelListToggleService_Factory(t) {\n  return new (t || ChannelListToggleService)();\n};\n\nChannelListToggleService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ChannelListToggleService,\n  factory: ChannelListToggleService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelListToggleService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass ChannelHeaderComponent {\n  constructor(channelService, channelListToggleService) {\n    this.channelService = channelService;\n    this.channelListToggleService = channelListToggleService;\n    this.channelService.activeChannel$.subscribe(c => {\n      var _a, _b;\n\n      this.activeChannel = c;\n      const capabilities = (_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.own_capabilities;\n\n      if (!capabilities) {\n        return;\n      }\n\n      this.canReceiveConnectEvents = capabilities.indexOf('connect-events') !== -1;\n    });\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    this.channelListToggleService.toggle();\n  }\n\n  get memberCountParam() {\n    var _a, _b;\n\n    return {\n      memberCount: ((_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.member_count) || 0\n    };\n  }\n\n  get watcherCountParam() {\n    var _a, _b;\n\n    return {\n      watcherCount: ((_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.watcher_count) || 0\n    };\n  }\n\n}\n\nChannelHeaderComponent.ɵfac = function ChannelHeaderComponent_Factory(t) {\n  return new (t || ChannelHeaderComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(ChannelListToggleService));\n};\n\nChannelHeaderComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChannelHeaderComponent,\n  selectors: [[\"stream-channel-header\"]],\n  decls: 13,\n  vars: 11,\n  consts: [[1, \"str-chat__header-livestream\"], [1, \"str-chat__header-hamburger\", 3, \"click\", \"keyup.enter\"], [1, \"str-chat__header-hamburger--line\"], [3, \"imageUrl\", \"name\"], [1, \"str-chat__header-livestream-left\"], [\"data-testid\", \"name\", 1, \"str-chat__header-livestream-left--title\"], [\"data-testid\", \"info\", 1, \"str-chat__header-livestream-left--members\"]],\n  template: function ChannelHeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵlistener(\"click\", function ChannelHeaderComponent_Template_div_click_1_listener($event) {\n        return ctx.toggleMenu($event);\n      })(\"keyup.enter\", function ChannelHeaderComponent_Template_div_keyup_enter_1_listener($event) {\n        return ctx.toggleMenu($event);\n      });\n      i0.ɵɵelement(2, \"span\", 2);\n      i0.ɵɵelement(3, \"span\", 2);\n      i0.ɵɵelement(4, \"span\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"stream-avatar\", 3);\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵelementStart(7, \"p\", 5);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"p\", 6);\n      i0.ɵɵtext(10);\n      i0.ɵɵpipe(11, \"translate\");\n      i0.ɵɵpipe(12, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"imageUrl\", ctx.activeChannel == null ? null : ctx.activeChannel.data == null ? null : ctx.activeChannel.data.image);\n      i0.ɵɵpropertyInterpolate(\"name\", ctx.activeChannel == null ? null : ctx.activeChannel.data == null ? null : ctx.activeChannel.data.name);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.activeChannel == null ? null : ctx.activeChannel.data == null ? null : ctx.activeChannel.data.name, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(11, 5, \"streamChat.{{ memberCount }} members\", ctx.memberCountParam), \" \", ctx.canReceiveConnectEvents ? i0.ɵɵpipeBind2(12, 8, \"streamChat.{{ watcherCount }} online\", ctx.watcherCountParam) : \"\", \" \");\n    }\n  },\n  directives: [AvatarComponent],\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelHeaderComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-channel-header',\n      templateUrl: './channel-header.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: ChannelListToggleService\n    }];\n  }, null);\n})();\n\nclass ChannelPreviewComponent {\n  constructor(channelService, ngZone) {\n    this.channelService = channelService;\n    this.ngZone = ngZone;\n    this.isActive = false;\n    this.isUnread = false;\n    this.latestMessage = 'Nothing yet...';\n    this.subscriptions = [];\n    this.canSendReadEvents = true;\n  }\n\n  ngOnInit() {\n    var _a, _b, _c, _d;\n\n    this.subscriptions.push(this.channelService.activeChannel$.subscribe(activeChannel => {\n      var _a;\n\n      return this.isActive = (activeChannel === null || activeChannel === void 0 ? void 0 : activeChannel.id) === ((_a = this.channel) === null || _a === void 0 ? void 0 : _a.id);\n    }));\n    const messages = (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.messages;\n\n    if (messages && messages.length > 0) {\n      this.setLatestMessage(messages[messages.length - 1]);\n    }\n\n    this.isUnread = !!this.channel.countUnread() && this.canSendReadEvents;\n    const capabilities = ((_d = (_c = this.channel) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.own_capabilities) || [];\n    this.canSendReadEvents = capabilities.indexOf('read-events') !== -1;\n    this.subscriptions.push(this.channel.on('message.new', this.handleMessageEvent.bind(this)));\n    this.subscriptions.push(this.channel.on('message.updated', this.handleMessageEvent.bind(this)));\n    this.subscriptions.push(this.channel.on('message.deleted', this.handleMessageEvent.bind(this)));\n    this.subscriptions.push(this.channel.on('channel.truncated', this.handleMessageEvent.bind(this)));\n    this.subscriptions.push(this.channel.on('message.read', () => this.ngZone.run(() => {\n      this.isUnread = !!this.channel.countUnread() && this.canSendReadEvents;\n    })));\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n\n  get avatarImage() {\n    var _a, _b;\n\n    return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.image;\n  }\n\n  get avatarName() {\n    var _a, _b;\n\n    return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.name;\n  }\n\n  get title() {\n    var _a, _b;\n\n    return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.name;\n  }\n\n  setAsActiveChannel() {\n    void this.channelService.setAsActiveChannel(this.channel);\n  }\n\n  handleMessageEvent(event) {\n    this.ngZone.run(() => {\n      var _a, _b, _c;\n\n      if (((_a = this.channel) === null || _a === void 0 ? void 0 : _a.state.messages.length) === 0) {\n        this.latestMessage = 'Nothing yet...';\n        return;\n      }\n\n      if (!event.message || ((_b = this.channel) === null || _b === void 0 ? void 0 : _b.state.messages[((_c = this.channel) === null || _c === void 0 ? void 0 : _c.state.messages.length) - 1].id) !== event.message.id) {\n        return;\n      }\n\n      this.setLatestMessage(event.message);\n      this.isUnread = !!this.channel.countUnread() && this.canSendReadEvents;\n    });\n  }\n\n  setLatestMessage(message) {\n    if (message === null || message === void 0 ? void 0 : message.deleted_at) {\n      this.latestMessage = 'streamChat.Message deleted';\n    } else if (message === null || message === void 0 ? void 0 : message.text) {\n      this.latestMessage = message.text;\n    } else if ((message === null || message === void 0 ? void 0 : message.attachments) && message.attachments.length) {\n      this.latestMessage = 'streamChat.🏙 Attachment...';\n    }\n  }\n\n}\n\nChannelPreviewComponent.ɵfac = function ChannelPreviewComponent_Factory(t) {\n  return new (t || ChannelPreviewComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(i0.NgZone));\n};\n\nChannelPreviewComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChannelPreviewComponent,\n  selectors: [[\"stream-channel-preview\"]],\n  inputs: {\n    channel: \"channel\"\n  },\n  decls: 10,\n  vars: 11,\n  consts: [[\"data-testid\", \"channel-preview-container\", 1, \"str-chat__channel-preview-messenger\", 3, \"click\"], [1, \"str-chat__channel-preview-messenger--left\"], [3, \"imageUrl\", \"name\", \"size\"], [1, \"str-chat__channel-preview-messenger--right\"], [1, \"str-chat__channel-preview-messenger--name\"], [\"data-testid\", \"channel-preview-title\"], [\"data-testid\", \"latest-message\", 1, \"str-chat__channel-preview-messenger--last-message\"]],\n  template: function ChannelPreviewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ChannelPreviewComponent_Template_button_click_0_listener() {\n        return ctx.setAsActiveChannel();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"stream-avatar\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"span\", 5);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"str-chat__channel-preview-messenger--active\", ctx.isActive)(\"str-chat__channel-preview-messenger--unread\", ctx.isUnread);\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"imageUrl\", ctx.avatarImage);\n      i0.ɵɵpropertyInterpolate(\"name\", ctx.avatarName);\n      i0.ɵɵproperty(\"size\", 40);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 9, ctx.latestMessage), \" \");\n    }\n  },\n  directives: [AvatarComponent],\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelPreviewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-channel-preview',\n      templateUrl: './channel-preview.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: i0.NgZone\n    }];\n  }, {\n    channel: [{\n      type: Input\n    }]\n  });\n})();\n\nclass ChannelListComponent {\n  constructor(channelService, channelListToggleService) {\n    this.channelService = channelService;\n    this.channelListToggleService = channelListToggleService;\n    this.isLoadingMoreChannels = false;\n    this.isOpen$ = this.channelListToggleService.isOpen$;\n    this.channels$ = this.channelService.channels$;\n    this.hasMoreChannels$ = this.channelService.hasMoreChannels$;\n    this.isError$ = this.channels$.pipe(map(() => false), catchError(() => of(true)), startWith(false));\n    this.isInitializing$ = this.channels$.pipe(map(channels => !channels), catchError(() => of(false)));\n  }\n\n  ngAfterViewInit() {\n    this.channelListToggleService.setMenuElement(this.container.nativeElement);\n  }\n\n  loadMoreChannels() {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.isLoadingMoreChannels = true;\n      yield this.channelService.loadMoreChannels();\n      this.isLoadingMoreChannels = false;\n    });\n  }\n\n  trackByChannelId(index, item) {\n    return item.cid;\n  }\n\n  channelSelected() {\n    this.channelListToggleService.channelSelected();\n  }\n\n}\n\nChannelListComponent.ɵfac = function ChannelListComponent_Factory(t) {\n  return new (t || ChannelListComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(ChannelListToggleService));\n};\n\nChannelListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ChannelListComponent,\n  selectors: [[\"stream-channel-list\"]],\n  viewQuery: function ChannelListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c7, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.container = _t.first);\n    }\n  },\n  inputs: {\n    customChannelPreviewTemplate: \"customChannelPreviewTemplate\"\n  },\n  decls: 14,\n  vars: 10,\n  consts: [[\"data-testid\", \"channel-list-container\", 1, \"str-chat\", \"str-chat-channel-list\", \"messaging\"], [\"container\", \"\"], [\"class\", \"str-chat__channel-list-messenger\", 4, \"ngIf\", \"ngIfElse\"], [\"statusIndicator\", \"\"], [\"chatDown\", \"\"], [\"loadingChannels\", \"\"], [\"loadingChannel\", \"\"], [1, \"str-chat__channel-list-messenger\"], [1, \"str-chat__channel-list-messenger__main\"], [\"data-testid\", \"empty-channel-list-indicator\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"str-chat__load-more-button\", \"data-testid\", \"load-more\", 3, \"click\", \"keyup.enter\", 4, \"ngIf\"], [\"data-testid\", \"empty-channel-list-indicator\"], [4, \"ngIf\", \"ngIfElse\"], [\"defaultTemplate\", \"\"], [3, \"click\", \"keyup.enter\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"data-testclass\", \"channel-preview\", 3, \"channel\", \"click\", \"keyup.enter\"], [\"data-testid\", \"load-more\", 1, \"str-chat__load-more-button\", 3, \"click\", \"keyup.enter\"], [\"data-testid\", \"load-more-button\", 1, \"str-chat__load-more-button__button\", 3, \"disabled\"], [\"loadingIndicator\", \"\"], [4, \"ngIf\"], [4, \"ngTemplateOutlet\"], [\"data-testid\", \"chatdown-container\", 1, \"str-chat__down\"], [1, \"str-chat__down-main\"], [\"icon\", \"connection-error\"], [\"data-testid\", \"loading-indicator\", 1, \"str-chat__loading-channels\"], [1, \"str-chat__loading-channels-item\"], [1, \"str-chat__loading-channels-avatar\"], [1, \"str-chat__loading-channels-meta\"], [1, \"str-chat__loading-channels-username\"], [1, \"str-chat__loading-channels-status\"]],\n  template: function ChannelListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵtemplate(3, ChannelListComponent_div_3_Template, 8, 10, \"div\", 2);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, ChannelListComponent_ng_template_6_Template, 4, 6, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(8, ChannelListComponent_ng_template_8_Template, 10, 7, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(10, ChannelListComponent_ng_template_10_Template, 4, 3, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(12, ChannelListComponent_ng_template_12_Template, 5, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(7);\n\n      i0.ɵɵclassProp(\"str-chat-channel-list--open\", i0.ɵɵpipeBind1(2, 4, ctx.isOpen$) === true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 6, ctx.isError$) === false && i0.ɵɵpipeBind1(5, 8, ctx.isInitializing$) === false)(\"ngIfElse\", _r2);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgTemplateOutlet, ChannelPreviewComponent, LoadingIndicatorComponent, IconComponent],\n  pipes: [i3.AsyncPipe, i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ChannelListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-channel-list',\n      templateUrl: './channel-list.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: ChannelListToggleService\n    }];\n  }, {\n    customChannelPreviewTemplate: [{\n      type: Input\n    }],\n    container: [{\n      type: ViewChild,\n      args: ['container']\n    }]\n  });\n})();\n\nDayjs.extend(calendar);\n\nconst parseDate = date => {\n  const parsedTime = Dayjs(date);\n  return parsedTime.calendar();\n};\n\nconst getReadByText = users => {\n  let outStr = '';\n  const slicedArr = users.map(item => item.name || item.id).slice(0, 5);\n  const restLength = users.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = `${slicedArr[0]} `;\n  } else if (slicedArr.length === 2) {\n    // joins all with \"and\" but =no commas\n    // example: \"bob and sam\"\n    outStr = `${slicedArr[0]} and ${slicedArr[1]}`;\n  } else if (slicedArr.length > 2) {\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      const lastUser = slicedArr.splice(slicedArr.length - 2, 1)[0];\n      const commaSeparatedUsers = slicedArr.join(', ');\n      outStr = `${commaSeparatedUsers}, and ${lastUser}`;\n    } else {\n      const commaSeparatedUsers = slicedArr.join(', ');\n      outStr = `${commaSeparatedUsers} and ${restLength} more`;\n    }\n  }\n\n  return outStr;\n};\n\nconst emojiReactionsMapping = {\n  like: '👍',\n  angry: '😠',\n  love: '❤️',\n  haha: '😂',\n  wow: '😮',\n  sad: '😞'\n};\n\nclass MessageReactionsComponent {\n  constructor(cdRef, channelService) {\n    this.cdRef = cdRef;\n    this.channelService = channelService;\n    this.messageReactionCounts = {};\n    this.isSelectorOpen = false;\n    this.isSelectorOpenChange = new EventEmitter();\n    this.latestReactions = [];\n    this.ownReactions = [];\n\n    this.eventHandler = event => {\n      var _a;\n\n      if (!((_a = this.selectorContainer) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n        this.isSelectorOpenChange.emit(false);\n      }\n    };\n  }\n\n  ngOnChanges(changes) {\n    if (changes.isSelectorOpen) {\n      this.isSelectorOpen ? setTimeout(() => this.watchForOutsideClicks()) // setTimeout: wait for current click to bubble up, and only watch for clicks after that\n      : this.stopWatchForOutsideClicks();\n    }\n  }\n\n  ngAfterViewChecked() {\n    if (this.tooltipText && !this.tooltipPositions) {\n      this.setTooltipPosition();\n      this.cdRef.detectChanges();\n    }\n  }\n\n  get existingReactions() {\n    return Object.keys(this.messageReactionCounts).filter(k => this.messageReactionCounts[k] > 0);\n  }\n\n  get reactionsCount() {\n    return Object.values(this.messageReactionCounts).reduce((total, count) => total + count, 0);\n  }\n\n  get reactionOptions() {\n    return ['like', 'love', 'haha', 'wow', 'sad', 'angry'];\n  }\n\n  getLatestUserByReaction(reactionType) {\n    var _a;\n\n    return (_a = this.latestReactions.find(r => r.type === reactionType && r.user)) === null || _a === void 0 ? void 0 : _a.user;\n  }\n\n  getEmojiByReaction(reactionType) {\n    return emojiReactionsMapping[reactionType];\n  }\n\n  getUsersByReaction(reactionType) {\n    return this.latestReactions.filter(r => r.type === reactionType).map(r => {\n      var _a, _b;\n\n      return ((_a = r.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = r.user) === null || _b === void 0 ? void 0 : _b.id);\n    }).filter(i => !!i).join(', ');\n  }\n\n  showTooltip(event, reactionType) {\n    this.currentTooltipTarget = event.target;\n    this.tooltipText = this.getUsersByReaction(reactionType);\n  }\n\n  hideTooltip() {\n    this.tooltipText = undefined;\n    this.currentTooltipTarget = undefined;\n    this.tooltipPositions = undefined;\n  }\n\n  trackByMessageReaction(index, item) {\n    return item;\n  }\n\n  react(type) {\n    this.ownReactions.find(r => r.type === type) ? void this.channelService.removeReaction(this.messageId, type) : void this.channelService.addReaction(this.messageId, type);\n  }\n\n  watchForOutsideClicks() {\n    window.addEventListener('click', this.eventHandler);\n  }\n\n  stopWatchForOutsideClicks() {\n    window.removeEventListener('click', this.eventHandler);\n  }\n\n  setTooltipPosition() {\n    var _a, _b, _c;\n\n    const tooltip = (_a = this.selectorTooltip) === null || _a === void 0 ? void 0 : _a.nativeElement.getBoundingClientRect();\n    const target = (_b = this.currentTooltipTarget) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n    const container = (_c = this.selectorContainer) === null || _c === void 0 ? void 0 : _c.nativeElement.getBoundingClientRect();\n    if (!tooltip || !target || !container) return;\n    const tooltipPosition = tooltip.width === container.width || tooltip.x < container.x ? 0 : target.left + target.width / 2 - container.left - tooltip.width / 2;\n    const arrowPosition = target.x - tooltip.x + target.width / 2 - tooltipPosition;\n    this.tooltipPositions = {\n      tooltip: tooltipPosition,\n      arrow: arrowPosition\n    };\n  }\n\n}\n\nMessageReactionsComponent.ɵfac = function MessageReactionsComponent_Factory(t) {\n  return new (t || MessageReactionsComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(ChannelService));\n};\n\nMessageReactionsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MessageReactionsComponent,\n  selectors: [[\"stream-message-reactions\"]],\n  viewQuery: function MessageReactionsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c9, 5);\n      i0.ɵɵviewQuery(_c10, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectorContainer = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectorTooltip = _t.first);\n    }\n  },\n  inputs: {\n    messageId: \"messageId\",\n    messageReactionCounts: \"messageReactionCounts\",\n    isSelectorOpen: \"isSelectorOpen\",\n    latestReactions: \"latestReactions\",\n    ownReactions: \"ownReactions\"\n  },\n  outputs: {\n    isSelectorOpenChange: \"isSelectorOpenChange\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"str-chat__reaction-list\", \"data-testid\", \"reaction-list\", 3, \"str-chat__reaction-list--reverse\", 4, \"ngIf\"], [\"class\", \"str-chat__reaction-selector\", \"data-testid\", \"reaction-selector\", 4, \"ngIf\"], [\"data-testid\", \"reaction-list\", 1, \"str-chat__reaction-list\"], [\"data-testclass\", \"emoji\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"data-testid\", \"reactions-count\", 1, \"str-chat__reaction-list--counter\"], [\"data-testclass\", \"emoji\"], [1, \"emoji\"], [\"data-testid\", \"reaction-selector\", 1, \"str-chat__reaction-selector\"], [\"selectorContainer\", \"\"], [\"data-testid\", \"tooltip\", \"class\", \"str-chat__reaction-selector-tooltip\", 3, \"ngStyle\", 4, \"ngIf\"], [1, \"str-chat__message-reactions-list\"], [\"class\", \"str-chat__message-reactions-list-item\", \"data-testclass\", \"emoji-option\", 3, \"click\", \"keyup.enter\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"data-testid\", \"tooltip\", 1, \"str-chat__reaction-selector-tooltip\", 3, \"ngStyle\"], [\"selectorTooltip\", \"\"], [1, \"arrow\", 3, \"ngStyle\"], [1, \"latest-user-username\"], [\"data-testclass\", \"emoji-option\", 1, \"str-chat__message-reactions-list-item\", 3, \"click\", \"keyup.enter\"], [\"class\", \"latest-user\", 3, \"click\", \"keyup.enter\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [1, \"emoji\", 2, \"width\", \"20px\", \"height\", \"20px\", \"top\", \"10px\"], [\"class\", \"str-chat__message-reactions-list-item__count\", 4, \"ngIf\"], [1, \"latest-user\", 3, \"click\", \"keyup.enter\", \"mouseenter\", \"mouseleave\"], [3, \"imageUrl\", \"name\", \"size\"], [1, \"str-chat__message-reactions-list-item__count\"]],\n  template: function MessageReactionsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, MessageReactionsComponent_div_0_Template, 6, 5, \"div\", 0);\n      i0.ɵɵtemplate(1, MessageReactionsComponent_div_1_Template, 5, 3, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.existingReactions.length > 0 && !ctx.isSelectorOpen);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSelectorOpen);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgStyle, AvatarComponent],\n  styles: [\".emoji[_ngcontent-%COMP%] {position: relative; display: inline-block; }\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageReactionsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-message-reactions',\n      templateUrl: './message-reactions.component.html',\n      styles: ['.emoji {position: relative; display: inline-block; }']\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: ChannelService\n    }];\n  }, {\n    messageId: [{\n      type: Input\n    }],\n    messageReactionCounts: [{\n      type: Input\n    }],\n    isSelectorOpen: [{\n      type: Input\n    }],\n    isSelectorOpenChange: [{\n      type: Output\n    }],\n    latestReactions: [{\n      type: Input\n    }],\n    ownReactions: [{\n      type: Input\n    }],\n    selectorContainer: [{\n      type: ViewChild,\n      args: ['selectorContainer']\n    }],\n    selectorTooltip: [{\n      type: ViewChild,\n      args: ['selectorTooltip']\n    }]\n  });\n})();\n\nclass ImageLoadService {\n  constructor() {\n    this.imageLoad$ = new Subject();\n  }\n\n}\n\nImageLoadService.ɵfac = function ImageLoadService_Factory(t) {\n  return new (t || ImageLoadService)();\n};\n\nImageLoadService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ImageLoadService,\n  factory: ImageLoadService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageLoadService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass AttachmentListComponent {\n  constructor(imageLoadService) {\n    this.imageLoadService = imageLoadService;\n    this.attachments = [];\n    this.orderedAttachments = [];\n  }\n\n  ngOnChanges() {\n    this.orderedAttachments = [...this.attachments.filter(a => this.isImage(a)), ...this.attachments.filter(a => this.isFile(a)), ...this.attachments.filter(a => this.isCard(a))];\n  }\n\n  trackById(index) {\n    return index;\n  }\n\n  isImage(attachment) {\n    return isImageAttachment(attachment);\n  }\n\n  isFile(attachment) {\n    return attachment.type === 'file';\n  }\n\n  isCard(attachment) {\n    return !attachment.type || attachment.type === 'image' && !this.isImage(attachment);\n  }\n\n  imageLoaded() {\n    this.imageLoadService.imageLoad$.next();\n  }\n\n  hasFileSize(attachment) {\n    return attachment.file_size && Number.isFinite(Number(attachment.file_size));\n  }\n\n  getFileSize(attachment) {\n    return prettybytes(attachment.file_size);\n  }\n\n  trimUrl(url) {\n    if (url !== undefined && url !== null) {\n      const [trimmedUrl] = url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '').split('/');\n      return trimmedUrl;\n    }\n\n    return null;\n  }\n\n}\n\nAttachmentListComponent.ɵfac = function AttachmentListComponent_Factory(t) {\n  return new (t || AttachmentListComponent)(i0.ɵɵdirectiveInject(ImageLoadService));\n};\n\nAttachmentListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AttachmentListComponent,\n  selectors: [[\"stream-attachment-list\"]],\n  inputs: {\n    attachments: \"attachments\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 2,\n  consts: [[4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"data-testclass\", \"attachment-container\"], [\"class\", \"str-chat__message-attachment--img\", \"data-testclass\", \"image\", 3, \"src\", \"alt\", \"load\", 4, \"ngIf\"], [\"class\", \"\\n        str-chat__message-attachment-file--item\\n        str-chat-angular__message-attachment-file-single\\n      \", 4, \"ngIf\"], [3, \"class\", 4, \"ngIf\"], [\"data-testclass\", \"image\", 1, \"str-chat__message-attachment--img\", 3, \"src\", \"alt\", \"load\"], [1, \"str-chat__message-attachment-file--item\", \"str-chat-angular__message-attachment-file-single\"], [\"icon\", \"file\", 3, \"size\"], [1, \"str-chat__message-attachment-file--item-text\"], [\"data-testclass\", \"file-link\", \"download\", \"\", \"target\", \"_blank\", 3, \"href\"], [\"data-testclass\", \"size\", 4, \"ngIf\"], [\"data-testclass\", \"size\"], [\"class\", \"str-chat__message-attachment-card--header\", 4, \"ngIf\"], [1, \"str-chat__message-attachment-card--content\"], [1, \"str-chat__message-attachment-card--flex\"], [\"data-testclass\", \"card-title\", \"class\", \"str-chat__message-attachment-card--title\", 4, \"ngIf\"], [\"class\", \"str-chat__message-attachment-card--text\", \"data-testclass\", \"card-text\", 4, \"ngIf\"], [\"class\", \"str-chat__message-attachment-card--url\", \"data-testclass\", \"url-link\", \"noopener\", \"\", \"noreferrer\", \"\", \"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [1, \"str-chat__message-attachment-card--header\"], [\"data-testclass\", \"card-img\", 3, \"alt\", \"src\"], [\"data-testclass\", \"card-title\", 1, \"str-chat__message-attachment-card--title\"], [\"data-testclass\", \"card-text\", 1, \"str-chat__message-attachment-card--text\"], [\"data-testclass\", \"url-link\", \"noopener\", \"\", \"noreferrer\", \"\", \"target\", \"_blank\", 1, \"str-chat__message-attachment-card--url\", 3, \"href\"]],\n  template: function AttachmentListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AttachmentListComponent_ng_container_0_Template, 5, 10, \"ng-container\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.orderedAttachments)(\"ngForTrackBy\", ctx.trackById);\n    }\n  },\n  directives: [i3.NgForOf, i3.NgIf, IconComponent],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AttachmentListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-attachment-list',\n      templateUrl: './attachment-list.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ImageLoadService\n    }];\n  }, {\n    attachments: [{\n      type: Input\n    }]\n  });\n})();\n\nclass MessageComponent {\n  constructor(chatClientService, channelService) {\n    this.chatClientService = chatClientService;\n    this.channelService = channelService;\n    this.enabledMessageActions = [];\n    this.isActionBoxOpen = false;\n    this.isReactionSelectorOpen = false;\n    this.isPressedOnMobile = false;\n    this.visibleMessageActionsCount = 0;\n    this.messageTextParts = [];\n    this.user = this.chatClientService.chatClient.user;\n  }\n\n  ngOnChanges(changes) {\n    var _a, _b;\n\n    if (changes.message) {\n      let content = ((_a = this.message) === null || _a === void 0 ? void 0 : _a.html) || ((_b = this.message) === null || _b === void 0 ? void 0 : _b.text);\n\n      if (!content) {\n        this.messageTextParts = [];\n      } else {\n        // Backend will wrap HTML content with <p></p>\\n\n        if (content.startsWith('<p>')) {\n          content = content.replace('<p>', '');\n        }\n\n        if (content.endsWith('</p>\\n')) {\n          content = content.replace('</p>\\n', '');\n        }\n\n        if (!this.message.mentioned_users || this.message.mentioned_users.length === 0) {\n          this.messageTextParts = [{\n            content,\n            type: 'text'\n          }];\n        } else {\n          this.messageTextParts = [];\n          let text = content;\n          this.message.mentioned_users.forEach(user => {\n            const mention = `@${user.name || user.id}`;\n            const precedingText = text.substring(0, text.indexOf(mention));\n            this.messageTextParts.push({\n              content: precedingText,\n              type: 'text'\n            });\n            this.messageTextParts.push({\n              content: mention,\n              type: 'mention',\n              user\n            });\n            text = text.replace(precedingText + mention, '');\n          });\n\n          if (text) {\n            this.messageTextParts.push({\n              content: text,\n              type: 'text'\n            });\n          }\n        }\n      }\n    }\n  }\n\n  get isSentByCurrentUser() {\n    var _a, _b, _c;\n\n    return ((_b = (_a = this.message) === null || _a === void 0 ? void 0 : _a.user) === null || _b === void 0 ? void 0 : _b.id) === ((_c = this.user) === null || _c === void 0 ? void 0 : _c.id);\n  }\n\n  get readByText() {\n    return getReadByText(this.message.readBy);\n  }\n\n  get lastReadUser() {\n    var _a;\n\n    return (_a = this.message) === null || _a === void 0 ? void 0 : _a.readBy.filter(u => {\n      var _a;\n\n      return u.id !== ((_a = this.user) === null || _a === void 0 ? void 0 : _a.id);\n    })[0];\n  }\n\n  get isOnlyReadByMe() {\n    return this.message && this.message.readBy.length === 0;\n  }\n\n  get isReadByMultipleUsers() {\n    return this.message && this.message.readBy.length > 1;\n  }\n\n  get isMessageDeliveredAndRead() {\n    return this.message && this.message.readBy && this.message.status === 'received' && this.message.readBy.length > 0;\n  }\n\n  get parsedDate() {\n    var _a;\n\n    if (!this.message || !((_a = this.message) === null || _a === void 0 ? void 0 : _a.created_at)) {\n      return;\n    }\n\n    return parseDate(this.message.created_at);\n  }\n\n  get areOptionsVisible() {\n    if (!this.message) {\n      return false;\n    }\n\n    return !(!this.message.type || this.message.type === 'error' || this.message.type === 'system' || this.message.type === 'ephemeral' || this.message.status === 'failed' || this.message.status === 'sending');\n  }\n\n  get hasAttachment() {\n    var _a;\n\n    return !!((_a = this.message) === null || _a === void 0 ? void 0 : _a.attachments) && !!this.message.attachments.length;\n  }\n\n  get hasReactions() {\n    var _a;\n\n    return !!((_a = this.message) === null || _a === void 0 ? void 0 : _a.reaction_counts) && Object.keys(this.message.reaction_counts).length > 0;\n  }\n\n  resendMessage() {\n    void this.channelService.resendMessage(this.message);\n  }\n\n  textClicked() {\n    if (getDeviceWidth().device !== 'mobile') {\n      this.isPressedOnMobile = false;\n      return;\n    }\n\n    if (this.isPressedOnMobile) {\n      return;\n    }\n\n    this.isPressedOnMobile = true;\n\n    const eventHandler = event => {\n      var _a;\n\n      if (!((_a = this.container) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n        this.isPressedOnMobile = false;\n        window.removeEventListener('click', eventHandler);\n      }\n    };\n\n    window.addEventListener('click', eventHandler);\n  }\n\n}\n\nMessageComponent.ɵfac = function MessageComponent_Factory(t) {\n  return new (t || MessageComponent)(i0.ɵɵdirectiveInject(ChatClientService), i0.ɵɵdirectiveInject(ChannelService));\n};\n\nMessageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MessageComponent,\n  selectors: [[\"stream-message\"]],\n  viewQuery: function MessageComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c7, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.container = _t.first);\n    }\n  },\n  inputs: {\n    messageInputTemplate: \"messageInputTemplate\",\n    mentionTemplate: \"mentionTemplate\",\n    message: \"message\",\n    enabledMessageActions: \"enabledMessageActions\",\n    areReactionsEnabled: \"areReactionsEnabled\",\n    canReactToMessage: \"canReactToMessage\",\n    isLastSentMessage: \"isLastSentMessage\",\n    canReceiveReadEvents: \"canReceiveReadEvents\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 17,\n  consts: [[\"data-testid\", \"message-container\"], [\"container\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"sendingStatus\", \"\"], [\"readStatus\", \"\"], [\"deliveredStatus\", \"\"], [\"deletedMessage\", \"\"], [\"systemMessage\", \"\"], [4, \"ngIf\"], [\"data-testid\", \"avatar\", 1, \"str-chat-angular__avatar-host\", 3, \"imageUrl\", \"name\"], [1, \"str-chat__message-inner\"], [\"class\", \"str-chat__message-simple__actions\", \"data-testid\", \"message-options\", 4, \"ngIf\"], [3, \"messageReactionCounts\", \"latestReactions\", \"isSelectorOpen\", \"messageId\", \"ownReactions\", \"isSelectorOpenChange\", 4, \"ngIf\"], [3, \"attachments\", 4, \"ngIf\"], [\"class\", \"str-chat__message-text\", 4, \"ngIf\"], [1, \"str-chat__message-data\", \"str-chat__message-simple-data\"], [\"data-testid\", \"sender\", \"class\", \"str-chat__message-simple-name\", 4, \"ngIf\"], [\"data-testid\", \"date\", 1, \"str-chat__message-simple-timestamp\"], [\"sentStatus\", \"\"], [4, \"ngTemplateOutlet\"], [\"data-testid\", \"message-options\", 1, \"str-chat__message-simple__actions\"], [\"data-testid\", \"message-actions-container\", 1, \"str-chat__message-simple__actions__action\", \"str-chat__message-simple__actions__action--options\"], [3, \"isOpen\", \"isMine\", \"enabledActions\", \"message\", \"messageInputTemplate\", \"displayedActionsCount\", \"isEditing\"], [\"data-testid\", \"action-icon\", \"icon\", \"action-icon\", 3, \"keyup.enter\", \"click\", 4, \"ngIf\"], [\"class\", \"\\n              str-chat__message-simple__actions__action\\n              str-chat__message-simple__actions__action--reactions\\n            \", \"data-testid\", \"reaction-icon\", 3, \"click\", \"keyup.enter\", 4, \"ngIf\"], [\"data-testid\", \"action-icon\", \"icon\", \"action-icon\", 3, \"keyup.enter\", \"click\"], [\"data-testid\", \"reaction-icon\", 1, \"str-chat__message-simple__actions__action\", \"str-chat__message-simple__actions__action--reactions\", 3, \"click\", \"keyup.enter\"], [\"icon\", \"reaction-icon\"], [3, \"messageReactionCounts\", \"latestReactions\", \"isSelectorOpen\", \"messageId\", \"ownReactions\", \"isSelectorOpenChange\"], [3, \"attachments\"], [1, \"str-chat__message-text\"], [\"data-testid\", \"inner-message\", 1, \"str-chat__message-text-inner\", \"str-chat__message-simple-text-inner\", 3, \"click\", \"keyup.enter\"], [\"data-testid\", \"client-error-message\", \"class\", \"str-chat__simple-message--error-message\", 4, \"ngIf\"], [\"data-testid\", \"error-message\", \"class\", \"str-chat__simple-message--error-message\", 4, \"ngIf\"], [\"data-testid\", \"text\", 3, \"click\", \"keyup.enter\"], [4, \"ngFor\", \"ngForOf\"], [\"data-testid\", \"client-error-message\", 1, \"str-chat__simple-message--error-message\"], [\"data-testid\", \"error-message\", 1, \"str-chat__simple-message--error-message\"], [3, \"innerHTML\", 4, \"ngIf\", \"ngIfElse\"], [\"mention\", \"\"], [3, \"innerHTML\"], [\"defaultMention\", \"\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"data-testid\", \"sender\", 1, \"str-chat__message-simple-name\"], [\"data-testid\", \"sending-indicator\", 1, \"str-chat__message-simple-status\"], [1, \"str-chat__tooltip\"], [\"data-testid\", \"loading-indicator\"], [\"data-testid\", \"read-indicator\", 1, \"str-chat__message-simple-status\"], [\"data-testid\", \"read-by-tooltip\", 1, \"str-chat__tooltip\"], [\"data-test-id\", \"last-read-user-avatar\", 1, \"str-chat-angular__avatar-host\", 3, \"size\", \"imageUrl\", \"name\"], [\"data-test-id\", \"read-by-length\", \"class\", \"str-chat__message-simple-status-number\", 4, \"ngIf\"], [\"data-test-id\", \"read-by-length\", 1, \"str-chat__message-simple-status-number\"], [\"data-testid\", \"delivered-indicator\", 1, \"str-chat__message-simple-status\"], [\"data-testid\", \"delivered-icon\", \"icon\", \"delivered-icon\"], [\"data-testid\", \"message-deleted-component\"], [\"translate\", \"\", 1, \"str-chat__message--deleted-inner\"], [\"data-testid\", \"system-message\", 1, \"str-chat__message--system\"], [1, \"str-chat__message--system__text\"], [1, \"str-chat__message--system__line\"], [1, \"str-chat__message--system__date\"]],\n  template: function MessageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵtemplate(2, MessageComponent_ng_container_2_Template, 2, 2, \"ng-container\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, MessageComponent_ng_template_3_Template, 5, 3, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(5, MessageComponent_ng_template_5_Template, 5, 5, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(7, MessageComponent_ng_template_7_Template, 5, 3, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(9, MessageComponent_ng_template_9_Template, 3, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(11, MessageComponent_ng_template_11_Template, 8, 2, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r8 = i0.ɵɵreference(10);\n\n      i0.ɵɵclassMapInterpolate3(\"str-chat__message-simple str-chat__message str-chat__message--\", ctx.message == null ? null : ctx.message.type, \" str-chat__message--\", ctx.message == null ? null : ctx.message.status, \" \", (ctx.message == null ? null : ctx.message.text) ? \"str-chat__message--has-text\" : \"has-no-text\", \"\");\n      i0.ɵɵclassProp(\"str-chat__message--me\", ctx.isSentByCurrentUser)(\"str-chat__message-simple--me\", ctx.isSentByCurrentUser)(\"mobile-press\", ctx.isPressedOnMobile)(\"str-chat__message--has-attachment\", ctx.hasAttachment)(\"str-chat__message--with-reactions\", ctx.areReactionsEnabled && ctx.hasReactions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.message == null ? null : ctx.message.deleted_at))(\"ngIfElse\", _r8);\n    }\n  },\n  directives: [i3.NgIf, AvatarComponent, i3.NgTemplateOutlet, MessageActionsBoxComponent, IconComponent, MessageReactionsComponent, AttachmentListComponent, i3.NgForOf, LoadingIndicatorComponent, i10.TranslateDirective],\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-message',\n      templateUrl: './message.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChatClientService\n    }, {\n      type: ChannelService\n    }];\n  }, {\n    messageInputTemplate: [{\n      type: Input\n    }],\n    mentionTemplate: [{\n      type: Input\n    }],\n    message: [{\n      type: Input\n    }],\n    enabledMessageActions: [{\n      type: Input\n    }],\n    areReactionsEnabled: [{\n      type: Input\n    }],\n    canReactToMessage: [{\n      type: Input\n    }],\n    isLastSentMessage: [{\n      type: Input\n    }],\n    canReceiveReadEvents: [{\n      type: Input\n    }],\n    container: [{\n      type: ViewChild,\n      args: ['container']\n    }]\n  });\n})();\n\nclass TextareaComponent {\n  constructor() {\n    this.class = 'str-chat__textarea';\n    this.value = '';\n    this.valueChange = new EventEmitter();\n    this.send = new EventEmitter();\n  } // eslint-disable-next-line @angular-eslint/no-empty-lifecycle-method\n\n\n  ngOnChanges() {}\n\n  inputChanged() {\n    this.valueChange.emit(this.messageInput.nativeElement.value);\n  }\n\n  sent(event) {\n    event.preventDefault();\n    this.send.next();\n  }\n\n}\n\nTextareaComponent.ɵfac = function TextareaComponent_Factory(t) {\n  return new (t || TextareaComponent)();\n};\n\nTextareaComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: TextareaComponent,\n  selectors: [[\"stream-textarea\"]],\n  viewQuery: function TextareaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c16, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageInput = _t.first);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function TextareaComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.class);\n    }\n  },\n  inputs: {\n    value: \"value\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    send: \"send\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 3,\n  vars: 4,\n  consts: [[\"autofocus\", \"\", \"data-testid\", \"textarea\", \"rows\", \"1\", 1, \"rta__textarea\", \"str-chat__textarea__textarea\", 3, \"value\", \"placeholder\", \"input\", \"keydown.enter\"], [\"input\", \"\"]],\n  template: function TextareaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"textarea\", 0, 1);\n      i0.ɵɵlistener(\"input\", function TextareaComponent_Template_textarea_input_0_listener() {\n        return ctx.inputChanged();\n      })(\"keydown.enter\", function TextareaComponent_Template_textarea_keydown_enter_0_listener($event) {\n        return ctx.sent($event);\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(2, 2, \"streamChat.Type your message\"));\n      i0.ɵɵproperty(\"value\", ctx.value || \"\");\n    }\n  },\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TextareaComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-textarea',\n      templateUrl: './textarea.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [];\n  }, {\n    class: [{\n      type: HostBinding\n    }],\n    value: [{\n      type: Input\n    }],\n    valueChange: [{\n      type: Output\n    }],\n    send: [{\n      type: Output\n    }],\n    messageInput: [{\n      type: ViewChild,\n      args: ['input']\n    }]\n  });\n})();\n\nclass TransliterationService {\n  constructor() {}\n\n  transliterate(s) {\n    return transliterate(s);\n  }\n\n}\n\nTransliterationService.ɵfac = function TransliterationService_Factory(t) {\n  return new (t || TransliterationService)();\n};\n\nTransliterationService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: TransliterationService,\n  factory: TransliterationService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TransliterationService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass AutocompleteTextareaComponent {\n  constructor(channelService, chatClientService, transliterationService) {\n    this.channelService = channelService;\n    this.chatClientService = chatClientService;\n    this.transliterationService = transliterationService;\n    this.class = 'str-chat__textarea';\n    this.value = '';\n    this.areMentionsEnabled = true;\n    this.mentionScope = 'channel';\n    this.valueChange = new EventEmitter();\n    this.send = new EventEmitter();\n    this.userMentions = new EventEmitter();\n    this.labelKey = 'autocompleteLabel';\n    this.mentionTriggerChar = '@';\n    this.autocompleteConfig = {\n      mentions: []\n    };\n    this.subscriptions = [];\n    this.mentionedUsers = [];\n    this.userMentionConfig = {\n      triggerChar: this.mentionTriggerChar,\n      dropUp: true,\n      labelKey: this.labelKey,\n      returnTrigger: true,\n      mentionFilter: (searchString, items) => this.filter(searchString, items),\n      mentionSelect: (item, triggerChar) => this.itemSelectedFromAutocompleteList(item, triggerChar)\n    };\n    this.searchTerm$ = new BehaviorSubject('');\n    this.searchTerm$.pipe(debounceTime(300), distinctUntilChanged()).subscribe(searchTerm => {\n      if (searchTerm.startsWith(this.mentionTriggerChar)) {\n        void this.updateMentionOptions(searchTerm);\n      }\n    });\n    this.subscriptions.push(this.channelService.activeChannel$.subscribe(() => {\n      this.mentionedUsers = [];\n      this.userMentions.next([...this.mentionedUsers]);\n      void this.updateMentionOptions(this.searchTerm$.getValue());\n    }));\n  }\n\n  ngOnChanges(changes) {\n    if (changes.areMentionsEnabled) {\n      if (this.areMentionsEnabled) {\n        this.autocompleteConfig.mentions = [this.userMentionConfig];\n        this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n      } else {\n        this.autocompleteConfig.mentions = [];\n        this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n      }\n    }\n\n    if (changes.mentionScope) {\n      void this.updateMentionOptions(this.searchTerm$.getValue());\n    }\n  }\n\n  filter(searchString, items) {\n    return items.filter(item => this.transliterate(item.autocompleteLabel.toLowerCase()).includes(this.transliterate(searchString.toLowerCase())));\n  }\n\n  itemSelectedFromAutocompleteList(item, triggerChar = '') {\n    if (triggerChar === this.mentionTriggerChar) {\n      this.mentionedUsers.push(item.user ? item.user : item);\n      this.userMentions.next([...this.mentionedUsers]);\n    }\n\n    return triggerChar + item.autocompleteLabel;\n  }\n\n  autcompleteSearchTermChanged(searchTerm) {\n    if (searchTerm === this.mentionTriggerChar) {\n      void this.updateMentionOptions();\n    } else {\n      this.searchTerm$.next(searchTerm);\n    }\n  }\n\n  inputChanged() {\n    this.valueChange.emit(this.messageInput.nativeElement.value);\n  }\n\n  inputLeft() {\n    this.updateMentionedUsersFromText();\n  }\n\n  sent(event) {\n    event.preventDefault();\n    this.updateMentionedUsersFromText();\n    this.send.next();\n  }\n\n  transliterate(s) {\n    if (this.transliterationService) {\n      return this.transliterationService.transliterate(s);\n    } else {\n      return s;\n    }\n  }\n\n  updateMentionOptions(searchTerm) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.areMentionsEnabled) {\n        return;\n      }\n\n      searchTerm = searchTerm === null || searchTerm === void 0 ? void 0 : searchTerm.replace(this.mentionTriggerChar, '');\n      const request = this.mentionScope === 'application' ? s => this.chatClientService.autocompleteUsers(s) : s => this.channelService.autocompleteMembers(s);\n      const result = yield request(searchTerm || '');\n      const items = this.filter(searchTerm || '', result.map(i => {\n        const user = i.user ? i.user : i;\n        return Object.assign(Object.assign({}, i), {\n          autocompleteLabel: user.name || user.id,\n          type: 'mention'\n        });\n      }));\n      this.userMentionConfig.items = items;\n      this.autocompleteConfig.mentions = [this.userMentionConfig];\n      this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n    });\n  }\n\n  updateMentionedUsersFromText() {\n    const updatedMentionedUsers = [];\n    this.mentionedUsers.forEach(u => {\n      const key = u.name || u.id;\n\n      if (this.value.includes(`${this.mentionTriggerChar}${key}`)) {\n        updatedMentionedUsers.push(u);\n      }\n    });\n\n    if (updatedMentionedUsers.length !== this.mentionedUsers.length) {\n      this.userMentions.next([...updatedMentionedUsers]);\n      this.mentionedUsers = updatedMentionedUsers;\n    }\n  }\n\n}\n\nAutocompleteTextareaComponent.ɵfac = function AutocompleteTextareaComponent_Factory(t) {\n  return new (t || AutocompleteTextareaComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(ChatClientService), i0.ɵɵdirectiveInject(TransliterationService));\n};\n\nAutocompleteTextareaComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AutocompleteTextareaComponent,\n  selectors: [[\"stream-autocomplete-textarea\"]],\n  viewQuery: function AutocompleteTextareaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c16, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageInput = _t.first);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function AutocompleteTextareaComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.class);\n    }\n  },\n  inputs: {\n    value: \"value\",\n    areMentionsEnabled: \"areMentionsEnabled\",\n    mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\",\n    mentionScope: \"mentionScope\"\n  },\n  outputs: {\n    valueChange: \"valueChange\",\n    send: \"send\",\n    userMentions: \"userMentions\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 7,\n  vars: 6,\n  consts: [[\"autofocus\", \"\", \"data-testid\", \"textarea\", \"rows\", \"1\", 1, \"rta__textarea\", \"str-chat__textarea__textarea\", 3, \"value\", \"placeholder\", \"mentionConfig\", \"mentionListTemplate\", \"input\", \"keydown.enter\", \"searchTerm\", \"blur\"], [\"input\", \"\"], [\"autocompleteItem\", \"\"], [\"defaultMentionTemplate\", \"\"], [1, \"rta\", \"rta__item\", \"str-chat__emojisearch__item\", 3, \"ngSwitch\"], [\"class\", \"rta__entity\", 4, \"ngSwitchCase\"], [1, \"rta__entity\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"str-chat__user-item\"], [\"data-testclass\", \"avatar\", 1, \"str-chat__avatar\", \"str-chat__avatar--circle\", 2, \"height\", \"20px\", 3, \"size\", \"imageUrl\", \"name\"], [\"data-testclass\", \"username\", 1, \"str-chat__user-item--name\"]],\n  template: function AutocompleteTextareaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"textarea\", 0, 1);\n      i0.ɵɵlistener(\"input\", function AutocompleteTextareaComponent_Template_textarea_input_0_listener() {\n        return ctx.inputChanged();\n      })(\"keydown.enter\", function AutocompleteTextareaComponent_Template_textarea_keydown_enter_0_listener($event) {\n        return ctx.sent($event);\n      })(\"searchTerm\", function AutocompleteTextareaComponent_Template_textarea_searchTerm_0_listener($event) {\n        return ctx.autcompleteSearchTermChanged($event);\n      })(\"blur\", function AutocompleteTextareaComponent_Template_textarea_blur_0_listener() {\n        return ctx.inputLeft();\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, AutocompleteTextareaComponent_ng_template_3_Template, 2, 2, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(5, AutocompleteTextareaComponent_ng_template_5_Template, 4, 4, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(4);\n\n      i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(2, 4, \"streamChat.Type your message\"));\n      i0.ɵɵproperty(\"value\", ctx.value || \"\")(\"mentionConfig\", ctx.autocompleteConfig)(\"mentionListTemplate\", _r1);\n    }\n  },\n  directives: [i5.MentionDirective, i3.NgSwitch, i3.NgSwitchCase, i3.NgTemplateOutlet, AvatarComponent],\n  pipes: [i10.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AutocompleteTextareaComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-autocomplete-textarea',\n      templateUrl: './autocomplete-textarea.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: ChatClientService\n    }, {\n      type: TransliterationService\n    }];\n  }, {\n    class: [{\n      type: HostBinding\n    }],\n    value: [{\n      type: Input\n    }],\n    areMentionsEnabled: [{\n      type: Input\n    }],\n    mentionAutocompleteItemTemplate: [{\n      type: Input\n    }],\n    mentionScope: [{\n      type: Input\n    }],\n    valueChange: [{\n      type: Output\n    }],\n    send: [{\n      type: Output\n    }],\n    userMentions: [{\n      type: Output\n    }],\n    messageInput: [{\n      type: ViewChild,\n      args: ['input']\n    }]\n  });\n})();\n\nconst getGroupStyles = (message, previousMessage, nextMessage, noGroupByUser = false) => {\n  var _a, _b, _c, _d, _e, _f;\n\n  if (noGroupByUser || message.attachments && message.attachments.length !== 0) return 'single';\n  const isTopMessage = !previousMessage || !isOnSameDay(previousMessage.created_at, message.created_at) || previousMessage.type === 'system' || previousMessage.attachments && ((_a = previousMessage.attachments) === null || _a === void 0 ? void 0 : _a.length) !== 0 || ((_b = message.user) === null || _b === void 0 ? void 0 : _b.id) !== ((_c = previousMessage.user) === null || _c === void 0 ? void 0 : _c.id) || previousMessage.type === 'error' || previousMessage.deleted_at;\n  const isBottomMessage = !nextMessage || !isOnSameDay(message.created_at, nextMessage.created_at) || nextMessage.type === 'system' || nextMessage.attachments && ((_d = nextMessage.attachments) === null || _d === void 0 ? void 0 : _d.length) !== 0 || ((_e = message.user) === null || _e === void 0 ? void 0 : _e.id) !== ((_f = nextMessage.user) === null || _f === void 0 ? void 0 : _f.id) || nextMessage.type === 'error' || nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error') return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n  return '';\n};\n\nconst isOnSameDay = (date1, date2) => {\n  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n};\n\nclass MessageListComponent {\n  constructor(channelService, chatClientService, imageLoadService) {\n    this.channelService = channelService;\n    this.chatClientService = chatClientService;\n    this.imageLoadService = imageLoadService;\n    this.areReactionsEnabled = true;\n    /* eslint-disable-next-line @angular-eslint/no-input-rename */\n\n    this.enabledMessageActionsInput = ['flag', 'edit', 'edit-any', 'delete', 'delete-any'];\n    this.enabledMessageActions = [];\n    this.class = 'str-chat-angular__main-panel-inner str-chat-angular__message-list-host';\n    this.unreadMessageCount = 0;\n    this.groupStyles = [];\n    this.authorizedMessageActions = ['flag'];\n    this.isUserScrolledUpThreshold = 300;\n    this.channelService.activeChannel$.subscribe(channel => {\n      var _a;\n\n      this.latestMessageDate = undefined;\n      this.hasNewMessages = true;\n      this.isUserScrolledUp = false;\n      this.containerHeight = undefined;\n      this.olderMassagesLoaded = false;\n      this.oldestMessageDate = undefined;\n      this.unreadMessageCount = 0;\n      this.isNewMessageSentByUser = undefined;\n      const capabilites = (_a = channel === null || channel === void 0 ? void 0 : channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n\n      if (capabilites) {\n        this.canReactToMessage = capabilites.indexOf('send-reaction') !== -1;\n        this.canReceiveReadEvents = capabilites.indexOf('read-events') !== -1;\n        this.authorizedMessageActions = [];\n\n        if (capabilites.indexOf('flag-message') !== -1) {\n          this.authorizedMessageActions.push('flag');\n        }\n\n        if (capabilites.indexOf('update-own-message') !== -1) {\n          this.authorizedMessageActions.push('edit');\n        }\n\n        if (capabilites.indexOf('update-any-message') !== -1) {\n          this.authorizedMessageActions.push('edit');\n          this.authorizedMessageActions.push('edit-any');\n        }\n\n        if (capabilites.indexOf('delete-own-message') !== -1) {\n          this.authorizedMessageActions.push('delete');\n        }\n\n        if (capabilites.indexOf('delete-any-message') !== -1) {\n          this.authorizedMessageActions.push('delete');\n          this.authorizedMessageActions.push('delete-any');\n        }\n\n        this.setEnabledActions();\n      }\n    });\n    this.messages$ = this.channelService.activeChannelMessages$.pipe(tap(messages => {\n      var _a, _b, _c, _d, _e;\n\n      if (messages.length === 0) {\n        return;\n      }\n\n      const currentLatestMessageDate = messages[messages.length - 1].created_at;\n\n      if (!this.latestMessageDate || ((_a = this.latestMessageDate) === null || _a === void 0 ? void 0 : _a.getTime()) < currentLatestMessageDate.getTime()) {\n        this.latestMessageDate = currentLatestMessageDate;\n        this.hasNewMessages = true;\n        this.isNewMessageSentByUser = ((_b = messages[messages.length - 1].user) === null || _b === void 0 ? void 0 : _b.id) === ((_d = (_c = this.chatClientService.chatClient) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id);\n\n        if (this.isUserScrolledUp) {\n          this.unreadMessageCount++;\n        }\n      }\n\n      const currentOldestMessageDate = messages[0].created_at;\n\n      if (!this.oldestMessageDate) {\n        this.oldestMessageDate = currentOldestMessageDate;\n      } else if (((_e = this.oldestMessageDate) === null || _e === void 0 ? void 0 : _e.getTime()) > currentOldestMessageDate.getTime()) {\n        this.oldestMessageDate = currentOldestMessageDate;\n        this.olderMassagesLoaded = true;\n      }\n    }), tap(messages => {\n      this.groupStyles = messages.map((m, i) => getGroupStyles(m, messages[i - 1], messages[i + 1]));\n    }), tap(messages => {\n      var _a;\n\n      return this.lastSentMessageId = (_a = [...messages].reverse().find(m => {\n        var _a, _b, _c;\n\n        return ((_a = m.user) === null || _a === void 0 ? void 0 : _a.id) === ((_c = (_b = this.chatClientService.chatClient) === null || _b === void 0 ? void 0 : _b.user) === null || _c === void 0 ? void 0 : _c.id) && m.status !== 'sending';\n      })) === null || _a === void 0 ? void 0 : _a.id;\n    }));\n    this.imageLoadService.imageLoad$.subscribe(() => {\n      if (!this.isUserScrolledUp) {\n        this.scrollToBottom(); // Hacky and unreliable workaround to scroll down after loaded images move the scrollbar\n\n        setTimeout(() => {\n          this.scrollToBottom();\n        }, 300);\n      }\n    });\n  }\n\n  ngOnChanges(changes) {\n    if (changes.enabledMessageActionsInput) {\n      this.setEnabledActions();\n    }\n  }\n\n  ngAfterViewChecked() {\n    if (this.hasNewMessages) {\n      if (!this.isUserScrolledUp || this.isNewMessageSentByUser) {\n        this.scrollToBottom(); // Hacky and unreliable workaround to scroll down after loaded images move the scrollbar\n\n        setTimeout(() => {\n          this.scrollToBottom();\n        }, 300);\n      }\n\n      this.hasNewMessages = false;\n      this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n    } else if (this.olderMassagesLoaded) {\n      this.preserveScrollbarPosition();\n      this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n      this.olderMassagesLoaded = false;\n    }\n  }\n\n  trackByMessageId(index, item) {\n    return item.id;\n  }\n\n  scrollToBottom() {\n    this.scrollContainer.nativeElement.scrollTop = this.scrollContainer.nativeElement.scrollHeight;\n  }\n\n  scrolled() {\n    this.isUserScrolledUp = this.scrollContainer.nativeElement.scrollHeight - (this.scrollContainer.nativeElement.scrollTop + this.scrollContainer.nativeElement.clientHeight) > this.isUserScrolledUpThreshold;\n\n    if (!this.isUserScrolledUp) {\n      this.unreadMessageCount = 0;\n    }\n\n    if (this.scrollContainer.nativeElement.scrollTop === 0) {\n      this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n      void this.channelService.loadMoreMessages();\n    }\n  }\n\n  preserveScrollbarPosition() {\n    this.scrollContainer.nativeElement.scrollTop = this.scrollContainer.nativeElement.scrollHeight - this.containerHeight;\n  }\n\n  setEnabledActions() {\n    this.enabledMessageActions = [];\n\n    if (!this.enabledMessageActionsInput) {\n      return;\n    }\n\n    this.enabledMessageActionsInput.forEach(action => {\n      const isAuthorized = this.authorizedMessageActions.indexOf(action) !== -1;\n\n      if (isAuthorized) {\n        this.enabledMessageActions.push(action);\n      }\n    });\n  }\n\n}\n\nMessageListComponent.ɵfac = function MessageListComponent_Factory(t) {\n  return new (t || MessageListComponent)(i0.ɵɵdirectiveInject(ChannelService), i0.ɵɵdirectiveInject(ChatClientService), i0.ɵɵdirectiveInject(ImageLoadService));\n};\n\nMessageListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MessageListComponent,\n  selectors: [[\"stream-message-list\"]],\n  viewQuery: function MessageListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c18, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.scrollContainer = _t.first);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function MessageListComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.class);\n    }\n  },\n  inputs: {\n    messageTemplate: \"messageTemplate\",\n    messageInputTemplate: \"messageInputTemplate\",\n    mentionTemplate: \"mentionTemplate\",\n    areReactionsEnabled: \"areReactionsEnabled\",\n    enabledMessageActionsInput: [\"enabledMessageActions\", \"enabledMessageActionsInput\"]\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 8,\n  vars: 5,\n  consts: [[\"data-testid\", \"scroll-container\", 1, \"str-chat__list\", 3, \"scroll\"], [\"scrollContainer\", \"\"], [1, \"str-chat__reverse-infinite-scroll\"], [1, \"str-chat__ul\"], [\"data-testclass\", \"message\", 3, \"class\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"str-chat__list-notifications\"], [\"data-testid\", \"scroll-to-bottom\", \"class\", \"\\n      str-chat__message-notification\\n      str-chat__message-notification-right\\n      str-chat__message-notification-scroll-down\\n    \", 3, \"keyup.enter\", \"click\", 4, \"ngIf\"], [\"data-testclass\", \"message\"], [4, \"ngIf\", \"ngIfElse\"], [\"defaultMessageTemplate\", \"\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"message\", \"areReactionsEnabled\", \"canReactToMessage\", \"isLastSentMessage\", \"enabledMessageActions\", \"canReceiveReadEvents\", \"messageInputTemplate\", \"mentionTemplate\"], [\"data-testid\", \"scroll-to-bottom\", 1, \"str-chat__message-notification\", \"str-chat__message-notification-right\", \"str-chat__message-notification-scroll-down\", 3, \"keyup.enter\", \"click\"], [\"class\", \"\\n        str-chat__message-notification\\n        str-chat__message-notification-scroll-down-unread-count\\n      \", 4, \"ngIf\"], [1, \"str-chat__message-notification\", \"str-chat__message-notification-scroll-down-unread-count\"]],\n  template: function MessageListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵlistener(\"scroll\", function MessageListComponent_Template_div_scroll_0_listener() {\n        return ctx.scrolled();\n      });\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"ul\", 3);\n      i0.ɵɵtemplate(4, MessageListComponent_li_4_Template, 4, 5, \"li\", 4);\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵtemplate(7, MessageListComponent_button_7_Template, 2, 1, \"button\", 6);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 3, ctx.messages$))(\"ngForTrackBy\", ctx.trackByMessageId);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isUserScrolledUp);\n    }\n  },\n  directives: [i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet, MessageComponent],\n  pipes: [i3.AsyncPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MessageListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'stream-message-list',\n      templateUrl: './message-list.component.html',\n      styles: []\n    }]\n  }], function () {\n    return [{\n      type: ChannelService\n    }, {\n      type: ChatClientService\n    }, {\n      type: ImageLoadService\n    }];\n  }, {\n    messageTemplate: [{\n      type: Input\n    }],\n    messageInputTemplate: [{\n      type: Input\n    }],\n    mentionTemplate: [{\n      type: Input\n    }],\n    areReactionsEnabled: [{\n      type: Input\n    }],\n    enabledMessageActionsInput: [{\n      type: Input,\n      args: ['enabledMessageActions']\n    }],\n    class: [{\n      type: HostBinding,\n      args: ['class']\n    }],\n    scrollContainer: [{\n      type: ViewChild,\n      args: ['scrollContainer']\n    }]\n  });\n})();\n\nclass StreamAvatarModule {}\n\nStreamAvatarModule.ɵfac = function StreamAvatarModule_Factory(t) {\n  return new (t || StreamAvatarModule)();\n};\n\nStreamAvatarModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StreamAvatarModule,\n  declarations: [AvatarComponent],\n  imports: [CommonModule, TranslateModule],\n  exports: [AvatarComponent]\n});\nStreamAvatarModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, TranslateModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StreamAvatarModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [AvatarComponent],\n      imports: [CommonModule, TranslateModule],\n      exports: [AvatarComponent]\n    }]\n  }], null, null);\n})();\n\nclass StreamChatModule {}\n\nStreamChatModule.ɵfac = function StreamChatModule_Factory(t) {\n  return new (t || StreamChatModule)();\n};\n\nStreamChatModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StreamChatModule,\n  declarations: [ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelPreviewComponent, MessageComponent, MessageInputComponent, MessageListComponent, LoadingIndicatorComponent, IconComponent, MessageActionsBoxComponent, AttachmentListComponent, MessageReactionsComponent, NotificationComponent, NotificationListComponent, AttachmentPreviewListComponent, ModalComponent, TextareaDirective],\n  imports: [CommonModule, TranslateModule, StreamAvatarModule],\n  exports: [ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelPreviewComponent, MessageComponent, MessageInputComponent, MessageListComponent, LoadingIndicatorComponent, IconComponent, MessageActionsBoxComponent, AttachmentListComponent, MessageReactionsComponent, NotificationComponent, NotificationListComponent, AttachmentPreviewListComponent, ModalComponent, StreamAvatarModule]\n});\nStreamChatModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, TranslateModule, StreamAvatarModule], StreamAvatarModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StreamChatModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelPreviewComponent, MessageComponent, MessageInputComponent, MessageListComponent, LoadingIndicatorComponent, IconComponent, MessageActionsBoxComponent, AttachmentListComponent, MessageReactionsComponent, NotificationComponent, NotificationListComponent, AttachmentPreviewListComponent, ModalComponent, TextareaDirective],\n      imports: [CommonModule, TranslateModule, StreamAvatarModule],\n      exports: [ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelPreviewComponent, MessageComponent, MessageInputComponent, MessageListComponent, LoadingIndicatorComponent, IconComponent, MessageActionsBoxComponent, AttachmentListComponent, MessageReactionsComponent, NotificationComponent, NotificationListComponent, AttachmentPreviewListComponent, ModalComponent, StreamAvatarModule]\n    }]\n  }], null, null);\n})();\n\nclass StreamAutocompleteTextareaModule {}\n\nStreamAutocompleteTextareaModule.ɵfac = function StreamAutocompleteTextareaModule_Factory(t) {\n  return new (t || StreamAutocompleteTextareaModule)();\n};\n\nStreamAutocompleteTextareaModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StreamAutocompleteTextareaModule,\n  declarations: [AutocompleteTextareaComponent],\n  imports: [CommonModule, TranslateModule, MentionModule, StreamAvatarModule],\n  exports: [AutocompleteTextareaComponent]\n});\nStreamAutocompleteTextareaModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [{\n    provide: textareaInjectionToken,\n    useValue: AutocompleteTextareaComponent\n  }],\n  imports: [[CommonModule, TranslateModule, MentionModule, StreamAvatarModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StreamAutocompleteTextareaModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [AutocompleteTextareaComponent],\n      imports: [CommonModule, TranslateModule, MentionModule, StreamAvatarModule],\n      exports: [AutocompleteTextareaComponent],\n      providers: [{\n        provide: textareaInjectionToken,\n        useValue: AutocompleteTextareaComponent\n      }]\n    }]\n  }], null, null);\n})();\n\nclass StreamTextareaModule {}\n\nStreamTextareaModule.ɵfac = function StreamTextareaModule_Factory(t) {\n  return new (t || StreamTextareaModule)();\n};\n\nStreamTextareaModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StreamTextareaModule,\n  declarations: [TextareaComponent],\n  imports: [CommonModule, TranslateModule],\n  exports: [TextareaComponent]\n});\nStreamTextareaModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [{\n    provide: textareaInjectionToken,\n    useValue: TextareaComponent\n  }],\n  imports: [[CommonModule, TranslateModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StreamTextareaModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TextareaComponent],\n      imports: [CommonModule, TranslateModule],\n      exports: [TextareaComponent],\n      providers: [{\n        provide: textareaInjectionToken,\n        useValue: TextareaComponent\n      }]\n    }]\n  }], null, null);\n})();\n/*\n * Public API Surface of stream-chat-angular\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { AttachmentListComponent, AttachmentPreviewListComponent, AttachmentService, AutocompleteTextareaComponent, AvatarComponent, ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelListToggleService, ChannelPreviewComponent, ChannelService, ChatClientService, IconComponent, ImageLoadService, LoadingIndicatorComponent, MessageActionsBoxComponent, MessageComponent, MessageInputComponent, MessageInputConfigService, MessageListComponent, MessageReactionsComponent, ModalComponent, NotificationComponent, NotificationListComponent, NotificationService, StreamAutocompleteTextareaModule, StreamAvatarModule, StreamChatModule, StreamI18nService, StreamTextareaModule, TextareaComponent, TextareaDirective, ThemeService, TransliterationService, createMessagePreview, getDeviceWidth, getGroupStyles, getReadBy, getReadByText, isImageAttachment, isImageFile, parseDate, textareaInjectionToken };","map":{"version":3,"sources":["/Users/dillion/Desktop/github/ionic-chat-app/node_modules/stream-chat-angular/fesm2015/stream-chat-angular.js"],"names":["__awaiter","i0","Injectable","Component","Input","InjectionToken","EventEmitter","Directive","Output","Inject","ViewChild","HostBinding","NgModule","BehaviorSubject","ReplaySubject","of","Subject","StreamChat","map","first","catchError","startWith","distinctUntilChanged","filter","debounceTime","tap","v4","i10","TranslateModule","i3","CommonModule","Dayjs","calendar","prettybytes","transliterate","i5","MentionModule","version","NotificationService","constructor","notificationsSubject","notifications$","asObservable","addTemporaryNotification","text","type","timeout","translateParams","addNotification","id","setTimeout","removeNotification","clearTimeout","addPermanentNotification","next","getValue","notifications","index","findIndex","n","splice","ɵfac","ɵprov","args","providedIn","ChatClientService","ngZone","notificationService","notificationSubject","connectionStateSubject","appSettingsSubject","undefined","notification$","connectionState$","appSettings$","init","apiKey","userId","userToken","chatClient","getInstance","runOutsideAngular","connectUser","setUserAgent","getUserAgent","getAppSettings","on","e","eventType","event","run","isOnline","online","settings","app","flagMessage","messageId","autocompleteUsers","searchTerm","result","queryUsers","$or","$autocomplete","name","$ne","userID","users","NgZone","createMessagePreview","user","attachments","mentionedUsers","clientSideId","__html","created_at","Date","html","reactions","status","mentioned_users","getReadBy","message","channel","readBy","Object","keys","state","read","forEach","key","_a","last_read","getTime","updated_at","push","ChannelService","chatClientService","channelsSubject","activeChannelSubject","activeChannelMessagesSubject","hasMoreChannelsSubject","activeChannelSubscriptions","channelListSetter","channels","messageListSetter","messages","channels$","activeChannel$","activeChannelMessages$","pipe","isStreamMessage","isFormatMessageResponse","assign","formatMessage","hasMoreChannels$","setAsActiveChannel","prevActiveChannel","stopWatchForActiveChannelEvents","watchForActiveChannelEvents","m","canSendReadEvents","markRead","loadMoreMessages","_b","_c","_d","activeChnannel","lastMessageId","query","limit","id_lt","members","watchers","data","filters","sort","options","offset","presence","watch","message_limit","last_message_at","queryChannels","subscribe","notification","handleNotification","loadMoreChannels","length","addReaction","reactionType","sendReaction","removeReaction","deleteReaction","sendMessage","preview","addMessageSorted","sendMessageRequest","resendMessage","errorStatusCode","updateMessage","deleteMessage","uploadAttachments","uploads","uploadResults","Promise","allSettled","upload","sendImage","file","sendFile","uploadResult","i","url","value","deleteAttachment","attachmentUpload","deleteImage","deleteFile","autocompleteMembers","activeChannel","values","queryMembers","u","error","stringError","JSON","stringify","parsedError","parse","customNewMessageNotificationHandler","handleNewMessageNotification","customAddedToChannelNotificationHandler","handleAddedToChannelNotification","customRemovedFromChannelNotificationHandler","handleRemovedFromChannelNotification","channelIdToBeRemoved","cid","removeFromChannelList","addChannelFromNotification","watchForChannelEvents","c","messageUpdated","messageReactionEventReceived","latestMessage","messageIndex","find","reaction_counts","reaction_scores","latest_reactions","own_reactions","pinned_at","s","unsubscribe","prevChannels","customNewMessageHandler","handleNewMessage","customChannelHiddenHandler","handleChannelHidden","customChannelDeletedHandler","handleChannelDeleted","customChannelVisibleHandler","handleChannelVisible","customChannelUpdatedHandler","handleChannelUpdate","customChannelTruncatedHandler","handleChannelTruncate","_","channelIndex","capabilites","own_capabilities","indexOf","ThemeService","theme$","defaultDarkModeVariables","theme","darkVariables","customDarkThemeVariables","lightVariables","customLightThemeVariables","deleteVariables","setVariables","_customLightThemeVariables","variables","prevVariables","_customDarkThemeVariables","document","documentElement","style","setProperty","isImageFile","startsWith","endsWith","isImageAttachment","attachment","title_link","og_scrape_url","AttachmentService","channelService","attachmentUploadInProgressCounterSubject","attachmentUploadsSubject","attachmentUploadInProgressCounter$","attachmentUploads$","resetAttachmentUploads","filesSelected","fileList","imageFiles","dataFiles","Array","from","f","createPreview","newUploads","retryAttachmentUpload","attachmentUploads","mapToAttachments","r","fallback","image_url","asset_url","title","file_size","size","createFromAttachments","img_url","thumb_url","reader","FileReader","onload","previewUri","target","readAsDataURL","en","streamChat","Cancel","Close","Delete","Delivered","Flag","Mute","New","Pin","Reply","Search","Send","Thread","Unmute","Unpin","live","failed","retry","test","StreamI18nService","translteService","setTranslation","lang","overrides","defaultLang","TranslateService","AvatarComponent","isLoaded","isError","initials","toString","charAt","ɵcmp","NgIf","selector","templateUrl","styleUrls","imageUrl","IconComponent","TranslateDirective","styles","icon","LoadingIndicatorComponent","color","NgStyle","textareaInjectionToken","TextareaDirective","viewContainerRef","valueChange","send","userMentions","subscriptions","unpropagatedChanges","ngOnChanges","changes","componentRef","instance","areMentionsEnabled","mentionAutocompleteItemTemplate","mentionScope","changesToPropagate","ViewContainerRef","ɵdir","MessageInputConfigService","isFileUploadEnabled","isMultipleFileUploadEnabled","AttachmentPreviewListComponent","attachmentService","trackByFile","item","NgForOf","AsyncPipe","MessageInputComponent","configService","textareaType","componentFactoryResolver","cdRef","messageUpdate","textareaValue","isViewInited","counter","hideNotification","capabilities","isFileUploadAuthorized","canSendLinks","canSendMessages","detectChanges","initTextarea","appSettings","acceptedFileTypes","ngAfterViewInit","isUpdate","ngOnDestroy","messageSent","attachmentUploadInProgressCounter","containsLinks","emit","accept","join","areAttachemntsValid","clearFileInput","fileInput","nativeElement","textareaRef","textareaAnchor","componentFactory","resolveComponentFactory","createComponent","isValid","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_11","hasBlockedExtension","hasBlockedMimeType","hasNotAllowedExtension","hasNotAllowedMimeType","image_upload_config","blocked_file_extensions","ext","blocked_mime_types","allowed_file_extensions","allowed_mime_types","file_upload_config","ComponentFactoryResolver","ChangeDetectorRef","TranslatePipe","providers","Type","decorators","static","ModalComponent","isOpen","isOpenChange","watchForEscPress","close","stopWatchForEscPress","window","removeEventListener","watchForOutsideClicks","content","contains","addEventListener","stopWatchForOutsideClicks","NotificationComponent","NotificationListComponent","trackByItem","MessageActionsBoxComponent","isMine","enabledActions","displayedActionsCount","isEditing","isEditModalOpen","modalClosed","isQuoteVisible","isEditVisible","isDeleteVisible","isMuteVisible","isFlagVisible","isPinVisible","pinClicked","alert","flagClicked","err","muteClicked","quoteClicked","editClicked","sendClicked","messageInput","deleteClicked","NgTemplateOutlet","messageInputTemplate","ChannelComponent","isError$","isInitializing$","getDeviceWidth","width","innerWidth","device","ChannelListToggleService","isOpenSubject","isOpen$","open","toggle","setMenuElement","element","menuElement","channelSelected","eventHandler","ChannelHeaderComponent","channelListToggleService","canReceiveConnectEvents","toggleMenu","stopPropagation","memberCountParam","memberCount","member_count","watcherCountParam","watcherCount","watcher_count","ChannelPreviewComponent","isActive","isUnread","ngOnInit","setLatestMessage","countUnread","handleMessageEvent","bind","avatarImage","image","avatarName","deleted_at","ChannelListComponent","isLoadingMoreChannels","container","trackByChannelId","customChannelPreviewTemplate","extend","parseDate","date","parsedTime","getReadByText","outStr","slicedArr","slice","restLength","lastUser","commaSeparatedUsers","emojiReactionsMapping","like","angry","love","haha","wow","sad","MessageReactionsComponent","messageReactionCounts","isSelectorOpen","isSelectorOpenChange","latestReactions","ownReactions","selectorContainer","ngAfterViewChecked","tooltipText","tooltipPositions","setTooltipPosition","existingReactions","k","reactionsCount","reduce","total","count","reactionOptions","getLatestUserByReaction","getEmojiByReaction","getUsersByReaction","showTooltip","currentTooltipTarget","hideTooltip","trackByMessageReaction","react","tooltip","selectorTooltip","getBoundingClientRect","tooltipPosition","x","left","arrowPosition","arrow","ImageLoadService","imageLoad$","AttachmentListComponent","imageLoadService","orderedAttachments","a","isImage","isFile","isCard","trackById","imageLoaded","hasFileSize","Number","isFinite","getFileSize","trimUrl","trimmedUrl","replace","split","MessageComponent","enabledMessageActions","isActionBoxOpen","isReactionSelectorOpen","isPressedOnMobile","visibleMessageActionsCount","messageTextParts","mention","precedingText","substring","isSentByCurrentUser","readByText","lastReadUser","isOnlyReadByMe","isReadByMultipleUsers","isMessageDeliveredAndRead","parsedDate","areOptionsVisible","hasAttachment","hasReactions","textClicked","mentionTemplate","areReactionsEnabled","canReactToMessage","isLastSentMessage","canReceiveReadEvents","TextareaComponent","class","inputChanged","sent","preventDefault","TransliterationService","AutocompleteTextareaComponent","transliterationService","labelKey","mentionTriggerChar","autocompleteConfig","mentions","userMentionConfig","triggerChar","dropUp","returnTrigger","mentionFilter","searchString","items","mentionSelect","itemSelectedFromAutocompleteList","searchTerm$","updateMentionOptions","autocompleteLabel","toLowerCase","includes","autcompleteSearchTermChanged","inputLeft","updateMentionedUsersFromText","request","updatedMentionedUsers","MentionDirective","NgSwitch","NgSwitchCase","getGroupStyles","previousMessage","nextMessage","noGroupByUser","isTopMessage","isOnSameDay","isBottomMessage","date1","date2","getFullYear","getMonth","getDate","MessageListComponent","enabledMessageActionsInput","unreadMessageCount","groupStyles","authorizedMessageActions","isUserScrolledUpThreshold","latestMessageDate","hasNewMessages","isUserScrolledUp","containerHeight","olderMassagesLoaded","oldestMessageDate","isNewMessageSentByUser","setEnabledActions","messages$","currentLatestMessageDate","currentOldestMessageDate","lastSentMessageId","reverse","scrollToBottom","scrollContainer","scrollHeight","preserveScrollbarPosition","trackByMessageId","scrollTop","scrolled","clientHeight","action","isAuthorized","messageTemplate","StreamAvatarModule","ɵmod","ɵinj","declarations","imports","exports","StreamChatModule","StreamAutocompleteTextareaModule","provide","useValue","StreamTextareaModule"],"mappings":"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","sourcesContent":["import { __awaiter } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { Injectable, Component, Input, InjectionToken, EventEmitter, Directive, Output, Inject, ViewChild, HostBinding, NgModule } from '@angular/core';\nimport { BehaviorSubject, ReplaySubject, of, Subject } from 'rxjs';\nimport { StreamChat } from 'stream-chat';\nimport { map, first, catchError, startWith, distinctUntilChanged, filter, debounceTime, tap } from 'rxjs/operators';\nimport { v4 } from 'uuid';\nimport * as i10 from '@ngx-translate/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport prettybytes from 'pretty-bytes';\nimport transliterate from '@stream-io/transliterate';\nimport * as i5 from 'angular-mentions';\nimport { MentionModule } from 'angular-mentions';\n\nconst version = '2.6.2';\n\nclass NotificationService {\n    constructor() {\n        this.notificationsSubject = new BehaviorSubject([]);\n        this.notifications$ = this.notificationsSubject.asObservable();\n    }\n    addTemporaryNotification(text, type = 'error', timeout = 5000, translateParams) {\n        this.addNotification(text, type, translateParams);\n        const id = setTimeout(() => this.removeNotification(text), timeout);\n        return () => {\n            clearTimeout(id);\n            this.removeNotification(text);\n        };\n    }\n    addPermanentNotification(text, type = 'error', translateParams) {\n        this.addNotification(text, type, translateParams);\n        return () => this.removeNotification(text);\n    }\n    addNotification(text, type, translateParams) {\n        this.notificationsSubject.next([\n            ...this.notificationsSubject.getValue(),\n            { text, type, translateParams },\n        ]);\n    }\n    removeNotification(text) {\n        const notifications = this.notificationsSubject.getValue();\n        const index = notifications.findIndex((n) => n.text === text);\n        if (index === -1) {\n            return;\n        }\n        notifications.splice(index, 1);\n        this.notificationsSubject.next([...notifications]);\n    }\n}\nNotificationService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nNotificationService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return []; } });\n\nclass ChatClientService {\n    constructor(ngZone, notificationService) {\n        this.ngZone = ngZone;\n        this.notificationService = notificationService;\n        this.notificationSubject = new ReplaySubject(1);\n        this.connectionStateSubject = new ReplaySubject(1);\n        this.appSettingsSubject = new BehaviorSubject(undefined);\n        this.notification$ = this.notificationSubject.asObservable();\n        this.connectionState$ = this.connectionStateSubject.asObservable();\n        this.appSettings$ = this.appSettingsSubject.asObservable();\n    }\n    init(apiKey, userId, userToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.chatClient = StreamChat.getInstance(apiKey);\n            yield this.ngZone.runOutsideAngular(() => __awaiter(this, void 0, void 0, function* () {\n                yield this.chatClient.connectUser({ id: userId }, userToken);\n                this.chatClient.setUserAgent(`stream-chat-angular-${version}-${this.chatClient.getUserAgent()}`);\n                this.chatClient.getAppSettings;\n            }));\n            this.appSettingsSubject.next(undefined);\n            this.chatClient.on((e) => {\n                this.notificationSubject.next({\n                    eventType: e.type,\n                    event: e,\n                });\n            });\n            let removeNotification;\n            this.chatClient.on('connection.changed', (e) => {\n                this.ngZone.run(() => {\n                    const isOnline = e.online;\n                    if (isOnline) {\n                        if (removeNotification) {\n                            removeNotification();\n                        }\n                    }\n                    else {\n                        removeNotification =\n                            this.notificationService.addPermanentNotification('streamChat.Connection failure, reconnecting now...');\n                    }\n                    this.connectionStateSubject.next(isOnline ? 'online' : 'offline');\n                });\n            });\n        });\n    }\n    getAppSettings() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.appSettingsSubject.getValue()) {\n                return;\n            }\n            const settings = yield this.chatClient.getAppSettings();\n            this.appSettingsSubject.next(settings.app || {});\n        });\n    }\n    flagMessage(messageId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.chatClient.flagMessage(messageId);\n        });\n    }\n    autocompleteUsers(searchTerm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!searchTerm) {\n                return [];\n            }\n            const result = yield this.chatClient.queryUsers({\n                $or: [\n                    { id: { $autocomplete: searchTerm } },\n                    { name: { $autocomplete: searchTerm } },\n                ],\n                id: { $ne: this.chatClient.userID },\n            });\n            return result.users;\n        });\n    }\n}\nChatClientService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChatClientService, deps: [{ token: i0.NgZone }, { token: NotificationService }], target: i0.ɵɵFactoryTarget.Injectable });\nChatClientService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChatClientService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChatClientService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: NotificationService }]; } });\n\nconst createMessagePreview = (user, text, attachments, mentionedUsers) => {\n    const clientSideId = `${user.id}-${v4()}`;\n    return {\n        __html: text,\n        created_at: new Date(),\n        html: text,\n        id: clientSideId,\n        reactions: [],\n        status: 'sending',\n        text,\n        type: 'regular',\n        user,\n        attachments,\n        mentioned_users: mentionedUsers,\n    };\n};\n\nconst getReadBy = (message, channel) => {\n    const readBy = [];\n    Object.keys(channel.state.read).forEach((key) => {\n        var _a;\n        if (channel.state.read[key].last_read.getTime() >=\n            message.updated_at.getTime() &&\n            ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id) !== key) {\n            readBy.push(channel.state.read[key].user);\n        }\n    });\n    return readBy;\n};\n\nclass ChannelService {\n    constructor(chatClientService, ngZone) {\n        this.chatClientService = chatClientService;\n        this.ngZone = ngZone;\n        this.channelsSubject = new BehaviorSubject(undefined);\n        this.activeChannelSubject = new BehaviorSubject(undefined);\n        this.activeChannelMessagesSubject = new BehaviorSubject([]);\n        this.hasMoreChannelsSubject = new ReplaySubject(1);\n        this.activeChannelSubscriptions = [];\n        this.channelListSetter = (channels) => {\n            this.channelsSubject.next(channels);\n        };\n        this.messageListSetter = (messages) => {\n            this.activeChannelMessagesSubject.next(messages);\n        };\n        this.channels$ = this.channelsSubject.asObservable();\n        this.activeChannel$ = this.activeChannelSubject.asObservable();\n        this.activeChannelMessages$ = this.activeChannelMessagesSubject.pipe(map((messages) => {\n            const channel = this.activeChannelSubject.getValue();\n            return messages.map((message) => {\n                if (this.isStreamMessage(message) &&\n                    this.isFormatMessageResponse(message)) {\n                    return message;\n                }\n                else if (this.isFormatMessageResponse(message)) {\n                    return Object.assign(Object.assign({}, message), { readBy: getReadBy(message, channel) });\n                }\n                else {\n                    const formatMessage = this.formatMessage(message);\n                    return Object.assign(Object.assign({}, formatMessage), { readBy: getReadBy(formatMessage, channel) });\n                }\n            });\n        }));\n        this.hasMoreChannels$ = this.hasMoreChannelsSubject.asObservable();\n    }\n    setAsActiveChannel(channel) {\n        const prevActiveChannel = this.activeChannelSubject.getValue();\n        this.stopWatchForActiveChannelEvents(prevActiveChannel);\n        this.watchForActiveChannelEvents(channel);\n        this.activeChannelSubject.next(channel);\n        channel.state.messages.forEach((m) => {\n            m.readBy = getReadBy(m, channel);\n        });\n        if (this.canSendReadEvents) {\n            void channel.markRead();\n        }\n        this.activeChannelMessagesSubject.next([...channel.state.messages]);\n    }\n    loadMoreMessages() {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            const activeChnannel = this.activeChannelSubject.getValue();\n            const lastMessageId = (_a = this.activeChannelMessagesSubject.getValue()[0]) === null || _a === void 0 ? void 0 : _a.id;\n            yield (activeChnannel === null || activeChnannel === void 0 ? void 0 : activeChnannel.query({\n                messages: { limit: 25, id_lt: lastMessageId },\n                members: { limit: 0 },\n                watchers: { limit: 0 },\n            }));\n            if (((_b = activeChnannel === null || activeChnannel === void 0 ? void 0 : activeChnannel.data) === null || _b === void 0 ? void 0 : _b.id) ===\n                ((_d = (_c = this.activeChannelSubject.getValue()) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.id)) {\n                this.activeChannelMessagesSubject.next([\n                    ...activeChnannel.state.messages,\n                ]);\n            }\n        });\n    }\n    init(filters, sort, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.filters = filters;\n            this.options = options || {\n                offset: 0,\n                limit: 25,\n                state: true,\n                presence: true,\n                watch: true,\n                message_limit: 25,\n            };\n            this.sort = sort || { last_message_at: -1, updated_at: -1 };\n            yield this.queryChannels();\n            this.chatClientService.notification$.subscribe((notification) => void this.handleNotification(notification));\n        });\n    }\n    loadMoreChannels() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.options.offset = this.channels.length;\n            yield this.queryChannels();\n        });\n    }\n    addReaction(messageId, reactionType) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield ((_a = this.activeChannelSubject.getValue()) === null || _a === void 0 ? void 0 : _a.sendReaction(messageId, {\n                type: reactionType,\n            }));\n        });\n    }\n    removeReaction(messageId, reactionType) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield ((_a = this.activeChannelSubject\n                .getValue()) === null || _a === void 0 ? void 0 : _a.deleteReaction(messageId, reactionType));\n        });\n    }\n    sendMessage(text, attachments = [], mentionedUsers = []) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const preview = createMessagePreview(this.chatClientService.chatClient.user, text, attachments, mentionedUsers);\n            const channel = this.activeChannelSubject.getValue();\n            preview.readBy = [];\n            channel.state.addMessageSorted(preview, true);\n            yield this.sendMessageRequest(preview);\n        });\n    }\n    resendMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const channel = this.activeChannelSubject.getValue();\n            channel.state.addMessageSorted(Object.assign(Object.assign({}, message), { errorStatusCode: undefined, status: 'sending' }), true);\n            yield this.sendMessageRequest(message);\n        });\n    }\n    updateMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.chatClientService.chatClient.updateMessage(message);\n        });\n    }\n    deleteMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.chatClientService.chatClient.deleteMessage(message.id);\n        });\n    }\n    uploadAttachments(uploads) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            const channel = this.activeChannelSubject.getValue();\n            const uploadResults = yield Promise.allSettled(uploads.map((upload) => upload.type === 'image'\n                ? channel.sendImage(upload.file)\n                : channel.sendFile(upload.file)));\n            uploadResults.forEach((uploadResult, i) => {\n                const file = uploads[i].file;\n                const type = uploads[i].type;\n                if (uploadResult.status === 'fulfilled') {\n                    result.push({\n                        file,\n                        type,\n                        state: 'success',\n                        url: uploadResult.value.file,\n                    });\n                }\n                else {\n                    result.push({ file, type, state: 'error' });\n                }\n            });\n            return result;\n        });\n    }\n    deleteAttachment(attachmentUpload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const channel = this.activeChannelSubject.getValue();\n            yield (attachmentUpload.type === 'image'\n                ? channel.deleteImage(attachmentUpload.url)\n                : channel.deleteFile(attachmentUpload.url));\n        });\n    }\n    autocompleteMembers(searchTerm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const activeChannel = this.activeChannelSubject.getValue();\n            if (!activeChannel) {\n                return [];\n            }\n            if (Object.keys(activeChannel.state.members).length <= 100) {\n                return Object.values(activeChannel.state.members).filter((m) => { var _a; return ((_a = m.user) === null || _a === void 0 ? void 0 : _a.id) !== this.chatClientService.chatClient.userID; });\n            }\n            else {\n                if (!searchTerm) {\n                    return [];\n                }\n                const result = yield activeChannel.queryMembers({\n                    name: { $autocomplete: searchTerm },\n                    id: { $ne: this.chatClientService.chatClient.userID },\n                });\n                return Object.values(result.members);\n            }\n        });\n    }\n    sendMessageRequest(preview) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const channel = this.activeChannelSubject.getValue();\n            this.activeChannelMessagesSubject.next([...channel.state.messages]);\n            try {\n                yield channel.sendMessage({\n                    text: preview.text,\n                    attachments: preview.attachments,\n                    mentioned_users: (_a = preview.mentioned_users) === null || _a === void 0 ? void 0 : _a.map((u) => u.id),\n                    id: preview.id,\n                });\n            }\n            catch (error) {\n                const stringError = JSON.stringify(error);\n                const parsedError = stringError\n                    ? JSON.parse(stringError)\n                    : {};\n                channel.state.addMessageSorted(Object.assign(Object.assign({}, preview), { errorStatusCode: parsedError.status || undefined, status: 'failed' }), true);\n                this.activeChannelMessagesSubject.next([...channel.state.messages]);\n            }\n        });\n    }\n    handleNotification(notification) {\n        return __awaiter(this, void 0, void 0, function* () {\n            switch (notification.eventType) {\n                case 'notification.message_new': {\n                    yield this.ngZone.run(() => __awaiter(this, void 0, void 0, function* () {\n                        if (this.customNewMessageNotificationHandler) {\n                            this.customNewMessageNotificationHandler(notification, this.channelListSetter);\n                        }\n                        else {\n                            yield this.handleNewMessageNotification(notification);\n                        }\n                    }));\n                    break;\n                }\n                case 'notification.added_to_channel': {\n                    yield this.ngZone.run(() => __awaiter(this, void 0, void 0, function* () {\n                        if (this.customAddedToChannelNotificationHandler) {\n                            this.customAddedToChannelNotificationHandler(notification, this.channelListSetter);\n                        }\n                        else {\n                            yield this.handleAddedToChannelNotification(notification);\n                        }\n                    }));\n                    break;\n                }\n                case 'notification.removed_from_channel': {\n                    this.ngZone.run(() => {\n                        if (this.customRemovedFromChannelNotificationHandler) {\n                            this.customRemovedFromChannelNotificationHandler(notification, this.channelListSetter);\n                        }\n                        else {\n                            this.handleRemovedFromChannelNotification(notification);\n                        }\n                    });\n                }\n            }\n        });\n    }\n    handleRemovedFromChannelNotification(notification) {\n        const channelIdToBeRemoved = notification.event.channel.cid;\n        this.removeFromChannelList(channelIdToBeRemoved);\n    }\n    handleNewMessageNotification(notification) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.addChannelFromNotification(notification);\n        });\n    }\n    handleAddedToChannelNotification(notification) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.addChannelFromNotification(notification);\n        });\n    }\n    addChannelFromNotification(notification) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const channel = this.chatClientService.chatClient.channel((_a = notification.event.channel) === null || _a === void 0 ? void 0 : _a.type, (_b = notification.event.channel) === null || _b === void 0 ? void 0 : _b.id);\n            yield channel.watch();\n            this.watchForChannelEvents(channel);\n            this.channelsSubject.next([\n                channel,\n                ...(this.channelsSubject.getValue() || []),\n            ]);\n        });\n    }\n    removeFromChannelList(cid) {\n        const channels = this.channels.filter((c) => c.cid !== cid);\n        if (channels.length < this.channels.length) {\n            this.channelsSubject.next(channels);\n            if (this.activeChannelSubject.getValue().cid === cid) {\n                this.setAsActiveChannel(channels[0]);\n            }\n        }\n    }\n    watchForActiveChannelEvents(channel) {\n        this.activeChannelSubscriptions.push(channel.on('message.new', () => {\n            this.ngZone.run(() => {\n                this.activeChannelMessagesSubject.next([...channel.state.messages]);\n                this.activeChannel$.pipe(first()).subscribe((c) => {\n                    if (this.canSendReadEvents) {\n                        void (c === null || c === void 0 ? void 0 : c.markRead());\n                    }\n                });\n            });\n        }));\n        this.activeChannelSubscriptions.push(channel.on('message.updated', (event) => this.messageUpdated(event)));\n        this.activeChannelSubscriptions.push(channel.on('message.deleted', (event) => this.messageUpdated(event)));\n        this.activeChannelSubscriptions.push(channel.on('reaction.new', (e) => this.messageReactionEventReceived(e)));\n        this.activeChannelSubscriptions.push(channel.on('reaction.deleted', (e) => this.messageReactionEventReceived(e)));\n        this.activeChannelSubscriptions.push(channel.on('reaction.updated', (e) => this.messageReactionEventReceived(e)));\n        this.activeChannelSubscriptions.push(channel.on('message.read', (e) => {\n            this.ngZone.run(() => {\n                let latestMessage;\n                this.activeChannelMessages$.pipe(first()).subscribe((messages) => {\n                    latestMessage = messages[messages.length - 1];\n                });\n                if (!latestMessage || !e.user) {\n                    return;\n                }\n                latestMessage.readBy = getReadBy(latestMessage, channel);\n                this.activeChannelMessagesSubject.next(this.activeChannelMessagesSubject.getValue());\n            });\n        }));\n    }\n    messageUpdated(event) {\n        this.ngZone.run(() => {\n            const messages = this.activeChannelMessagesSubject.getValue();\n            const messageIndex = messages.findIndex((m) => { var _a; return m.id === ((_a = event.message) === null || _a === void 0 ? void 0 : _a.id); });\n            if (messageIndex !== -1 && event.message) {\n                messages[messageIndex] = event.message;\n                this.activeChannelMessagesSubject.next([...messages]);\n            }\n        });\n    }\n    messageReactionEventReceived(e) {\n        this.ngZone.run(() => {\n            var _a, _b, _c, _d;\n            let messages;\n            this.activeChannelMessages$\n                .pipe(first())\n                .subscribe((m) => (messages = m));\n            const message = messages.find((m) => { var _a; return m.id === ((_a = e === null || e === void 0 ? void 0 : e.message) === null || _a === void 0 ? void 0 : _a.id); });\n            if (!message) {\n                return;\n            }\n            message.reaction_counts = Object.assign({}, (_a = e.message) === null || _a === void 0 ? void 0 : _a.reaction_counts);\n            message.reaction_scores = Object.assign({}, (_b = e.message) === null || _b === void 0 ? void 0 : _b.reaction_scores);\n            message.latest_reactions = [...(((_c = e.message) === null || _c === void 0 ? void 0 : _c.latest_reactions) || [])];\n            message.own_reactions = [...(((_d = e.message) === null || _d === void 0 ? void 0 : _d.own_reactions) || [])];\n            this.activeChannelMessagesSubject.next([...messages]);\n        });\n    }\n    formatMessage(message) {\n        return Object.assign(Object.assign({}, message), { \n            // parse the date..\n            pinned_at: message.pinned_at ? new Date(message.pinned_at) : null, created_at: message.created_at\n                ? new Date(message.created_at)\n                : new Date(), updated_at: message.updated_at\n                ? new Date(message.updated_at)\n                : new Date(), status: message.status || 'received' });\n    }\n    isStreamMessage(message) {\n        return !!message.readBy;\n    }\n    isFormatMessageResponse(message) {\n        return message.created_at instanceof Date;\n    }\n    stopWatchForActiveChannelEvents(channel) {\n        if (!channel) {\n            return;\n        }\n        this.activeChannelSubscriptions.forEach((s) => s.unsubscribe());\n        this.activeChannelSubscriptions = [];\n    }\n    queryChannels() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const channels = yield this.chatClientService.chatClient.queryChannels(this.filters, this.sort, this.options);\n                channels.forEach((c) => this.watchForChannelEvents(c));\n                const prevChannels = this.channelsSubject.getValue() || [];\n                this.channelsSubject.next([...prevChannels, ...channels]);\n                if (channels.length > 0 && !this.activeChannelSubject.getValue()) {\n                    this.setAsActiveChannel(channels[0]);\n                }\n                this.hasMoreChannelsSubject.next(channels.length >= this.options.limit);\n            }\n            catch (error) {\n                this.channelsSubject.error(error);\n            }\n        });\n    }\n    watchForChannelEvents(channel) {\n        channel.on((event) => {\n            switch (event.type) {\n                case 'message.new': {\n                    this.ngZone.run(() => {\n                        if (this.customNewMessageHandler) {\n                            this.customNewMessageHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleNewMessage(event, channel);\n                        }\n                    });\n                    break;\n                }\n                case 'channel.hidden': {\n                    this.ngZone.run(() => {\n                        if (this.customChannelHiddenHandler) {\n                            this.customChannelHiddenHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleChannelHidden(event);\n                        }\n                    });\n                    break;\n                }\n                case 'channel.deleted': {\n                    this.ngZone.run(() => {\n                        if (this.customChannelDeletedHandler) {\n                            this.customChannelDeletedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleChannelDeleted(event);\n                        }\n                    });\n                    break;\n                }\n                case 'channel.visible': {\n                    this.ngZone.run(() => {\n                        if (this.customChannelVisibleHandler) {\n                            this.customChannelVisibleHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleChannelVisible(event, channel);\n                        }\n                    });\n                    break;\n                }\n                case 'channel.updated': {\n                    this.ngZone.run(() => {\n                        if (this.customChannelUpdatedHandler) {\n                            this.customChannelUpdatedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleChannelUpdate(event);\n                        }\n                    });\n                    break;\n                }\n                case 'channel.truncated': {\n                    this.ngZone.run(() => {\n                        if (this.customChannelTruncatedHandler) {\n                            this.customChannelTruncatedHandler(event, channel, this.channelListSetter, this.messageListSetter);\n                        }\n                        else {\n                            this.handleChannelTruncate(event);\n                        }\n                    });\n                    break;\n                }\n            }\n        });\n    }\n    handleNewMessage(_, channel) {\n        const channelIndex = this.channels.findIndex((c) => c.cid === channel.cid);\n        this.channels.splice(channelIndex, 1);\n        this.channelsSubject.next([channel, ...this.channels]);\n    }\n    handleChannelHidden(event) {\n        this.removeFromChannelList(event.channel.cid);\n    }\n    handleChannelDeleted(event) {\n        this.removeFromChannelList(event.channel.cid);\n    }\n    handleChannelVisible(event, channel) {\n        if (!this.channels.find((c) => c.cid === event.cid)) {\n            this.ngZone.run(() => this.channelsSubject.next([...this.channels, channel]));\n        }\n    }\n    handleChannelUpdate(event) {\n        var _a, _b;\n        const channelIndex = this.channels.findIndex((c) => c.cid === event.channel.cid);\n        if (channelIndex !== -1) {\n            this.channels[channelIndex].data = event.channel;\n            this.channelsSubject.next([...this.channels]);\n            if (((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid) === ((_b = this.activeChannelSubject.getValue()) === null || _b === void 0 ? void 0 : _b.cid)) {\n                const channel = this.activeChannelSubject.getValue();\n                channel.data = event.channel;\n                this.activeChannelSubject.next(channel);\n            }\n        }\n    }\n    handleChannelTruncate(event) {\n        var _a, _b;\n        const channelIndex = this.channels.findIndex((c) => c.cid === event.channel.cid);\n        if (channelIndex !== -1) {\n            this.channels[channelIndex].state.messages = [];\n            this.channelsSubject.next([...this.channels]);\n            if (((_a = event.channel) === null || _a === void 0 ? void 0 : _a.cid) === ((_b = this.activeChannelSubject.getValue()) === null || _b === void 0 ? void 0 : _b.cid)) {\n                const channel = this.activeChannelSubject.getValue();\n                channel.state.messages = [];\n                this.activeChannelSubject.next(channel);\n                this.activeChannelMessagesSubject.next([]);\n            }\n        }\n    }\n    get channels() {\n        return this.channelsSubject.getValue() || [];\n    }\n    get canSendReadEvents() {\n        var _a;\n        const channel = this.activeChannelSubject.getValue();\n        if (!channel) {\n            return false;\n        }\n        const capabilites = (_a = channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n        return capabilites.indexOf('read-events') !== -1;\n    }\n}\nChannelService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelService, deps: [{ token: ChatClientService }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Injectable });\nChannelService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: ChatClientService }, { type: i0.NgZone }]; } });\n\nclass ThemeService {\n    constructor() {\n        this.theme$ = new BehaviorSubject('light');\n        this.defaultDarkModeVariables = {\n            '--bg-gradient-end': '#101214',\n            '--bg-gradient-start': '#070a0d',\n            '--black': '#ffffff',\n            '--blue-alice': '#00193d',\n            '--border': '#141924',\n            '--button-background': '#ffffff',\n            '--button-text': '#005fff',\n            '--grey': '#7a7a7a',\n            '--grey-gainsboro': '#2d2f2f',\n            '--grey-whisper': '#1c1e22',\n            '--modal-shadow': '#000000',\n            '--overlay': '#00000066',\n            '--overlay-dark': '#ffffffcc',\n            '--shadow-icon': '#00000080',\n            '--targetedMessageBackground': '#302d22',\n            '--transparent': 'transparent',\n            '--white': '#101418',\n            '--white-smoke': '#13151b',\n            '--white-snow': '#070a0d',\n        };\n        this.theme$.subscribe((theme) => {\n            const darkVariables = this.customDarkThemeVariables\n                ? Object.assign(Object.assign({}, this.defaultDarkModeVariables), this.customDarkThemeVariables) : this.defaultDarkModeVariables;\n            const lightVariables = this.customLightThemeVariables\n                ? this.customLightThemeVariables\n                : {};\n            if (theme === 'dark') {\n                this.deleteVariables(lightVariables);\n                this.setVariables(darkVariables);\n            }\n            else {\n                this.deleteVariables(darkVariables);\n                this.setVariables(lightVariables);\n            }\n        });\n    }\n    get customLightThemeVariables() {\n        return this._customLightThemeVariables;\n    }\n    set customLightThemeVariables(variables) {\n        const prevVariables = this.customLightThemeVariables;\n        this.deleteVariables(prevVariables);\n        this._customLightThemeVariables = variables;\n    }\n    get customDarkThemeVariables() {\n        return this._customDarkThemeVariables;\n    }\n    set customDarkThemeVariables(variables) {\n        const prevVariables = this.customDarkThemeVariables;\n        this.deleteVariables(prevVariables);\n        this._customDarkThemeVariables = variables;\n    }\n    deleteVariables(variables) {\n        if (!variables) {\n            return;\n        }\n        Object.keys(variables).forEach((key) => document.documentElement.style.setProperty(key, null));\n    }\n    setVariables(variables) {\n        if (!variables) {\n            return;\n        }\n        Object.keys(variables).forEach((key) => document.documentElement.style.setProperty(key, variables[key]));\n    }\n}\nThemeService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ThemeService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nThemeService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ThemeService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ThemeService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return []; } });\n\nconst isImageFile = (file) => {\n    // photoshop files begin with 'image/'\n    return file.type.startsWith('image/') && !file.type.endsWith('.photoshop');\n};\n\nconst isImageAttachment = (attachment) => {\n    return (attachment.type === 'image' &&\n        !attachment.title_link &&\n        !attachment.og_scrape_url);\n};\n\nclass AttachmentService {\n    constructor(channelService, notificationService) {\n        this.channelService = channelService;\n        this.notificationService = notificationService;\n        this.attachmentUploadInProgressCounterSubject = new BehaviorSubject(0);\n        this.attachmentUploadsSubject = new BehaviorSubject([]);\n        this.attachmentUploadInProgressCounter$ =\n            this.attachmentUploadInProgressCounterSubject.asObservable();\n        this.attachmentUploads$ = this.attachmentUploadsSubject.asObservable();\n    }\n    resetAttachmentUploads() {\n        this.attachmentUploadsSubject.next([]);\n    }\n    filesSelected(fileList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!fileList) {\n                return;\n            }\n            const imageFiles = [];\n            const dataFiles = [];\n            Array.from(fileList).forEach((file) => {\n                if (isImageFile(file)) {\n                    imageFiles.push(file);\n                }\n                else {\n                    dataFiles.push(file);\n                }\n            });\n            imageFiles.forEach((f) => this.createPreview(f));\n            const newUploads = [\n                ...imageFiles.map((file) => ({\n                    file,\n                    state: 'uploading',\n                    type: 'image',\n                })),\n                ...dataFiles.map((file) => ({\n                    file,\n                    state: 'uploading',\n                    type: 'file',\n                })),\n            ];\n            this.attachmentUploadsSubject.next([\n                ...this.attachmentUploadsSubject.getValue(),\n                ...newUploads,\n            ]);\n            yield this.uploadAttachments(newUploads);\n        });\n    }\n    retryAttachmentUpload(file) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const attachmentUploads = this.attachmentUploadsSubject.getValue();\n            const upload = attachmentUploads.find((u) => u.file === file);\n            if (!upload) {\n                return;\n            }\n            upload.state = 'uploading';\n            this.attachmentUploadsSubject.next([...attachmentUploads]);\n            yield this.uploadAttachments([upload]);\n        });\n    }\n    deleteAttachment(upload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const attachmentUploads = this.attachmentUploadsSubject.getValue();\n            if (upload.state === 'success') {\n                try {\n                    yield this.channelService.deleteAttachment(upload);\n                    attachmentUploads.splice(attachmentUploads.indexOf(upload), 1);\n                }\n                catch (error) {\n                    this.notificationService.addTemporaryNotification('streamChat.Error deleting attachment');\n                }\n            }\n            else {\n                attachmentUploads.splice(attachmentUploads.indexOf(upload), 1);\n            }\n            this.attachmentUploadsSubject.next([...attachmentUploads]);\n        });\n    }\n    mapToAttachments() {\n        const attachmentUploads = this.attachmentUploadsSubject.getValue();\n        return attachmentUploads\n            .filter((r) => r.state === 'success')\n            .map((r) => {\n            var _a, _b, _c;\n            const attachment = {\n                type: r.type,\n            };\n            if (r.type === 'image') {\n                attachment.fallback = (_a = r.file) === null || _a === void 0 ? void 0 : _a.name;\n                attachment.image_url = r.url;\n            }\n            else {\n                attachment.asset_url = r.url;\n                attachment.title = (_b = r.file) === null || _b === void 0 ? void 0 : _b.name;\n                attachment.file_size = (_c = r.file) === null || _c === void 0 ? void 0 : _c.size;\n            }\n            return attachment;\n        });\n    }\n    createFromAttachments(attachments) {\n        const attachmentUploads = [];\n        attachments.forEach((attachment) => {\n            if (isImageAttachment(attachment)) {\n                attachmentUploads.push({\n                    url: (attachment.img_url ||\n                        attachment.thumb_url ||\n                        attachment.image_url),\n                    state: 'success',\n                    type: 'image',\n                    file: {\n                        name: attachment.fallback,\n                    },\n                });\n            }\n            else if (attachment.type === 'file') {\n                attachmentUploads.push({\n                    url: attachment.asset_url,\n                    state: 'success',\n                    file: {\n                        name: attachment.title,\n                        size: attachment.file_size,\n                    },\n                    type: 'file',\n                });\n            }\n        });\n        if (attachmentUploads.length > 0) {\n            this.attachmentUploadsSubject.next([\n                ...this.attachmentUploadsSubject.getValue(),\n                ...attachmentUploads,\n            ]);\n        }\n    }\n    createPreview(file) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            var _a;\n            const attachmentUploads = this.attachmentUploadsSubject.getValue();\n            const upload = attachmentUploads.find((upload) => upload.file === file);\n            if (!upload) {\n                return;\n            }\n            upload.previewUri = ((_a = event.target) === null || _a === void 0 ? void 0 : _a.result) || undefined;\n            this.attachmentUploadsSubject.next([...attachmentUploads]);\n        };\n        reader.readAsDataURL(file);\n    }\n    uploadAttachments(uploads) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const attachmentUploads = this.attachmentUploadsSubject.getValue();\n            this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue() + 1);\n            const result = yield this.channelService.uploadAttachments(uploads);\n            result.forEach((r) => {\n                const upload = attachmentUploads.find((upload) => upload.file === r.file);\n                if (!upload) {\n                    if (r.url) {\n                        void this.channelService.deleteAttachment(r);\n                    }\n                    return;\n                }\n                upload.state = r.state;\n                upload.url = r.url;\n                if (upload.state === 'error') {\n                    this.notificationService.addTemporaryNotification(upload.type === 'image'\n                        ? 'streamChat.Error uploading image'\n                        : 'streamChat.Error uploading file');\n                }\n            });\n            this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue() - 1);\n            this.attachmentUploadsSubject.next([...attachmentUploads]);\n        });\n    }\n}\nAttachmentService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentService, deps: [{ token: ChannelService }, { token: NotificationService }], target: i0.ɵɵFactoryTarget.Injectable });\nAttachmentService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: NotificationService }]; } });\n\nconst en = {\n    streamChat: {\n        '1 reply': '1 reply',\n        'Attach files': 'Attach files',\n        Cancel: 'Cancel',\n        'Channel Missing': 'Channel Missing',\n        Close: 'Close',\n        'Close emoji picker': 'Close emoji picker',\n        'Commands matching': 'Commands matching',\n        'Connection failure, reconnecting now...': 'Connection failure, reconnecting now...',\n        Delete: 'Delete',\n        Delivered: 'Delivered',\n        'Edit Message': 'Edit Message',\n        'Edit message request failed': 'Edit message request failed',\n        'Emoji matching': 'Emoji matching',\n        'Empty message...': 'Empty message...',\n        'Error adding flag': 'Error adding flag',\n        'Error connecting to chat, refresh the page to try again.': 'Error connecting to chat, refresh the page to try again.',\n        'Error deleting message': 'Error deleting message',\n        'Error muting a user ...': 'Error muting a user ...',\n        'Error pinning message': 'Error pinning message',\n        'Error removing message pin': 'Error removing message pin',\n        'Error unmuting a user ...': 'Error unmuting a user ...',\n        'Error uploading file': 'Error uploading file',\n        'Error uploading image': 'Error uploading image',\n        'Error deleting attachment': 'Error deleting attachment',\n        'Error · Unsent': 'Error · Unsent',\n        'Error: {{ errorMessage }}': 'Error: {{ errorMessage }}',\n        Flag: 'Flag',\n        'Message Failed': 'Message Failed',\n        'Message Failed · Unauthorized': 'Message Failed · Unauthorized',\n        'Message deleted': 'Message deleted',\n        'Message has been successfully flagged': 'Message has been successfully flagged',\n        'Message pinned': 'Message pinned',\n        Mute: 'Mute',\n        New: 'New',\n        'New Messages!': 'New Messages!',\n        'No results found': 'No results found',\n        'Nothing yet...': 'Nothing yet...',\n        'Only visible to you': 'Only visible to you',\n        'Open emoji picker': 'Open emoji picker',\n        'People matching': 'People matching',\n        'Pick your emoji': 'Pick your emoji',\n        Pin: 'Pin',\n        'Pinned by': 'Pinned by',\n        Reply: 'Reply',\n        'Reply to Message': 'Reply to Message',\n        Search: 'Search',\n        'Searching...': 'Searching...',\n        Send: 'Send',\n        'Send message request failed': 'Send message request failed',\n        'Sending...': 'Sending...',\n        'Slow Mode ON': 'Slow Mode ON',\n        'Start of a new thread': 'Start of a new thread',\n        'This message was deleted...': 'This message was deleted...',\n        Thread: 'Thread',\n        'Type your message': 'Type your message',\n        Unmute: 'Unmute',\n        Unpin: 'Unpin',\n        'Wait until all attachments have uploaded': 'Wait until all attachments have uploaded',\n        'You have no channels currently': 'You have no channels currently',\n        \"You've reached the maximum number of files\": \"You've reached the maximum number of files\",\n        live: 'live',\n        'this content could not be displayed': 'this content could not be displayed',\n        '{{ commaSeparatedUsers }} and {{ moreCount }} more': '{{ commaSeparatedUsers }} and {{ moreCount }} more',\n        '{{ commaSeparatedUsers }}, and {{ lastUser }}': '{{ commaSeparatedUsers }}, and {{ lastUser }}',\n        '{{ firstUser }} and {{ secondUser }}': '{{ firstUser }} and {{ secondUser }}',\n        '{{ imageCount }} more': '{{ imageCount }} more',\n        '{{ memberCount }} members': '{{ memberCount }} members',\n        '{{ replyCount }} replies': '{{ replyCount }} replies',\n        '{{ user }} has been muted': '{{ user }} has been muted',\n        '{{ user }} has been unmuted': '{{ user }} has been unmuted',\n        '{{ watcherCount }} online': '{{ watcherCount }} online',\n        '🏙 Attachment...': '🏙 Attachment...',\n        'Connection error': 'Connection error',\n        'Load more': 'Load more',\n        failed: 'failed',\n        retry: 'retry',\n        test: 'success',\n        'Sending links is not allowed in this conversation': 'Sending links is not allowed in this conversation',\n        \"You can't send messages in this channel\": \"You can't send messages in this channel\",\n        'Unsupported file type: {{type}}': 'Unsupported file type: {{type}}',\n    },\n};\n\nclass StreamI18nService {\n    constructor(translteService) {\n        this.translteService = translteService;\n    }\n    setTranslation(lang = 'en', overrides) {\n        if (!this.translteService.defaultLang) {\n            this.translteService.defaultLang = lang;\n        }\n        this.translteService.setTranslation(lang, { streamChat: Object.assign(Object.assign({}, en.streamChat), overrides) }, true);\n    }\n}\nStreamI18nService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamI18nService, deps: [{ token: i10.TranslateService }], target: i0.ɵɵFactoryTarget.Injectable });\nStreamI18nService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamI18nService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamI18nService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i10.TranslateService }]; } });\n\nclass AvatarComponent {\n    constructor() {\n        this.size = 32;\n        this.isLoaded = false;\n        this.isError = false;\n    }\n    get initials() {\n        var _a;\n        return (((_a = this.name) === null || _a === void 0 ? void 0 : _a.toString()) || '').charAt(0);\n    }\n}\nAvatarComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AvatarComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nAvatarComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: AvatarComponent, selector: \"stream-avatar\", inputs: { name: \"name\", imageUrl: \"imageUrl\", size: \"size\" }, ngImport: i0, template: \"<div\\n  class=\\\"str-chat__avatar str-chat__avatar--circle\\\"\\n  title=\\\"{{ name }}\\\"\\n  [style]=\\\"{\\n    flexBasis: size + 'px',\\n    fontSize: size / 2 + 'px',\\n    height: size + 'px',\\n    lineHeight: size + 'px',\\n    width: size + 'px'\\n  }\\\"\\n>\\n  <img\\n    *ngIf=\\\"imageUrl && !isError; else fallback\\\"\\n    class=\\\"str-chat__avatar-image str-chat__avatar-image{{\\n      isLoaded ? ' str-chat__avatar-image--loaded' : ''\\n    }}\\\"\\n    src=\\\"{{ imageUrl }}\\\"\\n    alt=\\\"{{ initials }}\\\"\\n    data-testid=\\\"avatar-img\\\"\\n    (load)=\\\"isLoaded = true\\\"\\n    (error)=\\\"isError = true\\\"\\n    [style]=\\\"{\\n      flexBasis: size + 'px',\\n      height: size + 'px',\\n      objectFit: 'cover',\\n      width: size + 'px'\\n    }\\\"\\n  />\\n  <ng-template #fallback>\\n    <div data-testid=\\\"fallback-img\\\" class=\\\"str-chat__avatar-fallback\\\">\\n      {{ initials }}\\n    </div>\\n  </ng-template>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AvatarComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-avatar',\n                    templateUrl: './avatar.component.html',\n                    styleUrls: ['./avatar.component.scss'],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { name: [{\n                type: Input\n            }], imageUrl: [{\n                type: Input\n            }], size: [{\n                type: Input\n            }] } });\n\nclass IconComponent {\n    constructor() { }\n}\nIconComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: IconComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nIconComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: IconComponent, selector: \"stream-icon\", inputs: { icon: \"icon\", size: \"size\" }, ngImport: i0, template: \"<svg\\n  data-testid=\\\"action-icon\\\"\\n  *ngIf=\\\"icon === 'action-icon'\\\"\\n  height=\\\"4\\\"\\n  viewBox=\\\"0 0 11 4\\\"\\n  width=\\\"11\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n>\\n  <path\\n    d=\\\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\\\"\\n    fillRule=\\\"nonzero\\\"\\n  />\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'delivered-icon'\\\"\\n  height=\\\"16\\\"\\n  width=\\\"16\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  data-testid=\\\"delivered-icon\\\"\\n>\\n  <path\\n    d=\\\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\\\"\\n    fill=\\\"#006CFF\\\"\\n    fillRule=\\\"evenodd\\\"\\n  />\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'reaction-icon'\\\"\\n  height=\\\"12\\\"\\n  viewBox=\\\"0 0 12 12\\\"\\n  width=\\\"12\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  data-testid=\\\"reaction-icon\\\"\\n>\\n  <g clipRule=\\\"evenodd\\\" fillRule=\\\"evenodd\\\">\\n    <path\\n      d=\\\"M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z\\\"\\n    ></path>\\n    <path\\n      d=\\\"M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z\\\"\\n    ></path>\\n  </g>\\n</svg>\\n<svg\\n  data-testid=\\\"connection-error\\\"\\n  *ngIf=\\\"icon === 'connection-error'\\\"\\n  width=\\\"78px\\\"\\n  height=\\\"78px\\\"\\n  viewBox=\\\"0 0 78 78\\\"\\n  version=\\\"1.1\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n>\\n  <!-- Generator: Sketch 52.6 (67491) - http://www.bohemiancoding.com/sketch -->\\n  <title>Combined Shape</title>\\n  <desc>Created with Sketch.</desc>\\n  <g\\n    id=\\\"Interactions\\\"\\n    stroke=\\\"none\\\"\\n    stroke-width=\\\"1\\\"\\n    fill=\\\"none\\\"\\n    fill-rule=\\\"evenodd\\\"\\n  >\\n    <g\\n      id=\\\"Connection-Error-_-Connectivity\\\"\\n      transform=\\\"translate(-270.000000, -30.000000)\\\"\\n      fill=\\\"#CF1F25\\\"\\n    >\\n      <g\\n        id=\\\"109-network-connection\\\"\\n        transform=\\\"translate(270.000000, 30.000000)\\\"\\n      >\\n        <path\\n          d=\\\"M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z\\\"\\n          id=\\\"Combined-Shape\\\"\\n        ></path>\\n      </g>\\n    </g>\\n  </g>\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'send'\\\"\\n  data-testid=\\\"send\\\"\\n  height=\\\"17\\\"\\n  viewBox=\\\"0 0 18 17\\\"\\n  width=\\\"18\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n>\\n  <title translate>streamChat.Send</title>\\n  <path\\n    d=\\\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\\\"\\n    fill=\\\"#006cff\\\"\\n    fillRule=\\\"evenodd\\\"\\n  />\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'file-upload'\\\"\\n  data-testid=\\\"file-upload\\\"\\n  height=\\\"14\\\"\\n  width=\\\"14\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n>\\n  <title translate>streamChat.Attach files</title>\\n  <path\\n    d=\\\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\\\"\\n    fillRule=\\\"nonzero\\\"\\n  />\\n</svg>\\n<svg\\n  data-testid=\\\"retry\\\"\\n  *ngIf=\\\"icon === 'retry'\\\"\\n  width=\\\"22\\\"\\n  height=\\\"20\\\"\\n  viewBox=\\\"0 0 22 20\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n>\\n  <path\\n    d=\\\"M20 5.535V2a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h3.638l-2.975-2.653a8 8 0 1 0 1.884 8.32 1 1 0 1 1 1.886.666A10 10 0 1 1 5.175 1.245c3.901-2.15 8.754-1.462 11.88 1.667L20 5.535z\\\"\\n    fill=\\\"#FFF\\\"\\n    fill-rule=\\\"nonzero\\\"\\n  />\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'close'\\\"\\n  data-testid=\\\"close\\\"\\n  width=\\\"28\\\"\\n  height=\\\"28\\\"\\n  viewBox=\\\"0 0 28 28\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n>\\n  <defs>\\n    <path\\n      d=\\\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\\\"\\n      id=\\\"b\\\"\\n    />\\n    <filter\\n      x=\\\"-30%\\\"\\n      y=\\\"-30%\\\"\\n      width=\\\"160%\\\"\\n      height=\\\"160%\\\"\\n      filterUnits=\\\"objectBoundingBox\\\"\\n      id=\\\"a\\\"\\n    >\\n      <feOffset in=\\\"SourceAlpha\\\" result=\\\"shadowOffsetOuter1\\\" />\\n      <feGaussianBlur\\n        stdDeviation=\\\"2\\\"\\n        in=\\\"shadowOffsetOuter1\\\"\\n        result=\\\"shadowBlurOuter1\\\"\\n      />\\n      <feColorMatrix\\n        values=\\\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\\\"\\n        in=\\\"shadowBlurOuter1\\\"\\n      />\\n    </filter>\\n  </defs>\\n  <g transform=\\\"translate(-451 -1)\\\" fill-rule=\\\"nonzero\\\" fill=\\\"none\\\">\\n    <use fill=\\\"#000\\\" filter=\\\"url(#a)\\\" xlink:href=\\\"#b\\\" />\\n    <use fill=\\\"#FFF\\\" fill-rule=\\\"evenodd\\\" xlink:href=\\\"#b\\\" />\\n  </g>\\n</svg>\\n<svg\\n  *ngIf=\\\"icon === 'file'\\\"\\n  data-testid=\\\"file\\\"\\n  className=\\\"rfu-file-icon--small fa-file-fallback\\\"\\n  [attr.height]=\\\"size || 20\\\"\\n  [attr.width]=\\\"size || 20\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  viewBox=\\\"0 0 384 512\\\"\\n>\\n  <path\\n    d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z\\\"\\n    fill=\\\"#414D54\\\"\\n  />\\n</svg>\\n\", directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i10.TranslateDirective, selector: \"[translate],[ngx-translate]\", inputs: [\"translate\", \"translateParams\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: IconComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-icon',\n                    templateUrl: './icon.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { icon: [{\n                type: Input\n            }], size: [{\n                type: Input\n            }] } });\n\nclass LoadingIndicatorComponent {\n    constructor() {\n        this.size = 15;\n        this.color = '#006CFF';\n    }\n}\nLoadingIndicatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: LoadingIndicatorComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nLoadingIndicatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: LoadingIndicatorComponent, selector: \"stream-loading-indicator\", inputs: { size: \"size\", color: \"color\" }, ngImport: i0, template: \"<div class=\\\"str-chat__loading-indicator\\\">\\n  <svg\\n    [attr.height]=\\\"size\\\"\\n    viewBox=\\\"0 0 30 30\\\"\\n    [attr.width]=\\\"size\\\"\\n    data-testid=\\\"loading-indicator\\\"\\n    xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  >\\n    <defs>\\n      <linearGradient id=\\\"a\\\" x1=\\\"50%\\\" x2=\\\"50%\\\" y1=\\\"0%\\\" y2=\\\"100%\\\">\\n        <stop offset=\\\"0%\\\" stop-color=\\\"#FFF\\\" stop-opacity=\\\"0\\\" />\\n        <stop\\n          data-testid=\\\"stop-color\\\"\\n          offset=\\\"100%\\\"\\n          [attr.stop-color]=\\\"color\\\"\\n          stop-opacity=\\\"1\\\"\\n          [ngStyle]=\\\"{ stopColor: color }\\\"\\n        />\\n      </linearGradient>\\n    </defs>\\n    <path\\n      d=\\\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\\\"\\n      fill=\\\"url(#a)\\\"\\n      fillRule=\\\"evenodd\\\"\\n    />\\n  </svg>\\n</div>\\n\", directives: [{ type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: LoadingIndicatorComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-loading-indicator',\n                    templateUrl: './loading-indicator.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { size: [{\n                type: Input\n            }], color: [{\n                type: Input\n            }] } });\n\nconst textareaInjectionToken = new InjectionToken('textareaInjectionToken');\n\nclass TextareaDirective {\n    constructor(viewContainerRef) {\n        this.viewContainerRef = viewContainerRef;\n        this.value = '';\n        this.valueChange = new EventEmitter();\n        this.send = new EventEmitter();\n        this.userMentions = new EventEmitter();\n        this.subscriptions = [];\n        this.unpropagatedChanges = [];\n    }\n    ngOnChanges(changes) {\n        this.unpropagatedChanges.push(changes);\n        if (!this.componentRef) {\n            return;\n        }\n        if (changes.componentRef) {\n            this.subscriptions.forEach((s) => s.unsubscribe());\n            if (this.componentRef) {\n                this.subscriptions.push(this.componentRef.instance.valueChange.subscribe((value) => this.valueChange.next(value)));\n                this.subscriptions.push(this.componentRef.instance.send.subscribe((value) => this.send.next(value)));\n                if (this.componentRef.instance.userMentions) {\n                    this.subscriptions.push(this.componentRef.instance.userMentions.subscribe((value) => this.userMentions.next(value)));\n                }\n                this.componentRef.instance.areMentionsEnabled = this.areMentionsEnabled;\n                this.componentRef.instance.mentionAutocompleteItemTemplate =\n                    this.mentionAutocompleteItemTemplate;\n                this.componentRef.instance.mentionScope = this.mentionScope;\n                this.componentRef.instance.value = this.value;\n            }\n        }\n        if (changes.areMentionsEnabled) {\n            this.componentRef.instance.areMentionsEnabled = this.areMentionsEnabled;\n        }\n        if (changes.mentionAutocompleteItemTemplate) {\n            this.componentRef.instance.mentionAutocompleteItemTemplate =\n                this.mentionAutocompleteItemTemplate;\n        }\n        if (changes.mentionScope) {\n            this.componentRef.instance.mentionScope = this.mentionScope;\n        }\n        if (changes.value) {\n            this.componentRef.instance.value = this.value;\n        }\n        // ngOnChanges not called for dynamic components since we don't use template binding\n        let changesToPropagate = {};\n        this.unpropagatedChanges.forEach((c) => (changesToPropagate = Object.assign(Object.assign({}, changesToPropagate), c)));\n        // eslint-disable-next-line @angular-eslint/no-lifecycle-call\n        this.componentRef.instance.ngOnChanges(changesToPropagate);\n        this.unpropagatedChanges = [];\n    }\n}\nTextareaDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TextareaDirective, deps: [{ token: i0.ViewContainerRef }], target: i0.ɵɵFactoryTarget.Directive });\nTextareaDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.5\", type: TextareaDirective, selector: \"[streamTextarea]\", inputs: { componentRef: \"componentRef\", areMentionsEnabled: \"areMentionsEnabled\", mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\", mentionScope: \"mentionScope\", value: \"value\" }, outputs: { valueChange: \"valueChange\", send: \"send\", userMentions: \"userMentions\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TextareaDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[streamTextarea]',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }]; }, propDecorators: { componentRef: [{\n                type: Input\n            }], areMentionsEnabled: [{\n                type: Input\n            }], mentionAutocompleteItemTemplate: [{\n                type: Input\n            }], mentionScope: [{\n                type: Input\n            }], value: [{\n                type: Input\n            }], valueChange: [{\n                type: Output\n            }], send: [{\n                type: Output\n            }], userMentions: [{\n                type: Output\n            }] } });\n\nclass MessageInputConfigService {\n    constructor() {\n        this.isFileUploadEnabled = true;\n        this.areMentionsEnabled = true;\n        this.isMultipleFileUploadEnabled = true;\n        this.mentionScope = 'channel';\n    }\n}\nMessageInputConfigService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageInputConfigService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nMessageInputConfigService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageInputConfigService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageInputConfigService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return []; } });\n\nclass AttachmentPreviewListComponent {\n    constructor(attachmentService) {\n        this.attachmentService = attachmentService;\n        this.attachmentUploads$ = this.attachmentService.attachmentUploads$;\n    }\n    retryAttachmentUpload(file) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.attachmentService.retryAttachmentUpload(file);\n        });\n    }\n    deleteAttachment(upload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.attachmentService.deleteAttachment(upload);\n        });\n    }\n    trackByFile(_, item) {\n        return item.file;\n    }\n}\nAttachmentPreviewListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentPreviewListComponent, deps: [{ token: AttachmentService }], target: i0.ɵɵFactoryTarget.Component });\nAttachmentPreviewListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: AttachmentPreviewListComponent, selector: \"stream-attachment-preview-list\", ngImport: i0, template: \"<div class=\\\"rfu-image-previewer\\\">\\n  <ng-container\\n    *ngFor=\\\"\\n      let attachmentUpload of attachmentUploads$ | async;\\n      trackBy: trackByFile\\n    \\\"\\n  >\\n    <div\\n      *ngIf=\\\"attachmentUpload.type === 'image'\\\"\\n      class=\\\"rfu-image-previewer__image\\\"\\n      [class.rfu-image-previewer__image--loaded]=\\\"\\n        attachmentUpload.state === 'success'\\n      \\\"\\n      data-testclass=\\\"attachment-image-preview\\\"\\n    >\\n      <div\\n        *ngIf=\\\"attachmentUpload.state === 'error'\\\"\\n        class=\\\"rfu-image-previewer__retry\\\"\\n        (click)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n        (keyup.enter)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n        data-testclass=\\\"upload-error\\\"\\n      >\\n        <stream-icon icon=\\\"retry\\\"></stream-icon>\\n      </div>\\n      <div class=\\\"rfu-thumbnail__wrapper\\\" style=\\\"width: 100; height: 100\\\">\\n        <div class=\\\"rfu-thumbnail__overlay\\\">\\n          <div\\n            class=\\\"rfu-icon-button\\\"\\n            data-testclass=\\\"delete-attachment\\\"\\n            role=\\\"button\\\"\\n            (click)=\\\"deleteAttachment(attachmentUpload)\\\"\\n            (keyup.enter)=\\\"deleteAttachment(attachmentUpload)\\\"\\n          >\\n            <stream-icon icon=\\\"close\\\"></stream-icon>\\n          </div>\\n        </div>\\n        <img\\n          *ngIf=\\\"attachmentUpload.url || attachmentUpload.previewUri\\\"\\n          src=\\\"{{\\n            attachmentUpload.url\\n              ? attachmentUpload.url\\n              : attachmentUpload.previewUri\\n          }}\\\"\\n          alt=\\\"attachmentUpload.file.name\\\"\\n          class=\\\"rfu-thumbnail__image\\\"\\n          data-testclass=\\\"attachment-image\\\"\\n        />\\n      </div>\\n      <stream-loading-indicator\\n        data-testclass=\\\"loading-indicator\\\"\\n        color=\\\"rgba(255,255,255,0.7)\\\"\\n        *ngIf=\\\"attachmentUpload.state === 'uploading'\\\"\\n      ></stream-loading-indicator>\\n    </div>\\n    <div\\n      class=\\\"rfu-file-previewer\\\"\\n      *ngIf=\\\"attachmentUpload.type === 'file'\\\"\\n      data-testclass=\\\"attachment-file-preview\\\"\\n    >\\n      <ol>\\n        <li\\n          class=\\\"rfu-file-previewer__file\\\"\\n          [class.rfu-file-previewer__file--uploading]=\\\"\\n            attachmentUpload.state === 'uploading'\\n          \\\"\\n          [class.rfu-file-previewer__file--failed]=\\\"\\n            attachmentUpload.state === 'error'\\n          \\\"\\n        >\\n          <stream-icon icon=\\\"file\\\"></stream-icon>\\n\\n          <a\\n            data-testclass=\\\"file-download-link\\\"\\n            href=\\\"{{ attachmentUpload.url }}\\\"\\n            (click)=\\\"attachmentUpload.url ? null : $event.preventDefault()\\\"\\n            (keyup.enter)=\\\"\\n              attachmentUpload.url ? null : $event.preventDefault()\\n            \\\"\\n            download\\n          >\\n            {{ attachmentUpload.file.name }}\\n            <ng-container *ngIf=\\\"attachmentUpload.state === 'error'\\\">\\n              <div\\n                data-testclass=\\\"file-upload-retry\\\"\\n                class=\\\"rfu-file-previewer__failed\\\"\\n                (click)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n                (keyup.enter)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n                translate\\n              >\\n                streamChat.failed\\n              </div>\\n              <div\\n                class=\\\"rfu-file-previewer__retry\\\"\\n                (click)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n                (keyup.enter)=\\\"retryAttachmentUpload(attachmentUpload.file)\\\"\\n                translate\\n              >\\n                streamChat.retry\\n              </div>\\n            </ng-container>\\n          </a>\\n\\n          <span\\n            data-testclass=\\\"file-delete\\\"\\n            class=\\\"rfu-file-previewer__close-button\\\"\\n            (click)=\\\"deleteAttachment(attachmentUpload)\\\"\\n            (keyup.enter)=\\\"deleteAttachment(attachmentUpload)\\\"\\n          >\\n            \\u2718\\n          </span>\\n          <div\\n            *ngIf=\\\"attachmentUpload.state === 'uploading'\\\"\\n            class=\\\"rfu-file-previewer__loading-indicator\\\"\\n          >\\n            <stream-loading-indicator></stream-loading-indicator>\\n          </div>\\n        </li>\\n      </ol>\\n    </div>\\n  </ng-container>\\n</div>\\n\", components: [{ type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }, { type: LoadingIndicatorComponent, selector: \"stream-loading-indicator\", inputs: [\"size\", \"color\"] }], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i10.TranslateDirective, selector: \"[translate],[ngx-translate]\", inputs: [\"translate\", \"translateParams\"] }], pipes: { \"async\": i3.AsyncPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentPreviewListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-attachment-preview-list',\n                    templateUrl: './attachment-preview-list.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: AttachmentService }]; } });\n\nclass MessageInputComponent {\n    constructor(channelService, notificationService, attachmentService, configService, textareaType, componentFactoryResolver, cdRef, chatClient) {\n        this.channelService = channelService;\n        this.notificationService = notificationService;\n        this.attachmentService = attachmentService;\n        this.configService = configService;\n        this.textareaType = textareaType;\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.cdRef = cdRef;\n        this.chatClient = chatClient;\n        this.messageUpdate = new EventEmitter();\n        this.textareaValue = '';\n        this.mentionedUsers = [];\n        this.subscriptions = [];\n        this.isViewInited = false;\n        this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe((counter) => {\n            if (counter === 0 && this.hideNotification) {\n                this.hideNotification();\n                this.hideNotification = undefined;\n            }\n        }));\n        this.subscriptions.push(this.channelService.activeChannel$.subscribe((channel) => {\n            var _a;\n            this.textareaValue = '';\n            this.attachmentService.resetAttachmentUploads();\n            const capabilities = (_a = channel === null || channel === void 0 ? void 0 : channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n            if (capabilities) {\n                this.isFileUploadAuthorized =\n                    capabilities.indexOf('upload-file') !== -1;\n                this.canSendLinks = capabilities.indexOf('send-links') !== -1;\n                this.canSendMessages = capabilities.indexOf('send-message') !== -1;\n                if (this.isViewInited) {\n                    this.cdRef.detectChanges();\n                    this.initTextarea();\n                }\n            }\n        }));\n        this.subscriptions.push(this.chatClient.appSettings$.subscribe((appSettings) => (this.appSettings = appSettings)));\n        this.attachmentUploads$ = this.attachmentService.attachmentUploads$;\n        this.isFileUploadEnabled = this.configService.isFileUploadEnabled;\n        this.acceptedFileTypes = this.configService.acceptedFileTypes;\n        this.isMultipleFileUploadEnabled =\n            this.configService.isMultipleFileUploadEnabled;\n        this.areMentionsEnabled = this.configService.areMentionsEnabled;\n        this.mentionAutocompleteItemTemplate =\n            this.configService.mentionAutocompleteItemTemplate;\n        this.mentionScope = this.configService.mentionScope;\n    }\n    ngAfterViewInit() {\n        this.isViewInited = true;\n        this.initTextarea();\n    }\n    ngOnChanges(changes) {\n        if (changes.message) {\n            this.attachmentService.resetAttachmentUploads();\n            if (this.isUpdate) {\n                this.attachmentService.createFromAttachments(this.message.attachments || []);\n                this.textareaValue = this.message.text || '';\n            }\n        }\n        if (changes.isFileUploadEnabled) {\n            this.configService.isFileUploadEnabled = this.isFileUploadEnabled;\n        }\n        if (changes.acceptedFileTypes) {\n            this.configService.acceptedFileTypes = this.acceptedFileTypes;\n        }\n        if (changes.isMultipleFileUploadEnabled) {\n            this.configService.isMultipleFileUploadEnabled =\n                this.isMultipleFileUploadEnabled;\n        }\n        if (changes.areMentionsEnabled) {\n            this.configService.areMentionsEnabled = this.areMentionsEnabled;\n        }\n        if (changes.mentionAutocompleteItemTemplate) {\n            this.configService.mentionAutocompleteItemTemplate =\n                this.mentionAutocompleteItemTemplate;\n        }\n        if (changes.mentionScope) {\n            this.configService.mentionScope = this.mentionScope;\n        }\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach((s) => s.unsubscribe());\n    }\n    messageSent() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let attachmentUploadInProgressCounter;\n            this.attachmentService.attachmentUploadInProgressCounter$\n                .pipe(first())\n                .subscribe((counter) => (attachmentUploadInProgressCounter = counter));\n            if (attachmentUploadInProgressCounter > 0) {\n                if (!this.hideNotification) {\n                    this.hideNotification =\n                        this.notificationService.addPermanentNotification('streamChat.Wait until all attachments have uploaded');\n                }\n                return;\n            }\n            const attachments = this.attachmentService.mapToAttachments();\n            const text = this.textareaValue;\n            if (!text && (!attachments || attachments.length === 0)) {\n                return;\n            }\n            if (this.containsLinks && !this.canSendLinks) {\n                this.notificationService.addTemporaryNotification('streamChat.Sending links is not allowed in this conversation');\n                return;\n            }\n            if (!this.isUpdate) {\n                this.textareaValue = '';\n            }\n            try {\n                yield (this.isUpdate\n                    ? this.channelService.updateMessage(Object.assign(Object.assign({}, this.message), { text: text, attachments: attachments }))\n                    : this.channelService.sendMessage(text, attachments, this.mentionedUsers));\n                this.messageUpdate.emit();\n                if (!this.isUpdate) {\n                    this.attachmentService.resetAttachmentUploads();\n                }\n            }\n            catch (error) {\n                if (this.isUpdate) {\n                    this.notificationService.addTemporaryNotification('streamChat.Edit message request failed');\n                }\n            }\n        });\n    }\n    get containsLinks() {\n        return /(?:(?:https?|ftp):\\/\\/)?[\\w/\\-?=%.]+\\.[\\w/\\-&?=%.]+/.test(this.textareaValue);\n    }\n    get accept() {\n        var _a;\n        return this.acceptedFileTypes ? (_a = this.acceptedFileTypes) === null || _a === void 0 ? void 0 : _a.join(',') : '';\n    }\n    filesSelected(fileList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(yield this.areAttachemntsValid(fileList))) {\n                return;\n            }\n            yield this.attachmentService.filesSelected(fileList);\n            this.clearFileInput();\n        });\n    }\n    clearFileInput() {\n        this.fileInput.nativeElement.value = '';\n    }\n    get isUpdate() {\n        return !!this.message;\n    }\n    initTextarea() {\n        if (!this.canSendMessages || this.textareaRef || !this.textareaAnchor) {\n            return;\n        }\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.textareaType);\n        this.textareaRef =\n            this.textareaAnchor.viewContainerRef.createComponent(componentFactory);\n        this.cdRef.detectChanges();\n    }\n    areAttachemntsValid(fileList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!fileList || this.acceptedFileTypes) {\n                return true;\n            }\n            if (!this.appSettings) {\n                yield this.chatClient.getAppSettings();\n            }\n            let isValid = true;\n            Array.from(fileList).forEach((f) => {\n                var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11;\n                let hasBlockedExtension;\n                let hasBlockedMimeType;\n                let hasNotAllowedExtension;\n                let hasNotAllowedMimeType;\n                if (isImageFile(f)) {\n                    hasBlockedExtension =\n                        !!((_c = (_b = (_a = this.appSettings) === null || _a === void 0 ? void 0 : _a.image_upload_config) === null || _b === void 0 ? void 0 : _b.blocked_file_extensions) === null || _c === void 0 ? void 0 : _c.find((ext) => f.name.endsWith(ext)));\n                    hasBlockedMimeType =\n                        !!((_f = (_e = (_d = this.appSettings) === null || _d === void 0 ? void 0 : _d.image_upload_config) === null || _e === void 0 ? void 0 : _e.blocked_mime_types) === null || _f === void 0 ? void 0 : _f.find((type) => f.type === type));\n                    hasNotAllowedExtension =\n                        !!((_j = (_h = (_g = this.appSettings) === null || _g === void 0 ? void 0 : _g.image_upload_config) === null || _h === void 0 ? void 0 : _h.allowed_file_extensions) === null || _j === void 0 ? void 0 : _j.length) &&\n                            !((_m = (_l = (_k = this.appSettings) === null || _k === void 0 ? void 0 : _k.image_upload_config) === null || _l === void 0 ? void 0 : _l.allowed_file_extensions) === null || _m === void 0 ? void 0 : _m.find((ext) => f.name.endsWith(ext)));\n                    hasNotAllowedMimeType =\n                        !!((_q = (_p = (_o = this.appSettings) === null || _o === void 0 ? void 0 : _o.image_upload_config) === null || _p === void 0 ? void 0 : _p.allowed_mime_types) === null || _q === void 0 ? void 0 : _q.length) &&\n                            !((_t = (_s = (_r = this.appSettings) === null || _r === void 0 ? void 0 : _r.image_upload_config) === null || _s === void 0 ? void 0 : _s.allowed_mime_types) === null || _t === void 0 ? void 0 : _t.find((type) => f.type === type));\n                }\n                else {\n                    hasBlockedExtension =\n                        !!((_w = (_v = (_u = this.appSettings) === null || _u === void 0 ? void 0 : _u.file_upload_config) === null || _v === void 0 ? void 0 : _v.blocked_file_extensions) === null || _w === void 0 ? void 0 : _w.find((ext) => f.name.endsWith(ext)));\n                    hasBlockedMimeType =\n                        !!((_z = (_y = (_x = this.appSettings) === null || _x === void 0 ? void 0 : _x.file_upload_config) === null || _y === void 0 ? void 0 : _y.blocked_mime_types) === null || _z === void 0 ? void 0 : _z.find((type) => f.type === type));\n                    hasNotAllowedExtension =\n                        !!((_2 = (_1 = (_0 = this.appSettings) === null || _0 === void 0 ? void 0 : _0.file_upload_config) === null || _1 === void 0 ? void 0 : _1.allowed_file_extensions) === null || _2 === void 0 ? void 0 : _2.length) &&\n                            !((_5 = (_4 = (_3 = this.appSettings) === null || _3 === void 0 ? void 0 : _3.file_upload_config) === null || _4 === void 0 ? void 0 : _4.allowed_file_extensions) === null || _5 === void 0 ? void 0 : _5.find((ext) => f.name.endsWith(ext)));\n                    hasNotAllowedMimeType =\n                        !!((_8 = (_7 = (_6 = this.appSettings) === null || _6 === void 0 ? void 0 : _6.file_upload_config) === null || _7 === void 0 ? void 0 : _7.allowed_mime_types) === null || _8 === void 0 ? void 0 : _8.length) &&\n                            !((_11 = (_10 = (_9 = this.appSettings) === null || _9 === void 0 ? void 0 : _9.file_upload_config) === null || _10 === void 0 ? void 0 : _10.allowed_mime_types) === null || _11 === void 0 ? void 0 : _11.find((type) => f.type === type));\n                }\n                if (hasBlockedExtension ||\n                    hasBlockedMimeType ||\n                    hasNotAllowedExtension ||\n                    hasNotAllowedMimeType) {\n                    this.notificationService.addTemporaryNotification('streamChat.Unsupported file type: {{type}}', undefined, undefined, { type: f.type });\n                    isValid = false;\n                }\n            });\n            return isValid;\n        });\n    }\n}\nMessageInputComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageInputComponent, deps: [{ token: ChannelService }, { token: NotificationService }, { token: AttachmentService }, { token: MessageInputConfigService }, { token: textareaInjectionToken }, { token: i0.ComponentFactoryResolver }, { token: i0.ChangeDetectorRef }, { token: ChatClientService }], target: i0.ɵɵFactoryTarget.Component });\nMessageInputComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: MessageInputComponent, selector: \"stream-message-input\", inputs: { isFileUploadEnabled: \"isFileUploadEnabled\", areMentionsEnabled: \"areMentionsEnabled\", mentionScope: \"mentionScope\", mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\", acceptedFileTypes: \"acceptedFileTypes\", isMultipleFileUploadEnabled: \"isMultipleFileUploadEnabled\", message: \"message\" }, outputs: { messageUpdate: \"messageUpdate\" }, providers: [AttachmentService], viewQueries: [{ propertyName: \"fileInput\", first: true, predicate: [\"fileInput\"], descendants: true }, { propertyName: \"textareaAnchor\", first: true, predicate: TextareaDirective, descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  class=\\\"str-chat__input-flat\\\"\\n  [class.str-chat__input-flat-has-attachments]=\\\"\\n    (attachmentUploads$ | async)!.length > 0\\n  \\\"\\n>\\n  <div class=\\\"str-chat__input-flat-wrapper\\\">\\n    <div class=\\\"str-chat__input-flat--textarea-wrapper\\\">\\n      <stream-attachment-preview-list\\n        class=\\\"rfu-image-previewer-angular-host\\\"\\n      ></stream-attachment-preview-list>\\n      <div class=\\\"rta str-chat__textarea\\\">\\n        <ng-template\\n          *ngIf=\\\"canSendMessages; else notAllowed\\\"\\n          streamTextarea\\n          [(value)]=\\\"textareaValue\\\"\\n          (send)=\\\"messageSent()\\\"\\n          [componentRef]=\\\"textareaRef\\\"\\n          (userMentions)=\\\"mentionedUsers = $event\\\"\\n          [areMentionsEnabled]=\\\"areMentionsEnabled\\\"\\n          [mentionAutocompleteItemTemplate]=\\\"mentionAutocompleteItemTemplate\\\"\\n          [mentionScope]=\\\"mentionScope\\\"\\n        ></ng-template>\\n        <ng-template #notAllowed>\\n          <textarea\\n            disabled\\n            rows=\\\"1\\\"\\n            [value]=\\\"\\n              'streamChat.You can\\\\'t send messages in this channel' | translate\\n            \\\"\\n            class=\\\"rta__textarea str-chat__textarea__textarea\\\"\\n          ></textarea>\\n        </ng-template>\\n      </div>\\n      <div\\n        *ngIf=\\\"isFileUploadEnabled && isFileUploadAuthorized && canSendMessages\\\"\\n        class=\\\"str-chat__fileupload-wrapper\\\"\\n        data-testid=\\\"file-upload-button\\\"\\n      >\\n        <div class=\\\"str-chat__tooltip\\\">\\n          {{ \\\"streamChat.Attach files\\\" | translate }}\\n        </div>\\n        <div class=\\\"rfu-file-upload-button\\\">\\n          <label>\\n            <input\\n              #fileInput\\n              type=\\\"file\\\"\\n              class=\\\"rfu-file-input\\\"\\n              data-testid=\\\"file-input\\\"\\n              [accept]=\\\"accept\\\"\\n              [multiple]=\\\"isMultipleFileUploadEnabled\\\"\\n              (change)=\\\"filesSelected(fileInput.files)\\\"\\n            />\\n            <span class=\\\"str-chat__input-flat-fileupload\\\">\\n              <stream-icon icon=\\\"file-upload\\\"></stream-icon>\\n            </span>\\n          </label>\\n        </div>\\n      </div>\\n    </div>\\n    <button\\n      *ngIf=\\\"canSendMessages\\\"\\n      data-testid=\\\"send-button\\\"\\n      class=\\\"str-chat__send-button\\\"\\n      (click)=\\\"messageSent()\\\"\\n      (keyup.enter)=\\\"messageSent()\\\"\\n    >\\n      <stream-icon icon=\\\"send\\\"></stream-icon>\\n    </button>\\n  </div>\\n</div>\\n\", components: [{ type: AttachmentPreviewListComponent, selector: \"stream-attachment-preview-list\" }, { type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: TextareaDirective, selector: \"[streamTextarea]\", inputs: [\"componentRef\", \"areMentionsEnabled\", \"mentionAutocompleteItemTemplate\", \"mentionScope\", \"value\"], outputs: [\"valueChange\", \"send\", \"userMentions\"] }], pipes: { \"async\": i3.AsyncPipe, \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageInputComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-message-input',\n                    templateUrl: './message-input.component.html',\n                    styles: [],\n                    providers: [AttachmentService],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: NotificationService }, { type: AttachmentService }, { type: MessageInputConfigService }, { type: i0.Type, decorators: [{\n                    type: Inject,\n                    args: [textareaInjectionToken]\n                }] }, { type: i0.ComponentFactoryResolver }, { type: i0.ChangeDetectorRef }, { type: ChatClientService }]; }, propDecorators: { isFileUploadEnabled: [{\n                type: Input\n            }], areMentionsEnabled: [{\n                type: Input\n            }], mentionScope: [{\n                type: Input\n            }], mentionAutocompleteItemTemplate: [{\n                type: Input\n            }], acceptedFileTypes: [{\n                type: Input\n            }], isMultipleFileUploadEnabled: [{\n                type: Input\n            }], message: [{\n                type: Input\n            }], messageUpdate: [{\n                type: Output\n            }], fileInput: [{\n                type: ViewChild,\n                args: ['fileInput']\n            }], textareaAnchor: [{\n                type: ViewChild,\n                args: [TextareaDirective, { static: false }]\n            }] } });\n\nclass ModalComponent {\n    constructor() {\n        this.isOpen = false;\n        this.isOpenChange = new EventEmitter();\n        this.watchForEscPress = (event) => {\n            if (event.key === 'Escape') {\n                this.close();\n            }\n        };\n        this.stopWatchForEscPress = () => {\n            window.removeEventListener('keyup', this.watchForEscPress);\n        };\n        this.watchForOutsideClicks = (event) => {\n            var _a;\n            if (!((_a = this.content) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n                this.close();\n            }\n        };\n    }\n    ngOnChanges(changes) {\n        if (changes.isOpen) {\n            if (this.isOpen) {\n                window.addEventListener('keyup', this.watchForEscPress);\n                setTimeout(() => window.addEventListener('click', this.watchForOutsideClicks), 0);\n            }\n            else {\n                this.stopWatchForOutsideClicks();\n                this.stopWatchForEscPress();\n            }\n        }\n    }\n    close() {\n        this.isOpen = false;\n        this.isOpenChange.emit(false);\n        this.stopWatchForOutsideClicks();\n        this.stopWatchForEscPress();\n    }\n    stopWatchForOutsideClicks() {\n        window.removeEventListener('click', this.watchForOutsideClicks);\n    }\n}\nModalComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ModalComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nModalComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: ModalComponent, selector: \"stream-modal\", inputs: { isOpen: \"isOpen\" }, outputs: { isOpenChange: \"isOpenChange\" }, viewQueries: [{ propertyName: \"content\", first: true, predicate: [\"content\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  data-testid=\\\"modal\\\"\\n  class=\\\"str-chat__modal str-chat__modal--{{ isOpen ? 'open' : 'close' }}\\\"\\n>\\n  <div\\n    data-testid=\\\"close\\\"\\n    class=\\\"str-chat__modal__close-button\\\"\\n    (click)=\\\"close()\\\"\\n    (keyup.enter)=\\\"close()\\\"\\n    translate\\n  >\\n    streamChat.Close\\n    <stream-icon icon=\\\"close\\\"></stream-icon>\\n  </div>\\n  <div class=\\\"str-chat__modal__inner\\\" #content>\\n    <ng-content></ng-content>\\n  </div>\\n</div>\\n\", components: [{ type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }], directives: [{ type: i10.TranslateDirective, selector: \"[translate],[ngx-translate]\", inputs: [\"translate\", \"translateParams\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ModalComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-modal',\n                    templateUrl: './modal.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { isOpen: [{\n                type: Input\n            }], isOpenChange: [{\n                type: Output\n            }], content: [{\n                type: ViewChild,\n                args: ['content']\n            }] } });\n\nclass NotificationComponent {\n    constructor() { }\n}\nNotificationComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nNotificationComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: NotificationComponent, selector: \"stream-notification\", inputs: { type: \"type\" }, ngImport: i0, template: \"<div\\n  class=\\\"str-chat__custom-notification notification-{{ type }}\\\"\\n  data-testid=\\\"custom-notification\\\"\\n>\\n  <ng-content></ng-content>\\n</div>\\n\" });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-notification',\n                    templateUrl: './notification.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { type: [{\n                type: Input\n            }] } });\n\nclass NotificationListComponent {\n    constructor(notificationService) {\n        this.notificationService = notificationService;\n        this.notifications$ = this.notificationService.notifications$;\n    }\n    trackByItem(_, item) {\n        return item;\n    }\n}\nNotificationListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationListComponent, deps: [{ token: NotificationService }], target: i0.ɵɵFactoryTarget.Component });\nNotificationListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: NotificationListComponent, selector: \"stream-notification-list\", ngImport: i0, template: \"<div class=\\\"str-chat__list-notifications\\\">\\n  <stream-notification\\n    *ngFor=\\\"let notification of notifications$ | async; trackBy: trackByItem\\\"\\n    [type]=\\\"notification.type\\\"\\n    ><div data-testclass=\\\"notification-content\\\">\\n      {{ notification.text | translate: notification.translateParams }}\\n    </div></stream-notification\\n  >\\n</div>\\n\", components: [{ type: NotificationComponent, selector: \"stream-notification\", inputs: [\"type\"] }], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"async\": i3.AsyncPipe, \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: NotificationListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-notification-list',\n                    templateUrl: './notification-list.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: NotificationService }]; } });\n\nclass MessageActionsBoxComponent {\n    constructor(chatClientService, notificationService, channelService) {\n        this.chatClientService = chatClientService;\n        this.notificationService = notificationService;\n        this.channelService = channelService;\n        this.isOpen = false;\n        this.isMine = false;\n        this.enabledActions = [];\n        this.displayedActionsCount = new EventEmitter();\n        this.isEditing = new EventEmitter();\n        this.isEditModalOpen = false;\n        this.modalClosed = () => {\n            this.isEditModalOpen = false;\n            this.isEditing.emit(false);\n        };\n    }\n    ngOnChanges(changes) {\n        if (changes.isMine || changes.enabledActions) {\n            let displayedActionsCount = 0;\n            if (this.isQuoteVisible) {\n                displayedActionsCount++;\n            }\n            if (this.isEditVisible) {\n                displayedActionsCount++;\n            }\n            if (this.isDeleteVisible) {\n                displayedActionsCount++;\n            }\n            if (this.isMuteVisible) {\n                displayedActionsCount++;\n            }\n            if (this.isFlagVisible) {\n                displayedActionsCount++;\n            }\n            if (this.isPinVisible) {\n                displayedActionsCount++;\n            }\n            this.displayedActionsCount.next(displayedActionsCount);\n        }\n    }\n    get isQuoteVisible() {\n        return this.enabledActions.indexOf('quote') !== -1;\n    }\n    get isEditVisible() {\n        return ((this.enabledActions.indexOf('edit') !== -1 && this.isMine) ||\n            this.enabledActions.indexOf('edit-any') !== -1);\n    }\n    get isDeleteVisible() {\n        return ((this.enabledActions.indexOf('delete') !== -1 && this.isMine) ||\n            this.enabledActions.indexOf('delete-any') !== -1);\n    }\n    get isMuteVisible() {\n        return this.enabledActions.indexOf('mute') !== -1;\n    }\n    get isFlagVisible() {\n        return this.enabledActions.indexOf('flag') !== -1 && !this.isMine;\n    }\n    get isPinVisible() {\n        return this.enabledActions.indexOf('pin') !== -1;\n    }\n    pinClicked() {\n        alert('Feature not yet implemented');\n    }\n    flagClicked() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.chatClientService.flagMessage(this.message.id);\n                this.notificationService.addTemporaryNotification('streamChat.Message has been successfully flagged', 'success');\n            }\n            catch (err) {\n                this.notificationService.addTemporaryNotification('streamChat.Error adding flag');\n            }\n        });\n    }\n    muteClicked() {\n        alert('Feature not yet implemented');\n    }\n    quoteClicked() {\n        alert('Feature not yet implemented');\n    }\n    editClicked() {\n        this.isEditing.emit(true);\n        this.isEditModalOpen = true;\n    }\n    sendClicked() {\n        var _a;\n        (_a = this.messageInput) === null || _a === void 0 ? void 0 : _a.messageSent();\n    }\n    deleteClicked() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.channelService.deleteMessage(this.message);\n            }\n            catch (error) {\n                this.notificationService.addTemporaryNotification('streamChat.Error deleting message');\n            }\n        });\n    }\n}\nMessageActionsBoxComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageActionsBoxComponent, deps: [{ token: ChatClientService }, { token: NotificationService }, { token: ChannelService }], target: i0.ɵɵFactoryTarget.Component });\nMessageActionsBoxComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: MessageActionsBoxComponent, selector: \"stream-message-actions-box\", inputs: { messageInputTemplate: \"messageInputTemplate\", isOpen: \"isOpen\", isMine: \"isMine\", message: \"message\", enabledActions: \"enabledActions\" }, outputs: { displayedActionsCount: \"displayedActionsCount\", isEditing: \"isEditing\" }, viewQueries: [{ propertyName: \"messageInput\", first: true, predicate: MessageInputComponent, descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  data-testid=\\\"action-box\\\"\\n  class=\\\"str-chat__message-actions-box\\\"\\n  [class.str-chat__message-actions-box--open]=\\\"isOpen\\\"\\n  [class.str-chat__message-actions-box--mine]=\\\"isMine\\\"\\n>\\n  <ul class=\\\"str-chat__message-actions-list\\\">\\n    <button\\n      data-testid=\\\"quote-action\\\"\\n      *ngIf=\\\"isQuoteVisible\\\"\\n      (click)=\\\"quoteClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{ \\\"streamChat.Reply\\\" | translate }}\\n      </li>\\n    </button>\\n    <button\\n      data-testid=\\\"pin-action\\\"\\n      *ngIf=\\\"isPinVisible\\\"\\n      (click)=\\\"pinClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{\\n          (message?.pinned ? \\\"streamChat.Unpin\\\" : \\\"streamChat.Pin\\\") | translate\\n        }}\\n      </li>\\n    </button>\\n    <button\\n      data-testid=\\\"flag-action\\\"\\n      *ngIf=\\\"isFlagVisible\\\"\\n      (click)=\\\"flagClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{ \\\"streamChat.Flag\\\" | translate }}\\n      </li>\\n    </button>\\n    <button\\n      data-testid=\\\"mute-action\\\"\\n      *ngIf=\\\"isMuteVisible\\\"\\n      (click)=\\\"muteClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{ \\\"streamChat.Mute\\\" | translate }}\\n      </li>\\n    </button>\\n    <button\\n      data-testid=\\\"edit-action\\\"\\n      *ngIf=\\\"isEditVisible\\\"\\n      (click)=\\\"editClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{ \\\"streamChat.Edit Message\\\" | translate }}\\n      </li>\\n    </button>\\n    <button\\n      data-testid=\\\"delete-action\\\"\\n      *ngIf=\\\"isDeleteVisible\\\"\\n      (click)=\\\"deleteClicked()\\\"\\n    >\\n      <li class=\\\"str-chat__message-actions-list-item\\\">\\n        {{ \\\"streamChat.Delete\\\" | translate }}\\n      </li>\\n    </button>\\n  </ul>\\n</div>\\n\\n<stream-modal\\n  [isOpen]=\\\"isEditModalOpen\\\"\\n  (isOpenChange)=\\\"\\n    isEditModalOpen = $event; isEditModalOpen ? '' : modalClosed()\\n  \\\"\\n>\\n  <div class=\\\"str-chat__edit-message-form\\\" *ngIf=\\\"isEditModalOpen\\\">\\n    <ng-container *ngIf=\\\"messageInputTemplate; else defaultInput\\\">\\n      <ng-container\\n        *ngTemplateOutlet=\\\"\\n          messageInputTemplate;\\n          context: {\\n            message: message,\\n            messageUpdateHandler: modalClosed\\n          }\\n        \\\"\\n      ></ng-container>\\n    </ng-container>\\n    <ng-template #defaultInput>\\n      <stream-message-input\\n        [message]=\\\"message\\\"\\n        (messageUpdate)=\\\"modalClosed()\\\"\\n      ></stream-message-input>\\n    </ng-template>\\n    <stream-notification-list></stream-notification-list>\\n    <div class=\\\"str-chat__message-team-form-footer\\\">\\n      <div></div>\\n      <div>\\n        <button translate data-testid=\\\"cancel-button\\\" (click)=\\\"modalClosed()\\\">\\n          streamChat.Cancel\\n        </button>\\n        <button\\n          type=\\\"submit\\\"\\n          translate\\n          data-testid=\\\"send-button\\\"\\n          (click)=\\\"sendClicked()\\\"\\n          (keyup.enter)=\\\"sendClicked()\\\"\\n        >\\n          streamChat.Send\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</stream-modal>\\n\", components: [{ type: ModalComponent, selector: \"stream-modal\", inputs: [\"isOpen\"], outputs: [\"isOpenChange\"] }, { type: MessageInputComponent, selector: \"stream-message-input\", inputs: [\"isFileUploadEnabled\", \"areMentionsEnabled\", \"mentionScope\", \"mentionAutocompleteItemTemplate\", \"acceptedFileTypes\", \"isMultipleFileUploadEnabled\", \"message\"], outputs: [\"messageUpdate\"] }, { type: NotificationListComponent, selector: \"stream-notification-list\" }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }, { type: i10.TranslateDirective, selector: \"[translate],[ngx-translate]\", inputs: [\"translate\", \"translateParams\"] }], pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageActionsBoxComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-message-actions-box',\n                    templateUrl: './message-actions-box.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChatClientService }, { type: NotificationService }, { type: ChannelService }]; }, propDecorators: { messageInputTemplate: [{\n                type: Input\n            }], isOpen: [{\n                type: Input\n            }], isMine: [{\n                type: Input\n            }], message: [{\n                type: Input\n            }], enabledActions: [{\n                type: Input\n            }], displayedActionsCount: [{\n                type: Output\n            }], isEditing: [{\n                type: Output\n            }], messageInput: [{\n                type: ViewChild,\n                args: [MessageInputComponent]\n            }] } });\n\nclass ChannelComponent {\n    constructor(channelService) {\n        this.channelService = channelService;\n        this.subscriptions = [];\n        this.isError$ = this.channelService.channels$.pipe(map(() => false), catchError(() => of(true)), startWith(false));\n        this.isInitializing$ = this.channelService.channels$.pipe(map((channels) => !channels), catchError(() => of(false)));\n    }\n}\nChannelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelComponent, deps: [{ token: ChannelService }], target: i0.ɵɵFactoryTarget.Component });\nChannelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: ChannelComponent, selector: \"stream-channel\", ngImport: i0, template: \"<div\\n  *ngIf=\\\"(isError$ | async) === false && (isInitializing$ | async) === false\\\"\\n  class=\\\"str-chat str-chat-channel messaging\\\"\\n>\\n  <div class=\\\"str-chat__container\\\">\\n    <div class=\\\"str-chat__main-panel\\\">\\n      <ng-content></ng-content>\\n    </div>\\n  </div>\\n</div>\\n\", directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], pipes: { \"async\": i3.AsyncPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-channel',\n                    templateUrl: './channel.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }]; } });\n\nconst getDeviceWidth = () => {\n    const width = window.innerWidth;\n    if (width < 768)\n        return { device: 'mobile', width };\n    if (width < 1024)\n        return { device: 'tablet', width };\n    return { device: 'full', width };\n};\n\nclass ChannelListToggleService {\n    constructor() {\n        this.isOpenSubject = new BehaviorSubject(false);\n        this.isOpen$ = this.isOpenSubject\n            .asObservable()\n            .pipe(distinctUntilChanged());\n        this.isOpen$.pipe(filter((s) => s)).subscribe(() => {\n            if (getDeviceWidth().device === 'mobile') {\n                this.watchForOutsideClicks();\n            }\n        });\n    }\n    open() {\n        this.isOpenSubject.next(true);\n    }\n    close() {\n        this.isOpenSubject.next(false);\n    }\n    toggle() {\n        this.isOpenSubject.getValue() ? this.close() : this.open();\n    }\n    setMenuElement(element) {\n        this.menuElement = element;\n    }\n    channelSelected() {\n        if (getDeviceWidth().device === 'mobile') {\n            this.close();\n        }\n    }\n    watchForOutsideClicks() {\n        if (!this.menuElement) {\n            return;\n        }\n        const eventHandler = (event) => {\n            if (!this.menuElement.contains(event.target)) {\n                this.close();\n                window.removeEventListener('click', eventHandler);\n            }\n        };\n        window.addEventListener('click', eventHandler);\n        this.isOpen$\n            .pipe(filter((s) => !s), first())\n            .subscribe(() => window.removeEventListener('click', eventHandler));\n    }\n}\nChannelListToggleService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelListToggleService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nChannelListToggleService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelListToggleService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelListToggleService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return []; } });\n\nclass ChannelHeaderComponent {\n    constructor(channelService, channelListToggleService) {\n        this.channelService = channelService;\n        this.channelListToggleService = channelListToggleService;\n        this.channelService.activeChannel$.subscribe((c) => {\n            var _a, _b;\n            this.activeChannel = c;\n            const capabilities = (_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.own_capabilities;\n            if (!capabilities) {\n                return;\n            }\n            this.canReceiveConnectEvents =\n                capabilities.indexOf('connect-events') !== -1;\n        });\n    }\n    toggleMenu(event) {\n        event.stopPropagation();\n        this.channelListToggleService.toggle();\n    }\n    get memberCountParam() {\n        var _a, _b;\n        return { memberCount: ((_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.member_count) || 0 };\n    }\n    get watcherCountParam() {\n        var _a, _b;\n        return { watcherCount: ((_b = (_a = this.activeChannel) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.watcher_count) || 0 };\n    }\n}\nChannelHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelHeaderComponent, deps: [{ token: ChannelService }, { token: ChannelListToggleService }], target: i0.ɵɵFactoryTarget.Component });\nChannelHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: ChannelHeaderComponent, selector: \"stream-channel-header\", ngImport: i0, template: \"<div class=\\\"str-chat__header-livestream\\\">\\n  <div\\n    class=\\\"str-chat__header-hamburger\\\"\\n    (click)=\\\"toggleMenu($event)\\\"\\n    (keyup.enter)=\\\"toggleMenu($event)\\\"\\n  >\\n    <span class=\\\"str-chat__header-hamburger--line\\\"></span>\\n    <span class=\\\"str-chat__header-hamburger--line\\\"></span>\\n    <span class=\\\"str-chat__header-hamburger--line\\\"></span>\\n  </div>\\n  <stream-avatar\\n    imageUrl=\\\"{{ activeChannel?.data?.image }}\\\"\\n    name=\\\"{{ activeChannel?.data?.name }}\\\"\\n  ></stream-avatar>\\n  <div class=\\\"str-chat__header-livestream-left\\\">\\n    <p data-testid=\\\"name\\\" class=\\\"str-chat__header-livestream-left--title\\\">\\n      {{ activeChannel?.data?.name }}\\n    </p>\\n    <p data-testid=\\\"info\\\" class=\\\"str-chat__header-livestream-left--members\\\">\\n      {{'streamChat.{{ memberCount }} members' | translate:memberCountParam}}\\n      {{canReceiveConnectEvents ? ('streamChat.{{ watcherCount }} online' |\\n      translate:watcherCountParam) : ''}}\\n    </p>\\n  </div>\\n</div>\\n\", components: [{ type: AvatarComponent, selector: \"stream-avatar\", inputs: [\"name\", \"imageUrl\", \"size\"] }], pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelHeaderComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-channel-header',\n                    templateUrl: './channel-header.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: ChannelListToggleService }]; } });\n\nclass ChannelPreviewComponent {\n    constructor(channelService, ngZone) {\n        this.channelService = channelService;\n        this.ngZone = ngZone;\n        this.isActive = false;\n        this.isUnread = false;\n        this.latestMessage = 'Nothing yet...';\n        this.subscriptions = [];\n        this.canSendReadEvents = true;\n    }\n    ngOnInit() {\n        var _a, _b, _c, _d;\n        this.subscriptions.push(this.channelService.activeChannel$.subscribe((activeChannel) => { var _a; return (this.isActive = (activeChannel === null || activeChannel === void 0 ? void 0 : activeChannel.id) === ((_a = this.channel) === null || _a === void 0 ? void 0 : _a.id)); }));\n        const messages = (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.messages;\n        if (messages && messages.length > 0) {\n            this.setLatestMessage(messages[messages.length - 1]);\n        }\n        this.isUnread = !!this.channel.countUnread() && this.canSendReadEvents;\n        const capabilities = ((_d = (_c = this.channel) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.own_capabilities) || [];\n        this.canSendReadEvents = capabilities.indexOf('read-events') !== -1;\n        this.subscriptions.push(this.channel.on('message.new', this.handleMessageEvent.bind(this)));\n        this.subscriptions.push(this.channel.on('message.updated', this.handleMessageEvent.bind(this)));\n        this.subscriptions.push(this.channel.on('message.deleted', this.handleMessageEvent.bind(this)));\n        this.subscriptions.push(this.channel.on('channel.truncated', this.handleMessageEvent.bind(this)));\n        this.subscriptions.push(this.channel.on('message.read', () => this.ngZone.run(() => {\n            this.isUnread =\n                !!this.channel.countUnread() && this.canSendReadEvents;\n        })));\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach((s) => s.unsubscribe());\n    }\n    get avatarImage() {\n        var _a, _b;\n        return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.image;\n    }\n    get avatarName() {\n        var _a, _b;\n        return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.name;\n    }\n    get title() {\n        var _a, _b;\n        return (_b = (_a = this.channel) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.name;\n    }\n    setAsActiveChannel() {\n        void this.channelService.setAsActiveChannel(this.channel);\n    }\n    handleMessageEvent(event) {\n        this.ngZone.run(() => {\n            var _a, _b, _c;\n            if (((_a = this.channel) === null || _a === void 0 ? void 0 : _a.state.messages.length) === 0) {\n                this.latestMessage = 'Nothing yet...';\n                return;\n            }\n            if (!event.message ||\n                ((_b = this.channel) === null || _b === void 0 ? void 0 : _b.state.messages[((_c = this.channel) === null || _c === void 0 ? void 0 : _c.state.messages.length) - 1].id) !== event.message.id) {\n                return;\n            }\n            this.setLatestMessage(event.message);\n            this.isUnread = !!this.channel.countUnread() && this.canSendReadEvents;\n        });\n    }\n    setLatestMessage(message) {\n        if (message === null || message === void 0 ? void 0 : message.deleted_at) {\n            this.latestMessage = 'streamChat.Message deleted';\n        }\n        else if (message === null || message === void 0 ? void 0 : message.text) {\n            this.latestMessage = message.text;\n        }\n        else if ((message === null || message === void 0 ? void 0 : message.attachments) && message.attachments.length) {\n            this.latestMessage = 'streamChat.🏙 Attachment...';\n        }\n    }\n}\nChannelPreviewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelPreviewComponent, deps: [{ token: ChannelService }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });\nChannelPreviewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: ChannelPreviewComponent, selector: \"stream-channel-preview\", inputs: { channel: \"channel\" }, ngImport: i0, template: \"<button\\n  class=\\\"str-chat__channel-preview-messenger\\\"\\n  [class.str-chat__channel-preview-messenger--active]=\\\"isActive\\\"\\n  [class.str-chat__channel-preview-messenger--unread]=\\\"isUnread\\\"\\n  (click)=\\\"setAsActiveChannel()\\\"\\n  data-testid=\\\"channel-preview-container\\\"\\n>\\n  <div class=\\\"str-chat__channel-preview-messenger--left\\\">\\n    <stream-avatar\\n      imageUrl=\\\"{{ avatarImage }}\\\"\\n      name=\\\"{{ avatarName }}\\\"\\n      [size]=\\\"40\\\"\\n    ></stream-avatar>\\n  </div>\\n  <div class=\\\"str-chat__channel-preview-messenger--right\\\">\\n    <div class=\\\"str-chat__channel-preview-messenger--name\\\">\\n      <span data-testid=\\\"channel-preview-title\\\">{{ title }}</span>\\n    </div>\\n    <div\\n      data-testid=\\\"latest-message\\\"\\n      class=\\\"str-chat__channel-preview-messenger--last-message\\\"\\n    >\\n      {{ latestMessage | translate }}\\n    </div>\\n  </div>\\n</button>\\n\", components: [{ type: AvatarComponent, selector: \"stream-avatar\", inputs: [\"name\", \"imageUrl\", \"size\"] }], pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelPreviewComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-channel-preview',\n                    templateUrl: './channel-preview.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: i0.NgZone }]; }, propDecorators: { channel: [{\n                type: Input\n            }] } });\n\nclass ChannelListComponent {\n    constructor(channelService, channelListToggleService) {\n        this.channelService = channelService;\n        this.channelListToggleService = channelListToggleService;\n        this.isLoadingMoreChannels = false;\n        this.isOpen$ = this.channelListToggleService.isOpen$;\n        this.channels$ = this.channelService.channels$;\n        this.hasMoreChannels$ = this.channelService.hasMoreChannels$;\n        this.isError$ = this.channels$.pipe(map(() => false), catchError(() => of(true)), startWith(false));\n        this.isInitializing$ = this.channels$.pipe(map((channels) => !channels), catchError(() => of(false)));\n    }\n    ngAfterViewInit() {\n        this.channelListToggleService.setMenuElement(this.container.nativeElement);\n    }\n    loadMoreChannels() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.isLoadingMoreChannels = true;\n            yield this.channelService.loadMoreChannels();\n            this.isLoadingMoreChannels = false;\n        });\n    }\n    trackByChannelId(index, item) {\n        return item.cid;\n    }\n    channelSelected() {\n        this.channelListToggleService.channelSelected();\n    }\n}\nChannelListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelListComponent, deps: [{ token: ChannelService }, { token: ChannelListToggleService }], target: i0.ɵɵFactoryTarget.Component });\nChannelListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: ChannelListComponent, selector: \"stream-channel-list\", inputs: { customChannelPreviewTemplate: \"customChannelPreviewTemplate\" }, viewQueries: [{ propertyName: \"container\", first: true, predicate: [\"container\"], descendants: true }], ngImport: i0, template: \"<div\\n  #container\\n  data-testid=\\\"channel-list-container\\\"\\n  class=\\\"str-chat str-chat-channel-list messaging\\\"\\n  [class.str-chat-channel-list--open]=\\\"(isOpen$ | async) === true\\\"\\n>\\n  <div\\n    *ngIf=\\\"\\n      (isError$ | async) === false && (isInitializing$ | async) === false;\\n      else statusIndicator\\n    \\\"\\n    class=\\\"str-chat__channel-list-messenger\\\"\\n  >\\n    <div class=\\\"str-chat__channel-list-messenger__main\\\">\\n      <p\\n        data-testid=\\\"empty-channel-list-indicator\\\"\\n        *ngIf=\\\"!(channels$ | async)?.length\\\"\\n      >\\n        {{ \\\"streamChat.You have no channels currently\\\" | translate }}\\n      </p>\\n      <ng-container\\n        *ngFor=\\\"let channel of channels$ | async; trackBy: trackByChannelId\\\"\\n      >\\n        <ng-container\\n          *ngIf=\\\"customChannelPreviewTemplate; else defaultTemplate\\\"\\n        >\\n          <div (click)=\\\"channelSelected()\\\" (keyup.enter)=\\\"channelSelected()\\\">\\n            <ng-container\\n              *ngTemplateOutlet=\\\"\\n                customChannelPreviewTemplate;\\n                context: { channel: channel }\\n              \\\"\\n            ></ng-container>\\n          </div>\\n        </ng-container>\\n        <ng-template #defaultTemplate>\\n          <stream-channel-preview\\n            data-testclass=\\\"channel-preview\\\"\\n            [channel]=\\\"channel\\\"\\n            (click)=\\\"channelSelected()\\\"\\n            (keyup.enter)=\\\"channelSelected()\\\"\\n          ></stream-channel-preview>\\n        </ng-template>\\n      </ng-container>\\n      <div\\n        *ngIf=\\\"hasMoreChannels$ | async\\\"\\n        class=\\\"str-chat__load-more-button\\\"\\n        (click)=\\\"loadMoreChannels()\\\"\\n        (keyup.enter)=\\\"loadMoreChannels()\\\"\\n        data-testid=\\\"load-more\\\"\\n      >\\n        <button\\n          class=\\\"str-chat__load-more-button__button\\\"\\n          data-testid=\\\"load-more-button\\\"\\n          [disabled]=\\\"isLoadingMoreChannels\\\"\\n        >\\n          <span *ngIf=\\\"!isLoadingMoreChannels; else loadingIndicator\\\">{{\\n            \\\"Load more\\\" | translate\\n          }}</span>\\n          <ng-template #loadingIndicator\\n            ><stream-loading-indicator></stream-loading-indicator\\n          ></ng-template>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<ng-template #statusIndicator>\\n  <ng-container *ngIf=\\\"isError$ | async\\\">\\n    <ng-container *ngTemplateOutlet=\\\"chatDown\\\"></ng-container>\\n  </ng-container>\\n  <ng-container *ngIf=\\\"isInitializing$ | async\\\">\\n    <ng-container *ngTemplateOutlet=\\\"loadingChannels\\\"></ng-container>\\n  </ng-container>\\n</ng-template>\\n\\n<ng-template #chatDown>\\n  <div data-testid=\\\"chatdown-container\\\" class=\\\"str-chat__down\\\">\\n    <ng-container *ngTemplateOutlet=\\\"loadingChannels\\\"></ng-container>\\n    <div class=\\\"str-chat__down-main\\\">\\n      <stream-icon icon=\\\"connection-error\\\"></stream-icon>\\n      <h1>{{ \\\"streamChat.Connection error\\\" | translate }}</h1>\\n      <h3>\\n        {{\\n          \\\"streamChat.Error connecting to chat, refresh the page to try again.\\\"\\n            | translate\\n        }}\\n      </h3>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #loadingChannels>\\n  <div data-testid=\\\"loading-indicator\\\" class=\\\"str-chat__loading-channels\\\">\\n    <ng-container *ngTemplateOutlet=\\\"loadingChannel\\\"></ng-container>\\n    <ng-container *ngTemplateOutlet=\\\"loadingChannel\\\"></ng-container>\\n    <ng-container *ngTemplateOutlet=\\\"loadingChannel\\\"></ng-container>\\n  </div>\\n</ng-template>\\n\\n<ng-template #loadingChannel>\\n  <div class=\\\"str-chat__loading-channels-item\\\">\\n    <div class=\\\"str-chat__loading-channels-avatar\\\"></div>\\n    <div class=\\\"str-chat__loading-channels-meta\\\">\\n      <div class=\\\"str-chat__loading-channels-username\\\"></div>\\n      <div class=\\\"str-chat__loading-channels-status\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\", components: [{ type: ChannelPreviewComponent, selector: \"stream-channel-preview\", inputs: [\"channel\"] }, { type: LoadingIndicatorComponent, selector: \"stream-loading-indicator\", inputs: [\"size\", \"color\"] }, { type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"async\": i3.AsyncPipe, \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ChannelListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-channel-list',\n                    templateUrl: './channel-list.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: ChannelListToggleService }]; }, propDecorators: { customChannelPreviewTemplate: [{\n                type: Input\n            }], container: [{\n                type: ViewChild,\n                args: ['container']\n            }] } });\n\nDayjs.extend(calendar);\nconst parseDate = (date) => {\n    const parsedTime = Dayjs(date);\n    return parsedTime.calendar();\n};\n\nconst getReadByText = (users) => {\n    let outStr = '';\n    const slicedArr = users.map((item) => item.name || item.id).slice(0, 5);\n    const restLength = users.length - slicedArr.length;\n    if (slicedArr.length === 1) {\n        outStr = `${slicedArr[0]} `;\n    }\n    else if (slicedArr.length === 2) {\n        // joins all with \"and\" but =no commas\n        // example: \"bob and sam\"\n        outStr = `${slicedArr[0]} and ${slicedArr[1]}`;\n    }\n    else if (slicedArr.length > 2) {\n        // joins all with commas, but last one gets \", and\" (oxford comma!)\n        // example: \"bob, joe, sam and 4 more\"\n        if (restLength === 0) {\n            // mutate slicedArr to remove last user to display it separately\n            const lastUser = slicedArr.splice(slicedArr.length - 2, 1)[0];\n            const commaSeparatedUsers = slicedArr.join(', ');\n            outStr = `${commaSeparatedUsers}, and ${lastUser}`;\n        }\n        else {\n            const commaSeparatedUsers = slicedArr.join(', ');\n            outStr = `${commaSeparatedUsers} and ${restLength} more`;\n        }\n    }\n    return outStr;\n};\n\nconst emojiReactionsMapping = {\n    like: '👍',\n    angry: '😠',\n    love: '❤️',\n    haha: '😂',\n    wow: '😮',\n    sad: '😞',\n};\nclass MessageReactionsComponent {\n    constructor(cdRef, channelService) {\n        this.cdRef = cdRef;\n        this.channelService = channelService;\n        this.messageReactionCounts = {};\n        this.isSelectorOpen = false;\n        this.isSelectorOpenChange = new EventEmitter();\n        this.latestReactions = [];\n        this.ownReactions = [];\n        this.eventHandler = (event) => {\n            var _a;\n            if (!((_a = this.selectorContainer) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n                this.isSelectorOpenChange.emit(false);\n            }\n        };\n    }\n    ngOnChanges(changes) {\n        if (changes.isSelectorOpen) {\n            this.isSelectorOpen\n                ? setTimeout(() => this.watchForOutsideClicks()) // setTimeout: wait for current click to bubble up, and only watch for clicks after that\n                : this.stopWatchForOutsideClicks();\n        }\n    }\n    ngAfterViewChecked() {\n        if (this.tooltipText && !this.tooltipPositions) {\n            this.setTooltipPosition();\n            this.cdRef.detectChanges();\n        }\n    }\n    get existingReactions() {\n        return Object.keys(this.messageReactionCounts).filter((k) => this.messageReactionCounts[k] > 0);\n    }\n    get reactionsCount() {\n        return Object.values(this.messageReactionCounts).reduce((total, count) => total + count, 0);\n    }\n    get reactionOptions() {\n        return ['like', 'love', 'haha', 'wow', 'sad', 'angry'];\n    }\n    getLatestUserByReaction(reactionType) {\n        var _a;\n        return (_a = this.latestReactions.find((r) => r.type === reactionType && r.user)) === null || _a === void 0 ? void 0 : _a.user;\n    }\n    getEmojiByReaction(reactionType) {\n        return emojiReactionsMapping[reactionType];\n    }\n    getUsersByReaction(reactionType) {\n        return this.latestReactions\n            .filter((r) => r.type === reactionType)\n            .map((r) => { var _a, _b; return ((_a = r.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = r.user) === null || _b === void 0 ? void 0 : _b.id); })\n            .filter((i) => !!i)\n            .join(', ');\n    }\n    showTooltip(event, reactionType) {\n        this.currentTooltipTarget = event.target;\n        this.tooltipText = this.getUsersByReaction(reactionType);\n    }\n    hideTooltip() {\n        this.tooltipText = undefined;\n        this.currentTooltipTarget = undefined;\n        this.tooltipPositions = undefined;\n    }\n    trackByMessageReaction(index, item) {\n        return item;\n    }\n    react(type) {\n        this.ownReactions.find((r) => r.type === type)\n            ? void this.channelService.removeReaction(this.messageId, type)\n            : void this.channelService.addReaction(this.messageId, type);\n    }\n    watchForOutsideClicks() {\n        window.addEventListener('click', this.eventHandler);\n    }\n    stopWatchForOutsideClicks() {\n        window.removeEventListener('click', this.eventHandler);\n    }\n    setTooltipPosition() {\n        var _a, _b, _c;\n        const tooltip = (_a = this.selectorTooltip) === null || _a === void 0 ? void 0 : _a.nativeElement.getBoundingClientRect();\n        const target = (_b = this.currentTooltipTarget) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\n        const container = (_c = this.selectorContainer) === null || _c === void 0 ? void 0 : _c.nativeElement.getBoundingClientRect();\n        if (!tooltip || !target || !container)\n            return;\n        const tooltipPosition = tooltip.width === container.width || tooltip.x < container.x\n            ? 0\n            : target.left + target.width / 2 - container.left - tooltip.width / 2;\n        const arrowPosition = target.x - tooltip.x + target.width / 2 - tooltipPosition;\n        this.tooltipPositions = {\n            tooltip: tooltipPosition,\n            arrow: arrowPosition,\n        };\n    }\n}\nMessageReactionsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageReactionsComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: ChannelService }], target: i0.ɵɵFactoryTarget.Component });\nMessageReactionsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: MessageReactionsComponent, selector: \"stream-message-reactions\", inputs: { messageId: \"messageId\", messageReactionCounts: \"messageReactionCounts\", isSelectorOpen: \"isSelectorOpen\", latestReactions: \"latestReactions\", ownReactions: \"ownReactions\" }, outputs: { isSelectorOpenChange: \"isSelectorOpenChange\" }, viewQueries: [{ propertyName: \"selectorContainer\", first: true, predicate: [\"selectorContainer\"], descendants: true }, { propertyName: \"selectorTooltip\", first: true, predicate: [\"selectorTooltip\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  *ngIf=\\\"existingReactions.length > 0 && !isSelectorOpen\\\"\\n  class=\\\"str-chat__reaction-list\\\"\\n  [class.str-chat__reaction-list--reverse]=\\\"true\\\"\\n  data-testid=\\\"reaction-list\\\"\\n>\\n  <ul>\\n    <li\\n      *ngFor=\\\"\\n        let reactionType of existingReactions;\\n        trackBy: trackByMessageReaction\\n      \\\"\\n      data-testclass=\\\"emoji\\\"\\n    >\\n      <span class=\\\"emoji\\\">\\n        {{ getEmojiByReaction(reactionType) }}\\n      </span>\\n      &nbsp;\\n    </li>\\n    <li>\\n      <span\\n        data-testid=\\\"reactions-count\\\"\\n        class=\\\"str-chat__reaction-list--counter\\\"\\n        >{{ reactionsCount }}</span\\n      >\\n    </li>\\n  </ul>\\n</div>\\n\\n<div\\n  #selectorContainer\\n  class=\\\"str-chat__reaction-selector\\\"\\n  *ngIf=\\\"isSelectorOpen\\\"\\n  data-testid=\\\"reaction-selector\\\"\\n>\\n  <div\\n    *ngIf=\\\"tooltipText\\\"\\n    data-testid=\\\"tooltip\\\"\\n    #selectorTooltip\\n    class=\\\"str-chat__reaction-selector-tooltip\\\"\\n    [ngStyle]=\\\"{\\n      left: tooltipPositions?.tooltip + 'px',\\n      visibility: tooltipPositions ? 'visible' : 'hidden'\\n    }\\\"\\n  >\\n    <div\\n      class=\\\"arrow\\\"\\n      [ngStyle]=\\\"{ left: tooltipPositions?.arrow + 'px' }\\\"\\n    ></div>\\n    <span class=\\\"latest-user-username\\\">\\n      {{ tooltipText }}\\n    </span>\\n  </div>\\n  <ul class=\\\"str-chat__message-reactions-list\\\">\\n    <li\\n      class=\\\"str-chat__message-reactions-list-item\\\"\\n      *ngFor=\\\"\\n        let reactionType of reactionOptions;\\n        trackBy: trackByMessageReaction\\n      \\\"\\n      data-testclass=\\\"emoji-option\\\"\\n      (click)=\\\"react(reactionType)\\\"\\n      (keyup.enter)=\\\"react(reactionType)\\\"\\n    >\\n      <div\\n        *ngIf=\\\"getLatestUserByReaction(reactionType) as user\\\"\\n        class=\\\"latest-user\\\"\\n        (click)=\\\"hideTooltip()\\\"\\n        (keyup.enter)=\\\"hideTooltip()\\\"\\n        (mouseenter)=\\\"showTooltip($event, reactionType)\\\"\\n        (mouseleave)=\\\"hideTooltip()\\\"\\n        attr.data-testid=\\\"{{ reactionType }}-last-user\\\"\\n      >\\n        <stream-avatar\\n          attr.data-testid=\\\"{{ reactionType }}-avatar\\\"\\n          [imageUrl]=\\\"user.image\\\"\\n          [name]=\\\"user.name || user.id\\\"\\n          [size]=\\\"20\\\"\\n        ></stream-avatar>\\n      </div>\\n      <span class=\\\"emoji\\\" style=\\\"width: 20px; height: 20px; top: 10px\\\">\\n        {{ getEmojiByReaction(reactionType) }}\\n      </span>\\n      <span\\n        *ngIf=\\\"\\n          messageReactionCounts[reactionType] &&\\n          messageReactionCounts[reactionType]! > 0\\n        \\\"\\n        class=\\\"str-chat__message-reactions-list-item__count\\\"\\n        attr.data-testid=\\\"{{ reactionType }}-reaction-count\\\"\\n      >\\n        {{ messageReactionCounts[reactionType] }}\\n      </span>\\n    </li>\\n  </ul>\\n</div>\\n\", styles: [\".emoji {position: relative; display: inline-block; }\"], components: [{ type: AvatarComponent, selector: \"stream-avatar\", inputs: [\"name\", \"imageUrl\", \"size\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageReactionsComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-message-reactions',\n                    templateUrl: './message-reactions.component.html',\n                    styles: ['.emoji {position: relative; display: inline-block; }'],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: ChannelService }]; }, propDecorators: { messageId: [{\n                type: Input\n            }], messageReactionCounts: [{\n                type: Input\n            }], isSelectorOpen: [{\n                type: Input\n            }], isSelectorOpenChange: [{\n                type: Output\n            }], latestReactions: [{\n                type: Input\n            }], ownReactions: [{\n                type: Input\n            }], selectorContainer: [{\n                type: ViewChild,\n                args: ['selectorContainer']\n            }], selectorTooltip: [{\n                type: ViewChild,\n                args: ['selectorTooltip']\n            }] } });\n\nclass ImageLoadService {\n    constructor() {\n        this.imageLoad$ = new Subject();\n    }\n}\nImageLoadService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ImageLoadService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nImageLoadService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ImageLoadService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: ImageLoadService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return []; } });\n\nclass AttachmentListComponent {\n    constructor(imageLoadService) {\n        this.imageLoadService = imageLoadService;\n        this.attachments = [];\n        this.orderedAttachments = [];\n    }\n    ngOnChanges() {\n        this.orderedAttachments = [\n            ...this.attachments.filter((a) => this.isImage(a)),\n            ...this.attachments.filter((a) => this.isFile(a)),\n            ...this.attachments.filter((a) => this.isCard(a)),\n        ];\n    }\n    trackById(index) {\n        return index;\n    }\n    isImage(attachment) {\n        return isImageAttachment(attachment);\n    }\n    isFile(attachment) {\n        return attachment.type === 'file';\n    }\n    isCard(attachment) {\n        return (!attachment.type ||\n            (attachment.type === 'image' && !this.isImage(attachment)));\n    }\n    imageLoaded() {\n        this.imageLoadService.imageLoad$.next();\n    }\n    hasFileSize(attachment) {\n        return (attachment.file_size && Number.isFinite(Number(attachment.file_size)));\n    }\n    getFileSize(attachment) {\n        return prettybytes(attachment.file_size);\n    }\n    trimUrl(url) {\n        if (url !== undefined && url !== null) {\n            const [trimmedUrl] = url\n                .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n                .split('/');\n            return trimmedUrl;\n        }\n        return null;\n    }\n}\nAttachmentListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentListComponent, deps: [{ token: ImageLoadService }], target: i0.ɵɵFactoryTarget.Component });\nAttachmentListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: AttachmentListComponent, selector: \"stream-attachment-list\", inputs: { attachments: \"attachments\" }, usesOnChanges: true, ngImport: i0, template: \"<ng-container *ngFor=\\\"let attachment of orderedAttachments; trackBy: trackById\\\">\\n  <div\\n    data-testclass=\\\"attachment-container\\\"\\n    class=\\\"str-chat__message-attachment str-chat__message-attachment--{{\\n      attachment.type\\n    }}\\\"\\n    [class.str-chat__message-attachment--card]=\\\"isCard(attachment)\\\"\\n    [class.str-chat-angular__message-attachment-file-single]=\\\"\\n      isFile(attachment)\\n    \\\"\\n  >\\n    <img\\n      *ngIf=\\\"isImage(attachment)\\\"\\n      class=\\\"str-chat__message-attachment--img\\\"\\n      data-testclass=\\\"image\\\"\\n      [src]=\\\"attachment.img_url || attachment.thumb_url || attachment.image_url\\\"\\n      [alt]=\\\"attachment?.fallback\\\"\\n      (load)=\\\"imageLoaded()\\\"\\n    />\\n    <div\\n      *ngIf=\\\"isFile(attachment)\\\"\\n      class=\\\"\\n        str-chat__message-attachment-file--item\\n        str-chat-angular__message-attachment-file-single\\n      \\\"\\n    >\\n      <stream-icon icon=\\\"file\\\" [size]=\\\"30\\\"></stream-icon>\\n      <div class=\\\"str-chat__message-attachment-file--item-text\\\">\\n        <a\\n          data-testclass=\\\"file-link\\\"\\n          download\\n          href=\\\"{{ attachment.asset_url }}\\\"\\n          target=\\\"_blank\\\"\\n        >\\n          {{ attachment.title }}\\n        </a>\\n        <span data-testclass=\\\"size\\\" *ngIf=\\\"hasFileSize(attachment)\\\">{{\\n          getFileSize(attachment)\\n        }}</span>\\n      </div>\\n    </div>\\n    <div\\n      *ngIf=\\\"isCard(attachment)\\\"\\n      class=\\\"str-chat__message-attachment-card str-chat__message-attachment-card--{{\\n        attachment.type\\n      }}\\\"\\n    >\\n      <div\\n        *ngIf=\\\"attachment.image_url || attachment.thumb_url\\\"\\n        class=\\\"str-chat__message-attachment-card--header\\\"\\n      >\\n        <img\\n          data-testclass=\\\"card-img\\\"\\n          alt=\\\"{{ attachment.image_url || attachment.thumb_url }}\\\"\\n          src=\\\"{{ attachment.image_url || attachment.thumb_url }}\\\"\\n        />\\n      </div>\\n      <div class=\\\"str-chat__message-attachment-card--content\\\">\\n        <div class=\\\"str-chat__message-attachment-card--flex\\\">\\n          <div\\n            *ngIf=\\\"attachment.title\\\"\\n            data-testclass=\\\"card-title\\\"\\n            class=\\\"str-chat__message-attachment-card--title\\\"\\n          >\\n            {{ attachment.title }}\\n          </div>\\n          <div\\n            *ngIf=\\\"attachment.text\\\"\\n            class=\\\"str-chat__message-attachment-card--text\\\"\\n            data-testclass=\\\"card-text\\\"\\n          >\\n            {{ attachment.text }}\\n          </div>\\n          <a\\n            class=\\\"str-chat__message-attachment-card--url\\\"\\n            *ngIf=\\\"attachment.title_link || attachment.og_scrape_url\\\"\\n            data-testclass=\\\"url-link\\\"\\n            noopener\\n            noreferrer\\n            href=\\\"{{ attachment.title_link || attachment.og_scrape_url }}\\\"\\n            target=\\\"_blank\\\"\\n          >\\n            {{ trimUrl(attachment.title_link || attachment.og_scrape_url) }}\\n          </a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\", components: [{ type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AttachmentListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-attachment-list',\n                    templateUrl: './attachment-list.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ImageLoadService }]; }, propDecorators: { attachments: [{\n                type: Input\n            }] } });\n\nclass MessageComponent {\n    constructor(chatClientService, channelService) {\n        this.chatClientService = chatClientService;\n        this.channelService = channelService;\n        this.enabledMessageActions = [];\n        this.isActionBoxOpen = false;\n        this.isReactionSelectorOpen = false;\n        this.isPressedOnMobile = false;\n        this.visibleMessageActionsCount = 0;\n        this.messageTextParts = [];\n        this.user = this.chatClientService.chatClient.user;\n    }\n    ngOnChanges(changes) {\n        var _a, _b;\n        if (changes.message) {\n            let content = ((_a = this.message) === null || _a === void 0 ? void 0 : _a.html) || ((_b = this.message) === null || _b === void 0 ? void 0 : _b.text);\n            if (!content) {\n                this.messageTextParts = [];\n            }\n            else {\n                // Backend will wrap HTML content with <p></p>\\n\n                if (content.startsWith('<p>')) {\n                    content = content.replace('<p>', '');\n                }\n                if (content.endsWith('</p>\\n')) {\n                    content = content.replace('</p>\\n', '');\n                }\n                if (!this.message.mentioned_users ||\n                    this.message.mentioned_users.length === 0) {\n                    this.messageTextParts = [{ content, type: 'text' }];\n                }\n                else {\n                    this.messageTextParts = [];\n                    let text = content;\n                    this.message.mentioned_users.forEach((user) => {\n                        const mention = `@${user.name || user.id}`;\n                        const precedingText = text.substring(0, text.indexOf(mention));\n                        this.messageTextParts.push({\n                            content: precedingText,\n                            type: 'text',\n                        });\n                        this.messageTextParts.push({\n                            content: mention,\n                            type: 'mention',\n                            user,\n                        });\n                        text = text.replace(precedingText + mention, '');\n                    });\n                    if (text) {\n                        this.messageTextParts.push({ content: text, type: 'text' });\n                    }\n                }\n            }\n        }\n    }\n    get isSentByCurrentUser() {\n        var _a, _b, _c;\n        return ((_b = (_a = this.message) === null || _a === void 0 ? void 0 : _a.user) === null || _b === void 0 ? void 0 : _b.id) === ((_c = this.user) === null || _c === void 0 ? void 0 : _c.id);\n    }\n    get readByText() {\n        return getReadByText(this.message.readBy);\n    }\n    get lastReadUser() {\n        var _a;\n        return (_a = this.message) === null || _a === void 0 ? void 0 : _a.readBy.filter((u) => { var _a; return u.id !== ((_a = this.user) === null || _a === void 0 ? void 0 : _a.id); })[0];\n    }\n    get isOnlyReadByMe() {\n        return this.message && this.message.readBy.length === 0;\n    }\n    get isReadByMultipleUsers() {\n        return this.message && this.message.readBy.length > 1;\n    }\n    get isMessageDeliveredAndRead() {\n        return (this.message &&\n            this.message.readBy &&\n            this.message.status === 'received' &&\n            this.message.readBy.length > 0);\n    }\n    get parsedDate() {\n        var _a;\n        if (!this.message || !((_a = this.message) === null || _a === void 0 ? void 0 : _a.created_at)) {\n            return;\n        }\n        return parseDate(this.message.created_at);\n    }\n    get areOptionsVisible() {\n        if (!this.message) {\n            return false;\n        }\n        return !(!this.message.type ||\n            this.message.type === 'error' ||\n            this.message.type === 'system' ||\n            this.message.type === 'ephemeral' ||\n            this.message.status === 'failed' ||\n            this.message.status === 'sending');\n    }\n    get hasAttachment() {\n        var _a;\n        return !!((_a = this.message) === null || _a === void 0 ? void 0 : _a.attachments) && !!this.message.attachments.length;\n    }\n    get hasReactions() {\n        var _a;\n        return (!!((_a = this.message) === null || _a === void 0 ? void 0 : _a.reaction_counts) &&\n            Object.keys(this.message.reaction_counts).length > 0);\n    }\n    resendMessage() {\n        void this.channelService.resendMessage(this.message);\n    }\n    textClicked() {\n        if (getDeviceWidth().device !== 'mobile') {\n            this.isPressedOnMobile = false;\n            return;\n        }\n        if (this.isPressedOnMobile) {\n            return;\n        }\n        this.isPressedOnMobile = true;\n        const eventHandler = (event) => {\n            var _a;\n            if (!((_a = this.container) === null || _a === void 0 ? void 0 : _a.nativeElement.contains(event.target))) {\n                this.isPressedOnMobile = false;\n                window.removeEventListener('click', eventHandler);\n            }\n        };\n        window.addEventListener('click', eventHandler);\n    }\n}\nMessageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageComponent, deps: [{ token: ChatClientService }, { token: ChannelService }], target: i0.ɵɵFactoryTarget.Component });\nMessageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: MessageComponent, selector: \"stream-message\", inputs: { messageInputTemplate: \"messageInputTemplate\", mentionTemplate: \"mentionTemplate\", message: \"message\", enabledMessageActions: \"enabledMessageActions\", areReactionsEnabled: \"areReactionsEnabled\", canReactToMessage: \"canReactToMessage\", isLastSentMessage: \"isLastSentMessage\", canReceiveReadEvents: \"canReceiveReadEvents\" }, viewQueries: [{ propertyName: \"container\", first: true, predicate: [\"container\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  #container\\n  class=\\\"str-chat__message-simple str-chat__message str-chat__message--{{\\n    message?.type\\n  }} str-chat__message--{{ message?.status }} {{\\n    message?.text ? 'str-chat__message--has-text' : 'has-no-text'\\n  }}\\\"\\n  [class.str-chat__message--me]=\\\"isSentByCurrentUser\\\"\\n  [class.str-chat__message-simple--me]=\\\"isSentByCurrentUser\\\"\\n  [class.mobile-press]=\\\"isPressedOnMobile\\\"\\n  [class.str-chat__message--has-attachment]=\\\"hasAttachment\\\"\\n  [class.str-chat__message--with-reactions]=\\\"\\n    areReactionsEnabled && hasReactions\\n  \\\"\\n  data-testid=\\\"message-container\\\"\\n>\\n  <ng-container *ngIf=\\\"!message?.deleted_at; else deletedMessage\\\">\\n    <ng-container *ngIf=\\\"message?.type !== 'system'; else systemMessage\\\">\\n      <ng-container\\n        *ngIf=\\\"\\n          isSentByCurrentUser &&\\n          ((isLastSentMessage && message?.status === 'received') ||\\n            message?.status === 'sending')\\n        \\\"\\n      >\\n        <ng-container *ngIf=\\\"message?.status === 'sending'; else sentStatus\\\">\\n          <ng-container *ngTemplateOutlet=\\\"sendingStatus\\\"></ng-container>\\n        </ng-container>\\n        <ng-template #sentStatus>\\n          <ng-container\\n            *ngIf=\\\"\\n              isMessageDeliveredAndRead && canReceiveReadEvents;\\n              else deliveredStatus\\n            \\\"\\n          >\\n            <ng-container *ngTemplateOutlet=\\\"readStatus\\\"></ng-container>\\n          </ng-container>\\n        </ng-template>\\n      </ng-container>\\n      <stream-avatar\\n        data-testid=\\\"avatar\\\"\\n        class=\\\"str-chat-angular__avatar-host\\\"\\n        [imageUrl]=\\\"message?.user?.image\\\"\\n        [name]=\\\"message?.user?.name || message?.user?.id\\\"\\n      ></stream-avatar>\\n      <div class=\\\"str-chat__message-inner\\\">\\n        <div\\n          class=\\\"str-chat__message-simple__actions\\\"\\n          data-testid=\\\"message-options\\\"\\n          *ngIf=\\\"areOptionsVisible\\\"\\n        >\\n          <div\\n            data-testid=\\\"message-actions-container\\\"\\n            class=\\\"\\n              str-chat__message-simple__actions__action\\n              str-chat__message-simple__actions__action--options\\n            \\\"\\n            [class.str-chat-angular__message-simple__actions__action--options--editing]=\\\"\\n              isEditing\\n            \\\"\\n          >\\n            <stream-message-actions-box\\n              [isOpen]=\\\"isActionBoxOpen\\\"\\n              [isMine]=\\\"isSentByCurrentUser\\\"\\n              [enabledActions]=\\\"enabledMessageActions\\\"\\n              [message]=\\\"message\\\"\\n              (displayedActionsCount)=\\\"visibleMessageActionsCount = $event\\\"\\n              (isEditing)=\\\"isEditing = $event; isActionBoxOpen = !isEditing\\\"\\n              [messageInputTemplate]=\\\"messageInputTemplate\\\"\\n            ></stream-message-actions-box>\\n            <stream-icon\\n              *ngIf=\\\"visibleMessageActionsCount > 0\\\"\\n              data-testid=\\\"action-icon\\\"\\n              icon=\\\"action-icon\\\"\\n              (keyup.enter)=\\\"isActionBoxOpen = !isActionBoxOpen\\\"\\n              (click)=\\\"isActionBoxOpen = !isActionBoxOpen\\\"\\n            ></stream-icon>\\n          </div>\\n          <div\\n            *ngIf=\\\"areReactionsEnabled && canReactToMessage\\\"\\n            class=\\\"\\n              str-chat__message-simple__actions__action\\n              str-chat__message-simple__actions__action--reactions\\n            \\\"\\n            data-testid=\\\"reaction-icon\\\"\\n            (click)=\\\"isReactionSelectorOpen = !isReactionSelectorOpen\\\"\\n            (keyup.enter)=\\\"isReactionSelectorOpen = !isReactionSelectorOpen\\\"\\n          >\\n            <stream-icon icon=\\\"reaction-icon\\\"></stream-icon>\\n          </div>\\n        </div>\\n        <stream-message-reactions\\n          *ngIf=\\\"areReactionsEnabled\\\"\\n          [messageReactionCounts]=\\\"message?.reaction_counts || {}\\\"\\n          [latestReactions]=\\\"message?.latest_reactions || []\\\"\\n          [(isSelectorOpen)]=\\\"isReactionSelectorOpen\\\"\\n          [messageId]=\\\"message?.id\\\"\\n          [ownReactions]=\\\"message?.own_reactions || []\\\"\\n        ></stream-message-reactions>\\n        <stream-attachment-list\\n          *ngIf=\\\"hasAttachment\\\"\\n          [attachments]=\\\"message!.attachments!\\\"\\n        ></stream-attachment-list>\\n        <div class=\\\"str-chat__message-text\\\" *ngIf=\\\"message?.text\\\">\\n          <div\\n            data-testid=\\\"inner-message\\\"\\n            class=\\\"\\n              str-chat__message-text-inner str-chat__message-simple-text-inner\\n            \\\"\\n            [class.str-chat__message-light-text-inner--has-attachment]=\\\"\\n              hasAttachment\\n            \\\"\\n            (click)=\\\"\\n              message?.status === 'failed' && message?.errorStatusCode !== 403\\n                ? resendMessage()\\n                : undefined\\n            \\\"\\n            (keyup.enter)=\\\"\\n              message?.status === 'failed' && message?.errorStatusCode !== 403\\n                ? resendMessage()\\n                : undefined\\n            \\\"\\n          >\\n            <div\\n              data-testid=\\\"client-error-message\\\"\\n              *ngIf=\\\"message?.type === 'error'\\\"\\n              class=\\\"str-chat__simple-message--error-message\\\"\\n            >\\n              {{ \\\"streamChat.Error \\u00B7 Unsent\\\" | translate }}\\n            </div>\\n            <div\\n              data-testid=\\\"error-message\\\"\\n              *ngIf=\\\"message?.status === 'failed'\\\"\\n              class=\\\"str-chat__simple-message--error-message\\\"\\n            >\\n              {{\\n                (message?.errorStatusCode === 403\\n                  ? \\\"streamChat.Message Failed \\u00B7 Unauthorized\\\"\\n                  : \\\"streamChat.Message Failed \\u00B7 Click to try again\\\"\\n                ) | translate\\n              }}\\n            </div>\\n            <div\\n              (click)=\\\"textClicked()\\\"\\n              (keyup.enter)=\\\"textClicked()\\\"\\n              data-testid=\\\"text\\\"\\n            >\\n              <p>\\n                <!-- eslint-disable-next-line @angular-eslint/template/use-track-by-function -->\\n                <ng-container *ngFor=\\\"let part of messageTextParts\\\">\\n                  <span\\n                    *ngIf=\\\"part.type === 'text'; else mention\\\"\\n                    [innerHTML]=\\\"part.content\\\"\\n                  ></span>\\n                  <ng-template #mention>\\n                    <ng-container *ngIf=\\\"mentionTemplate; else defaultMention\\\">\\n                      <ng-container\\n                        *ngTemplateOutlet=\\\"\\n                          mentionTemplate;\\n                          context: { user: part.user! }\\n                        \\\"\\n                      ></ng-container>\\n                    </ng-container>\\n                    <ng-template #defaultMention>\\n                      <b>{{ part.content }}</b>\\n                    </ng-template>\\n                  </ng-template>\\n                </ng-container>\\n              </p>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"str-chat__message-data str-chat__message-simple-data\\\">\\n          <span\\n            data-testid=\\\"sender\\\"\\n            *ngIf=\\\"!isSentByCurrentUser\\\"\\n            class=\\\"str-chat__message-simple-name\\\"\\n          >\\n            {{ message?.user?.name ? message?.user?.name : message?.user?.id }}\\n          </span>\\n          <span data-testid=\\\"date\\\" class=\\\"str-chat__message-simple-timestamp\\\">\\n            {{ parsedDate }}\\n          </span>\\n        </div>\\n      </div>\\n    </ng-container>\\n  </ng-container>\\n</div>\\n\\n<ng-template #sendingStatus>\\n  <span class=\\\"str-chat__message-simple-status\\\" data-testid=\\\"sending-indicator\\\">\\n    <div class=\\\"str-chat__tooltip\\\">\\n      {{ \\\"streamChat.Sending...\\\" | translate }}\\n    </div>\\n    <stream-loading-indicator\\n      data-testid=\\\"loading-indicator\\\"\\n    ></stream-loading-indicator>\\n  </span>\\n</ng-template>\\n<ng-template #readStatus>\\n  <span class=\\\"str-chat__message-simple-status\\\" data-testid=\\\"read-indicator\\\">\\n    <div class=\\\"str-chat__tooltip\\\" data-testid=\\\"read-by-tooltip\\\">\\n      {{ readByText }}\\n    </div>\\n    <stream-avatar\\n      class=\\\"str-chat-angular__avatar-host\\\"\\n      data-test-id=\\\"last-read-user-avatar\\\"\\n      [size]=\\\"15\\\"\\n      [imageUrl]=\\\"lastReadUser?.image\\\"\\n      [name]=\\\"lastReadUser?.name || lastReadUser?.id\\\"\\n    ></stream-avatar>\\n    <span\\n      data-test-id=\\\"read-by-length\\\"\\n      *ngIf=\\\"isReadByMultipleUsers\\\"\\n      class=\\\"str-chat__message-simple-status-number\\\"\\n    >\\n      {{ (message?.readBy)!.length }}\\n    </span>\\n  </span>\\n</ng-template>\\n<ng-template #deliveredStatus>\\n  <span\\n    class=\\\"str-chat__message-simple-status\\\"\\n    data-testid=\\\"delivered-indicator\\\"\\n  >\\n    <div class=\\\"str-chat__tooltip\\\">\\n      {{ \\\"streamChat.Delivered\\\" | translate }}\\n    </div>\\n    <stream-icon\\n      data-testid=\\\"delivered-icon\\\"\\n      icon=\\\"delivered-icon\\\"\\n    ></stream-icon>\\n  </span>\\n</ng-template>\\n\\n<ng-template #deletedMessage>\\n  <div data-testid=\\\"message-deleted-component\\\">\\n    <div class=\\\"str-chat__message--deleted-inner\\\" translate>\\n      streamChat.This message was deleted...\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #systemMessage>\\n  <div data-testid=\\\"system-message\\\" class=\\\"str-chat__message--system\\\">\\n    <div class=\\\"str-chat__message--system__text\\\">\\n      <div class=\\\"str-chat__message--system__line\\\"></div>\\n      <p>{{ message?.text }}</p>\\n      <div class=\\\"str-chat__message--system__line\\\"></div>\\n    </div>\\n    <div class=\\\"str-chat__message--system__date\\\">\\n      {{ parsedDate }}\\n    </div>\\n  </div>\\n</ng-template>\\n\", components: [{ type: AvatarComponent, selector: \"stream-avatar\", inputs: [\"name\", \"imageUrl\", \"size\"] }, { type: MessageActionsBoxComponent, selector: \"stream-message-actions-box\", inputs: [\"messageInputTemplate\", \"isOpen\", \"isMine\", \"message\", \"enabledActions\"], outputs: [\"displayedActionsCount\", \"isEditing\"] }, { type: IconComponent, selector: \"stream-icon\", inputs: [\"icon\", \"size\"] }, { type: MessageReactionsComponent, selector: \"stream-message-reactions\", inputs: [\"messageId\", \"messageReactionCounts\", \"isSelectorOpen\", \"latestReactions\", \"ownReactions\"], outputs: [\"isSelectorOpenChange\"] }, { type: AttachmentListComponent, selector: \"stream-attachment-list\", inputs: [\"attachments\"] }, { type: LoadingIndicatorComponent, selector: \"stream-loading-indicator\", inputs: [\"size\", \"color\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i10.TranslateDirective, selector: \"[translate],[ngx-translate]\", inputs: [\"translate\", \"translateParams\"] }], pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-message',\n                    templateUrl: './message.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChatClientService }, { type: ChannelService }]; }, propDecorators: { messageInputTemplate: [{\n                type: Input\n            }], mentionTemplate: [{\n                type: Input\n            }], message: [{\n                type: Input\n            }], enabledMessageActions: [{\n                type: Input\n            }], areReactionsEnabled: [{\n                type: Input\n            }], canReactToMessage: [{\n                type: Input\n            }], isLastSentMessage: [{\n                type: Input\n            }], canReceiveReadEvents: [{\n                type: Input\n            }], container: [{\n                type: ViewChild,\n                args: ['container']\n            }] } });\n\nclass TextareaComponent {\n    constructor() {\n        this.class = 'str-chat__textarea';\n        this.value = '';\n        this.valueChange = new EventEmitter();\n        this.send = new EventEmitter();\n    }\n    // eslint-disable-next-line @angular-eslint/no-empty-lifecycle-method\n    ngOnChanges() { }\n    inputChanged() {\n        this.valueChange.emit(this.messageInput.nativeElement.value);\n    }\n    sent(event) {\n        event.preventDefault();\n        this.send.next();\n    }\n}\nTextareaComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TextareaComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nTextareaComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: TextareaComponent, selector: \"stream-textarea\", inputs: { value: \"value\" }, outputs: { valueChange: \"valueChange\", send: \"send\" }, host: { properties: { \"class\": \"this.class\" } }, viewQueries: [{ propertyName: \"messageInput\", first: true, predicate: [\"input\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<textarea\\n  [value]=\\\"value || ''\\\"\\n  autofocus\\n  data-testid=\\\"textarea\\\"\\n  #input\\n  placeholder=\\\"{{ 'streamChat.Type your message' | translate }}\\\"\\n  class=\\\"rta__textarea str-chat__textarea__textarea\\\"\\n  rows=\\\"1\\\"\\n  (input)=\\\"inputChanged()\\\"\\n  (keydown.enter)=\\\"sent($event)\\\"\\n></textarea>\\n\", pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TextareaComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-textarea',\n                    templateUrl: './textarea.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return []; }, propDecorators: { class: [{\n                type: HostBinding\n            }], value: [{\n                type: Input\n            }], valueChange: [{\n                type: Output\n            }], send: [{\n                type: Output\n            }], messageInput: [{\n                type: ViewChild,\n                args: ['input']\n            }] } });\n\nclass TransliterationService {\n    constructor() { }\n    transliterate(s) {\n        return transliterate(s);\n    }\n}\nTransliterationService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TransliterationService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nTransliterationService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TransliterationService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: TransliterationService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return []; } });\n\nclass AutocompleteTextareaComponent {\n    constructor(channelService, chatClientService, transliterationService) {\n        this.channelService = channelService;\n        this.chatClientService = chatClientService;\n        this.transliterationService = transliterationService;\n        this.class = 'str-chat__textarea';\n        this.value = '';\n        this.areMentionsEnabled = true;\n        this.mentionScope = 'channel';\n        this.valueChange = new EventEmitter();\n        this.send = new EventEmitter();\n        this.userMentions = new EventEmitter();\n        this.labelKey = 'autocompleteLabel';\n        this.mentionTriggerChar = '@';\n        this.autocompleteConfig = {\n            mentions: [],\n        };\n        this.subscriptions = [];\n        this.mentionedUsers = [];\n        this.userMentionConfig = {\n            triggerChar: this.mentionTriggerChar,\n            dropUp: true,\n            labelKey: this.labelKey,\n            returnTrigger: true,\n            mentionFilter: (searchString, items) => this.filter(searchString, items),\n            mentionSelect: (item, triggerChar) => this.itemSelectedFromAutocompleteList(item, triggerChar),\n        };\n        this.searchTerm$ = new BehaviorSubject('');\n        this.searchTerm$\n            .pipe(debounceTime(300), distinctUntilChanged())\n            .subscribe((searchTerm) => {\n            if (searchTerm.startsWith(this.mentionTriggerChar)) {\n                void this.updateMentionOptions(searchTerm);\n            }\n        });\n        this.subscriptions.push(this.channelService.activeChannel$.subscribe(() => {\n            this.mentionedUsers = [];\n            this.userMentions.next([...this.mentionedUsers]);\n            void this.updateMentionOptions(this.searchTerm$.getValue());\n        }));\n    }\n    ngOnChanges(changes) {\n        if (changes.areMentionsEnabled) {\n            if (this.areMentionsEnabled) {\n                this.autocompleteConfig.mentions = [this.userMentionConfig];\n                this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n            }\n            else {\n                this.autocompleteConfig.mentions = [];\n                this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n            }\n        }\n        if (changes.mentionScope) {\n            void this.updateMentionOptions(this.searchTerm$.getValue());\n        }\n    }\n    filter(searchString, items) {\n        return items.filter((item) => this.transliterate(item.autocompleteLabel.toLowerCase()).includes(this.transliterate(searchString.toLowerCase())));\n    }\n    itemSelectedFromAutocompleteList(item, triggerChar = '') {\n        if (triggerChar === this.mentionTriggerChar) {\n            this.mentionedUsers.push((item.user ? item.user : item));\n            this.userMentions.next([...this.mentionedUsers]);\n        }\n        return triggerChar + item.autocompleteLabel;\n    }\n    autcompleteSearchTermChanged(searchTerm) {\n        if (searchTerm === this.mentionTriggerChar) {\n            void this.updateMentionOptions();\n        }\n        else {\n            this.searchTerm$.next(searchTerm);\n        }\n    }\n    inputChanged() {\n        this.valueChange.emit(this.messageInput.nativeElement.value);\n    }\n    inputLeft() {\n        this.updateMentionedUsersFromText();\n    }\n    sent(event) {\n        event.preventDefault();\n        this.updateMentionedUsersFromText();\n        this.send.next();\n    }\n    transliterate(s) {\n        if (this.transliterationService) {\n            return this.transliterationService.transliterate(s);\n        }\n        else {\n            return s;\n        }\n    }\n    updateMentionOptions(searchTerm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.areMentionsEnabled) {\n                return;\n            }\n            searchTerm = searchTerm === null || searchTerm === void 0 ? void 0 : searchTerm.replace(this.mentionTriggerChar, '');\n            const request = this.mentionScope === 'application'\n                ? (s) => this.chatClientService.autocompleteUsers(s)\n                : (s) => this.channelService.autocompleteMembers(s);\n            const result = yield request(searchTerm || '');\n            const items = this.filter(searchTerm || '', result.map((i) => {\n                const user = (i.user ? i.user : i);\n                return Object.assign(Object.assign({}, i), { autocompleteLabel: user.name || user.id, type: 'mention' });\n            }));\n            this.userMentionConfig.items = items;\n            this.autocompleteConfig.mentions = [this.userMentionConfig];\n            this.autocompleteConfig = Object.assign({}, this.autocompleteConfig);\n        });\n    }\n    updateMentionedUsersFromText() {\n        const updatedMentionedUsers = [];\n        this.mentionedUsers.forEach((u) => {\n            const key = u.name || u.id;\n            if (this.value.includes(`${this.mentionTriggerChar}${key}`)) {\n                updatedMentionedUsers.push(u);\n            }\n        });\n        if (updatedMentionedUsers.length !== this.mentionedUsers.length) {\n            this.userMentions.next([...updatedMentionedUsers]);\n            this.mentionedUsers = updatedMentionedUsers;\n        }\n    }\n}\nAutocompleteTextareaComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AutocompleteTextareaComponent, deps: [{ token: ChannelService }, { token: ChatClientService }, { token: TransliterationService }], target: i0.ɵɵFactoryTarget.Component });\nAutocompleteTextareaComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: AutocompleteTextareaComponent, selector: \"stream-autocomplete-textarea\", inputs: { value: \"value\", areMentionsEnabled: \"areMentionsEnabled\", mentionAutocompleteItemTemplate: \"mentionAutocompleteItemTemplate\", mentionScope: \"mentionScope\" }, outputs: { valueChange: \"valueChange\", send: \"send\", userMentions: \"userMentions\" }, host: { properties: { \"class\": \"this.class\" } }, viewQueries: [{ propertyName: \"messageInput\", first: true, predicate: [\"input\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<textarea\\n  [value]=\\\"value || ''\\\"\\n  autofocus\\n  data-testid=\\\"textarea\\\"\\n  #input\\n  placeholder=\\\"{{ 'streamChat.Type your message' | translate }}\\\"\\n  class=\\\"rta__textarea str-chat__textarea__textarea\\\"\\n  rows=\\\"1\\\"\\n  (input)=\\\"inputChanged()\\\"\\n  (keydown.enter)=\\\"sent($event)\\\"\\n  [mentionConfig]=\\\"autocompleteConfig\\\"\\n  (searchTerm)=\\\"autcompleteSearchTermChanged($event)\\\"\\n  [mentionListTemplate]=\\\"autocompleteItem\\\"\\n  (blur)=\\\"inputLeft()\\\"\\n></textarea>\\n<ng-template #autocompleteItem let-item=\\\"item\\\">\\n  <div class=\\\"rta rta__item str-chat__emojisearch__item\\\" [ngSwitch]=\\\"item.type\\\">\\n    <div class=\\\"rta__entity\\\" *ngSwitchCase=\\\"'mention'\\\">\\n      <ng-container\\n        *ngTemplateOutlet=\\\"\\n          mentionAutocompleteItemTemplate || defaultMentionTemplate;\\n          context: { item: item }\\n        \\\"\\n      ></ng-container>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #defaultMentionTemplate let-item=\\\"item\\\">\\n  <div class=\\\"str-chat__user-item\\\">\\n    <stream-avatar\\n      data-testclass=\\\"avatar\\\"\\n      class=\\\"str-chat__avatar str-chat__avatar--circle\\\"\\n      style=\\\"height: 20px\\\"\\n      [size]=\\\"20\\\"\\n      [imageUrl]=\\\"item.image || item.user?.image\\\"\\n      [name]=\\\"item.autocompleteLabel\\\"\\n    ></stream-avatar>\\n    <span data-testclass=\\\"username\\\" class=\\\"str-chat__user-item--name\\\">{{\\n      item.autocompleteLabel\\n    }}</span>\\n  </div>\\n</ng-template>\\n\", components: [{ type: AvatarComponent, selector: \"stream-avatar\", inputs: [\"name\", \"imageUrl\", \"size\"] }], directives: [{ type: i5.MentionDirective, selector: \"[mention], [mentionConfig]\", inputs: [\"mentionConfig\", \"mention\", \"mentionListTemplate\"], outputs: [\"searchTerm\", \"itemSelected\", \"opened\", \"closed\"] }, { type: i3.NgSwitch, selector: \"[ngSwitch]\", inputs: [\"ngSwitch\"] }, { type: i3.NgSwitchCase, selector: \"[ngSwitchCase]\", inputs: [\"ngSwitchCase\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"translate\": i10.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: AutocompleteTextareaComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-autocomplete-textarea',\n                    templateUrl: './autocomplete-textarea.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: ChatClientService }, { type: TransliterationService }]; }, propDecorators: { class: [{\n                type: HostBinding\n            }], value: [{\n                type: Input\n            }], areMentionsEnabled: [{\n                type: Input\n            }], mentionAutocompleteItemTemplate: [{\n                type: Input\n            }], mentionScope: [{\n                type: Input\n            }], valueChange: [{\n                type: Output\n            }], send: [{\n                type: Output\n            }], userMentions: [{\n                type: Output\n            }], messageInput: [{\n                type: ViewChild,\n                args: ['input']\n            }] } });\n\nconst getGroupStyles = (message, previousMessage, nextMessage, noGroupByUser = false) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (noGroupByUser ||\n        (message.attachments && message.attachments.length !== 0))\n        return 'single';\n    const isTopMessage = !previousMessage ||\n        !isOnSameDay(previousMessage.created_at, message.created_at) ||\n        previousMessage.type === 'system' ||\n        (previousMessage.attachments &&\n            ((_a = previousMessage.attachments) === null || _a === void 0 ? void 0 : _a.length) !== 0) ||\n        ((_b = message.user) === null || _b === void 0 ? void 0 : _b.id) !== ((_c = previousMessage.user) === null || _c === void 0 ? void 0 : _c.id) ||\n        previousMessage.type === 'error' ||\n        previousMessage.deleted_at;\n    const isBottomMessage = !nextMessage ||\n        !isOnSameDay(message.created_at, nextMessage.created_at) ||\n        nextMessage.type === 'system' ||\n        (nextMessage.attachments && ((_d = nextMessage.attachments) === null || _d === void 0 ? void 0 : _d.length) !== 0) ||\n        ((_e = message.user) === null || _e === void 0 ? void 0 : _e.id) !== ((_f = nextMessage.user) === null || _f === void 0 ? void 0 : _f.id) ||\n        nextMessage.type === 'error' ||\n        nextMessage.deleted_at;\n    if (!isTopMessage && !isBottomMessage) {\n        if (message.deleted_at || message.type === 'error')\n            return 'single';\n        return 'middle';\n    }\n    if (isBottomMessage) {\n        if (isTopMessage || message.deleted_at || message.type === 'error')\n            return 'single';\n        return 'bottom';\n    }\n    if (isTopMessage)\n        return 'top';\n    return '';\n};\nconst isOnSameDay = (date1, date2) => {\n    return (date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate());\n};\n\nclass MessageListComponent {\n    constructor(channelService, chatClientService, imageLoadService) {\n        this.channelService = channelService;\n        this.chatClientService = chatClientService;\n        this.imageLoadService = imageLoadService;\n        this.areReactionsEnabled = true;\n        /* eslint-disable-next-line @angular-eslint/no-input-rename */\n        this.enabledMessageActionsInput = ['flag', 'edit', 'edit-any', 'delete', 'delete-any'];\n        this.enabledMessageActions = [];\n        this.class = 'str-chat-angular__main-panel-inner str-chat-angular__message-list-host';\n        this.unreadMessageCount = 0;\n        this.groupStyles = [];\n        this.authorizedMessageActions = ['flag'];\n        this.isUserScrolledUpThreshold = 300;\n        this.channelService.activeChannel$.subscribe((channel) => {\n            var _a;\n            this.latestMessageDate = undefined;\n            this.hasNewMessages = true;\n            this.isUserScrolledUp = false;\n            this.containerHeight = undefined;\n            this.olderMassagesLoaded = false;\n            this.oldestMessageDate = undefined;\n            this.unreadMessageCount = 0;\n            this.isNewMessageSentByUser = undefined;\n            const capabilites = (_a = channel === null || channel === void 0 ? void 0 : channel.data) === null || _a === void 0 ? void 0 : _a.own_capabilities;\n            if (capabilites) {\n                this.canReactToMessage = capabilites.indexOf('send-reaction') !== -1;\n                this.canReceiveReadEvents = capabilites.indexOf('read-events') !== -1;\n                this.authorizedMessageActions = [];\n                if (capabilites.indexOf('flag-message') !== -1) {\n                    this.authorizedMessageActions.push('flag');\n                }\n                if (capabilites.indexOf('update-own-message') !== -1) {\n                    this.authorizedMessageActions.push('edit');\n                }\n                if (capabilites.indexOf('update-any-message') !== -1) {\n                    this.authorizedMessageActions.push('edit');\n                    this.authorizedMessageActions.push('edit-any');\n                }\n                if (capabilites.indexOf('delete-own-message') !== -1) {\n                    this.authorizedMessageActions.push('delete');\n                }\n                if (capabilites.indexOf('delete-any-message') !== -1) {\n                    this.authorizedMessageActions.push('delete');\n                    this.authorizedMessageActions.push('delete-any');\n                }\n                this.setEnabledActions();\n            }\n        });\n        this.messages$ = this.channelService.activeChannelMessages$.pipe(tap((messages) => {\n            var _a, _b, _c, _d, _e;\n            if (messages.length === 0) {\n                return;\n            }\n            const currentLatestMessageDate = messages[messages.length - 1].created_at;\n            if (!this.latestMessageDate ||\n                ((_a = this.latestMessageDate) === null || _a === void 0 ? void 0 : _a.getTime()) < currentLatestMessageDate.getTime()) {\n                this.latestMessageDate = currentLatestMessageDate;\n                this.hasNewMessages = true;\n                this.isNewMessageSentByUser =\n                    ((_b = messages[messages.length - 1].user) === null || _b === void 0 ? void 0 : _b.id) ===\n                        ((_d = (_c = this.chatClientService.chatClient) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id);\n                if (this.isUserScrolledUp) {\n                    this.unreadMessageCount++;\n                }\n            }\n            const currentOldestMessageDate = messages[0].created_at;\n            if (!this.oldestMessageDate) {\n                this.oldestMessageDate = currentOldestMessageDate;\n            }\n            else if (((_e = this.oldestMessageDate) === null || _e === void 0 ? void 0 : _e.getTime()) > currentOldestMessageDate.getTime()) {\n                this.oldestMessageDate = currentOldestMessageDate;\n                this.olderMassagesLoaded = true;\n            }\n        }), tap((messages) => {\n            this.groupStyles = messages.map((m, i) => getGroupStyles(m, messages[i - 1], messages[i + 1]));\n        }), tap((messages) => {\n            var _a;\n            return (this.lastSentMessageId = (_a = [...messages]\n                .reverse()\n                .find((m) => {\n                var _a, _b, _c;\n                return ((_a = m.user) === null || _a === void 0 ? void 0 : _a.id) === ((_c = (_b = this.chatClientService.chatClient) === null || _b === void 0 ? void 0 : _b.user) === null || _c === void 0 ? void 0 : _c.id) &&\n                    m.status !== 'sending';\n            })) === null || _a === void 0 ? void 0 : _a.id);\n        }));\n        this.imageLoadService.imageLoad$.subscribe(() => {\n            if (!this.isUserScrolledUp) {\n                this.scrollToBottom();\n                // Hacky and unreliable workaround to scroll down after loaded images move the scrollbar\n                setTimeout(() => {\n                    this.scrollToBottom();\n                }, 300);\n            }\n        });\n    }\n    ngOnChanges(changes) {\n        if (changes.enabledMessageActionsInput) {\n            this.setEnabledActions();\n        }\n    }\n    ngAfterViewChecked() {\n        if (this.hasNewMessages) {\n            if (!this.isUserScrolledUp || this.isNewMessageSentByUser) {\n                this.scrollToBottom();\n                // Hacky and unreliable workaround to scroll down after loaded images move the scrollbar\n                setTimeout(() => {\n                    this.scrollToBottom();\n                }, 300);\n            }\n            this.hasNewMessages = false;\n            this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n        }\n        else if (this.olderMassagesLoaded) {\n            this.preserveScrollbarPosition();\n            this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n            this.olderMassagesLoaded = false;\n        }\n    }\n    trackByMessageId(index, item) {\n        return item.id;\n    }\n    scrollToBottom() {\n        this.scrollContainer.nativeElement.scrollTop =\n            this.scrollContainer.nativeElement.scrollHeight;\n    }\n    scrolled() {\n        this.isUserScrolledUp =\n            this.scrollContainer.nativeElement.scrollHeight -\n                (this.scrollContainer.nativeElement.scrollTop +\n                    this.scrollContainer.nativeElement.clientHeight) >\n                this.isUserScrolledUpThreshold;\n        if (!this.isUserScrolledUp) {\n            this.unreadMessageCount = 0;\n        }\n        if (this.scrollContainer.nativeElement.scrollTop === 0) {\n            this.containerHeight = this.scrollContainer.nativeElement.scrollHeight;\n            void this.channelService.loadMoreMessages();\n        }\n    }\n    preserveScrollbarPosition() {\n        this.scrollContainer.nativeElement.scrollTop =\n            this.scrollContainer.nativeElement.scrollHeight - this.containerHeight;\n    }\n    setEnabledActions() {\n        this.enabledMessageActions = [];\n        if (!this.enabledMessageActionsInput) {\n            return;\n        }\n        this.enabledMessageActionsInput.forEach((action) => {\n            const isAuthorized = this.authorizedMessageActions.indexOf(action) !== -1;\n            if (isAuthorized) {\n                this.enabledMessageActions.push(action);\n            }\n        });\n    }\n}\nMessageListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageListComponent, deps: [{ token: ChannelService }, { token: ChatClientService }, { token: ImageLoadService }], target: i0.ɵɵFactoryTarget.Component });\nMessageListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.5\", type: MessageListComponent, selector: \"stream-message-list\", inputs: { messageTemplate: \"messageTemplate\", messageInputTemplate: \"messageInputTemplate\", mentionTemplate: \"mentionTemplate\", areReactionsEnabled: \"areReactionsEnabled\", enabledMessageActionsInput: [\"enabledMessageActions\", \"enabledMessageActionsInput\"] }, host: { properties: { \"class\": \"this.class\" } }, viewQueries: [{ propertyName: \"scrollContainer\", first: true, predicate: [\"scrollContainer\"], descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<div\\n  #scrollContainer\\n  data-testid=\\\"scroll-container\\\"\\n  class=\\\"str-chat__list\\\"\\n  (scroll)=\\\"scrolled()\\\"\\n>\\n  <div class=\\\"str-chat__reverse-infinite-scroll\\\">\\n    <ul class=\\\"str-chat__ul\\\">\\n      <li\\n        data-testclass=\\\"message\\\"\\n        *ngFor=\\\"\\n          let message of messages$ | async;\\n          let i = index;\\n          trackBy: trackByMessageId\\n        \\\"\\n        class=\\\"str-chat__li str-chat__li--{{ groupStyles[i] }}\\\"\\n      >\\n        <ng-container *ngIf=\\\"messageTemplate; else defaultMessageTemplate\\\">\\n          <ng-container\\n            *ngTemplateOutlet=\\\"\\n              messageTemplate;\\n              context: {\\n                message: message,\\n                areReactionsEnabled: areReactionsEnabled,\\n                canReactToMessage: canReactToMessage,\\n                lastSentMessageId: !!(\\n                  lastSentMessageId && message?.id === lastSentMessageId\\n                ),\\n                canReceiveReadEvents: canReceiveReadEvents,\\n                messageInputTemplate: messageInputTemplate,\\n                mentionTemplate: mentionTemplate\\n              }\\n            \\\"\\n          ></ng-container>\\n        </ng-container>\\n        <ng-template #defaultMessageTemplate>\\n          <stream-message\\n            [message]=\\\"message\\\"\\n            [areReactionsEnabled]=\\\"areReactionsEnabled\\\"\\n            [canReactToMessage]=\\\"canReactToMessage\\\"\\n            [isLastSentMessage]=\\\"\\n              !!(lastSentMessageId && message?.id === lastSentMessageId)\\n            \\\"\\n            [enabledMessageActions]=\\\"enabledMessageActions\\\"\\n            [canReceiveReadEvents]=\\\"canReceiveReadEvents\\\"\\n            [messageInputTemplate]=\\\"messageInputTemplate\\\"\\n            [mentionTemplate]=\\\"mentionTemplate\\\"\\n          ></stream-message>\\n        </ng-template>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\\\"str-chat__list-notifications\\\">\\n  <button\\n    data-testid=\\\"scroll-to-bottom\\\"\\n    *ngIf=\\\"isUserScrolledUp\\\"\\n    class=\\\"\\n      str-chat__message-notification\\n      str-chat__message-notification-right\\n      str-chat__message-notification-scroll-down\\n    \\\"\\n    (keyup.enter)=\\\"scrollToBottom()\\\"\\n    (click)=\\\"scrollToBottom()\\\"\\n  >\\n    <div\\n      *ngIf=\\\"unreadMessageCount > 0\\\"\\n      class=\\\"\\n        str-chat__message-notification\\n        str-chat__message-notification-scroll-down-unread-count\\n      \\\"\\n    >\\n      {{ unreadMessageCount }}\\n    </div>\\n  </button>\\n</div>\\n\", components: [{ type: MessageComponent, selector: \"stream-message\", inputs: [\"messageInputTemplate\", \"mentionTemplate\", \"message\", \"enabledMessageActions\", \"areReactionsEnabled\", \"canReactToMessage\", \"isLastSentMessage\", \"canReceiveReadEvents\"] }], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"async\": i3.AsyncPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: MessageListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'stream-message-list',\n                    templateUrl: './message-list.component.html',\n                    styles: [],\n                }]\n        }], ctorParameters: function () { return [{ type: ChannelService }, { type: ChatClientService }, { type: ImageLoadService }]; }, propDecorators: { messageTemplate: [{\n                type: Input\n            }], messageInputTemplate: [{\n                type: Input\n            }], mentionTemplate: [{\n                type: Input\n            }], areReactionsEnabled: [{\n                type: Input\n            }], enabledMessageActionsInput: [{\n                type: Input,\n                args: ['enabledMessageActions']\n            }], class: [{\n                type: HostBinding,\n                args: ['class']\n            }], scrollContainer: [{\n                type: ViewChild,\n                args: ['scrollContainer']\n            }] } });\n\nclass StreamAvatarModule {\n}\nStreamAvatarModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAvatarModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStreamAvatarModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAvatarModule, declarations: [AvatarComponent], imports: [CommonModule, TranslateModule], exports: [AvatarComponent] });\nStreamAvatarModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAvatarModule, imports: [[CommonModule, TranslateModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAvatarModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [AvatarComponent],\n                    imports: [CommonModule, TranslateModule],\n                    exports: [AvatarComponent],\n                }]\n        }] });\n\nclass StreamChatModule {\n}\nStreamChatModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamChatModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStreamChatModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamChatModule, declarations: [ChannelComponent,\n        ChannelHeaderComponent,\n        ChannelListComponent,\n        ChannelPreviewComponent,\n        MessageComponent,\n        MessageInputComponent,\n        MessageListComponent,\n        LoadingIndicatorComponent,\n        IconComponent,\n        MessageActionsBoxComponent,\n        AttachmentListComponent,\n        MessageReactionsComponent,\n        NotificationComponent,\n        NotificationListComponent,\n        AttachmentPreviewListComponent,\n        ModalComponent,\n        TextareaDirective], imports: [CommonModule, TranslateModule, StreamAvatarModule], exports: [ChannelComponent,\n        ChannelHeaderComponent,\n        ChannelListComponent,\n        ChannelPreviewComponent,\n        MessageComponent,\n        MessageInputComponent,\n        MessageListComponent,\n        LoadingIndicatorComponent,\n        IconComponent,\n        MessageActionsBoxComponent,\n        AttachmentListComponent,\n        MessageReactionsComponent,\n        NotificationComponent,\n        NotificationListComponent,\n        AttachmentPreviewListComponent,\n        ModalComponent,\n        StreamAvatarModule] });\nStreamChatModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamChatModule, imports: [[CommonModule, TranslateModule, StreamAvatarModule], StreamAvatarModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamChatModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        ChannelComponent,\n                        ChannelHeaderComponent,\n                        ChannelListComponent,\n                        ChannelPreviewComponent,\n                        MessageComponent,\n                        MessageInputComponent,\n                        MessageListComponent,\n                        LoadingIndicatorComponent,\n                        IconComponent,\n                        MessageActionsBoxComponent,\n                        AttachmentListComponent,\n                        MessageReactionsComponent,\n                        NotificationComponent,\n                        NotificationListComponent,\n                        AttachmentPreviewListComponent,\n                        ModalComponent,\n                        TextareaDirective,\n                    ],\n                    imports: [CommonModule, TranslateModule, StreamAvatarModule],\n                    exports: [\n                        ChannelComponent,\n                        ChannelHeaderComponent,\n                        ChannelListComponent,\n                        ChannelPreviewComponent,\n                        MessageComponent,\n                        MessageInputComponent,\n                        MessageListComponent,\n                        LoadingIndicatorComponent,\n                        IconComponent,\n                        MessageActionsBoxComponent,\n                        AttachmentListComponent,\n                        MessageReactionsComponent,\n                        NotificationComponent,\n                        NotificationListComponent,\n                        AttachmentPreviewListComponent,\n                        ModalComponent,\n                        StreamAvatarModule,\n                    ],\n                }]\n        }] });\n\nclass StreamAutocompleteTextareaModule {\n}\nStreamAutocompleteTextareaModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAutocompleteTextareaModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStreamAutocompleteTextareaModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAutocompleteTextareaModule, declarations: [AutocompleteTextareaComponent], imports: [CommonModule, TranslateModule, MentionModule, StreamAvatarModule], exports: [AutocompleteTextareaComponent] });\nStreamAutocompleteTextareaModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAutocompleteTextareaModule, providers: [\n        {\n            provide: textareaInjectionToken,\n            useValue: AutocompleteTextareaComponent,\n        },\n    ], imports: [[CommonModule, TranslateModule, MentionModule, StreamAvatarModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamAutocompleteTextareaModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [AutocompleteTextareaComponent],\n                    imports: [CommonModule, TranslateModule, MentionModule, StreamAvatarModule],\n                    exports: [AutocompleteTextareaComponent],\n                    providers: [\n                        {\n                            provide: textareaInjectionToken,\n                            useValue: AutocompleteTextareaComponent,\n                        },\n                    ],\n                }]\n        }] });\n\nclass StreamTextareaModule {\n}\nStreamTextareaModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamTextareaModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStreamTextareaModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamTextareaModule, declarations: [TextareaComponent], imports: [CommonModule, TranslateModule], exports: [TextareaComponent] });\nStreamTextareaModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamTextareaModule, providers: [\n        {\n            provide: textareaInjectionToken,\n            useValue: TextareaComponent,\n        },\n    ], imports: [[CommonModule, TranslateModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.5\", ngImport: i0, type: StreamTextareaModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [TextareaComponent],\n                    imports: [CommonModule, TranslateModule],\n                    exports: [TextareaComponent],\n                    providers: [\n                        {\n                            provide: textareaInjectionToken,\n                            useValue: TextareaComponent,\n                        },\n                    ],\n                }]\n        }] });\n\n/*\n * Public API Surface of stream-chat-angular\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AttachmentListComponent, AttachmentPreviewListComponent, AttachmentService, AutocompleteTextareaComponent, AvatarComponent, ChannelComponent, ChannelHeaderComponent, ChannelListComponent, ChannelListToggleService, ChannelPreviewComponent, ChannelService, ChatClientService, IconComponent, ImageLoadService, LoadingIndicatorComponent, MessageActionsBoxComponent, MessageComponent, MessageInputComponent, MessageInputConfigService, MessageListComponent, MessageReactionsComponent, ModalComponent, NotificationComponent, NotificationListComponent, NotificationService, StreamAutocompleteTextareaModule, StreamAvatarModule, StreamChatModule, StreamI18nService, StreamTextareaModule, TextareaComponent, TextareaDirective, ThemeService, TransliterationService, createMessagePreview, getDeviceWidth, getGroupStyles, getReadBy, getReadByText, isImageAttachment, isImageFile, parseDate, textareaInjectionToken };\n"]},"metadata":{},"sourceType":"module"}